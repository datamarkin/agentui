var Ss=Object.defineProperty;var Ns=(e,t,n)=>t in e?Ss(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ci=(e,t,n)=>Ns(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function we(){}function Ee(e,t){for(const n in t)e[n]=t[n];return e}function Fr(e){return e()}function _o(){return Object.create(null)}function Ie(e){e.forEach(Fr)}function Se(e){return typeof e=="function"}function ye(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let zn;function bo(e,t){return e===t?!0:(zn||(zn=document.createElement("a")),zn.href=t,e===zn.href)}function qr(e,t){return e!=e?t==t:e!==t}function Es(e){return Object.keys(e).length===0}function Tt(e,...t){if(e==null){for(const i of t)i(void 0);return we}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Y(e){let t;return Tt(e,n=>t=n)(),t}function $(e,t,n){e.$$.on_destroy.push(Tt(t,n))}function Ue(e,t,n,i){if(e){const o=Zr(e,t,n,i);return e[0](o)}}function Zr(e,t,n,i){return e[1]&&i?Ee(n.ctx.slice(),e[1](i(t))):n.ctx}function Qe(e,t,n,i){if(e[2]&&i){const o=e[2](i(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const r=[],s=Math.max(t.dirty.length,o.length);for(let l=0;l<s;l+=1)r[l]=t.dirty[l]|o[l];return r}return t.dirty|o}return t.dirty}function Je(e,t,n,i,o,r){if(o){const s=Zr(t,n,i,r);e.p(s,o)}}function xe(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function ct(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function De(e,t){const n={};t=new Set(t);for(const i in e)!t.has(i)&&i[0]!=="$"&&(n[i]=e[i]);return n}function Ps(e){const t={};for(const n in e)t[n]=!0;return t}function Le(e){return e??""}function qn(e,t,n){return e.set(n),t}function Ke(e){return e&&Se(e.destroy)?e.destroy:we}const jr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function K(e,t){e.appendChild(t)}function F(e,t,n){e.insertBefore(t,n||null)}function W(e){e.parentNode&&e.parentNode.removeChild(e)}function xt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function x(e){return document.createElement(e)}function oe(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Pe(e){return document.createTextNode(e)}function ce(){return Pe(" ")}function Be(){return Pe("")}function fe(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Ms=["width","height"];function Zn(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const i in t)t[i]==null?e.removeAttribute(i):i==="style"?e.style.cssText=t[i]:i==="__value"?e.value=e[i]=t[i]:n[i]&&n[i].set&&Ms.indexOf(i)===-1?e[i]=t[i]:g(e,i,t[i])}function Os(e){return Array.from(e.childNodes)}function Ve(e,t){t=""+t,e.data!==t&&(e.data=t)}function jn(e,t){e.value=t??""}function pe(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function po(e,t,n){for(let i=0;i<e.options.length;i+=1){const o=e.options[i];if(o.__value===t){o.selected=!0;return}}e.selectedIndex=-1}let Dn;function Ts(){if(Dn===void 0){Dn=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Dn=!0}}return Dn}function zs(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=x("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=Ts();let r;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=fe(window,"message",s=>{s.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{r=fe(i.contentWindow,"resize",t),t()}),K(e,i),()=>{(o||r&&i.contentWindow)&&r(),W(i)}}function ae(e,t,n){e.classList.toggle(t,!!n)}function Ds(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function Gn(e,t){return new e(t)}let gn;function hn(e){gn=e}function an(){if(!gn)throw new Error("Function called outside component initialization");return gn}function Cn(e){an().$$.on_mount.push(e)}function Gi(e){an().$$.on_destroy.push(e)}function Sn(){const e=an();return(t,n,{cancelable:i=!1}={})=>{const o=e.$$.callbacks[t];if(o){const r=Ds(t,n,{cancelable:i});return o.slice().forEach(s=>{s.call(e,r)}),!r.defaultPrevented}return!0}}function $t(e,t){return an().$$.context.set(e,t),t}function mn(e){return an().$$.context.get(e)}function As(e){return an().$$.context.has(e)}function ke(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const qt=[],zt=[];let jt=[];const wo=[],Is=Promise.resolve();let Ii=!1;function Hs(){Ii||(Ii=!0,Is.then(Gr))}function Un(e){jt.push(e)}const Si=new Set;let Bt=0;function Gr(){if(Bt!==0)return;const e=gn;do{try{for(;Bt<qt.length;){const t=qt[Bt];Bt++,hn(t),Ls(t.$$)}}catch(t){throw qt.length=0,Bt=0,t}for(hn(null),qt.length=0,Bt=0;zt.length;)zt.pop()();for(let t=0;t<jt.length;t+=1){const n=jt[t];Si.has(n)||(Si.add(n),n())}jt.length=0}while(qt.length);for(;wo.length;)wo.pop()();Ii=!1,Si.clear(),hn(e)}function Ls(e){if(e.fragment!==null){e.update(),Ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Un)}}function Vs(e){const t=[],n=[];jt.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),jt=t}const Yn=new Set;let Pt;function Xe(){Pt={r:0,c:[],p:Pt}}function Ye(){Pt.r||Ie(Pt.c),Pt=Pt.p}function j(e,t){e&&e.i&&(Yn.delete(e),e.i(t))}function Q(e,t,n,i){if(e&&e.o){if(Yn.has(e))return;Yn.add(e),Pt.c.push(()=>{Yn.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function He(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ui(e,t){Q(e,1,1,()=>{t.delete(e.key)})}function Qi(e,t,n,i,o,r,s,l,a,u,c,d){let f=e.length,h=r.length,y=f;const _={};for(;y--;)_[e[y].key]=y;const v=[],m=new Map,b=new Map,p=[];for(y=h;y--;){const M=d(o,r,y),S=n(M);let T=s.get(S);T?p.push(()=>T.p(M,t)):(T=u(S,M),T.c()),m.set(S,v[y]=T),S in _&&b.set(S,Math.abs(y-_[S]))}const k=new Set,E=new Set;function A(M){j(M,1),M.m(l,c),s.set(M.key,M),c=M.first,h--}for(;f&&h;){const M=v[h-1],S=e[f-1],T=M.key,P=S.key;M===S?(c=M.first,f--,h--):m.has(P)?!s.has(T)||k.has(T)?A(M):E.has(P)?f--:b.get(T)>b.get(P)?(E.add(T),A(M)):(k.add(P),f--):(a(S,s),f--)}for(;f--;){const M=e[f];m.has(M.key)||a(M,s)}for(;h;)A(v[h-1]);return Ie(p),v}function Ji(e,t){const n={},i={},o={$$scope:1};let r=e.length;for(;r--;){const s=e[r],l=t[r];if(l){for(const a in s)a in l||(i[a]=1);for(const a in l)o[a]||(n[a]=l[a],o[a]=1);e[r]=l}else for(const a in s)o[a]=1}for(const s in i)s in n||(n[s]=void 0);return n}function Rs(e){return typeof e=="object"&&e!==null?e:{}}function se(e){e&&e.c()}function re(e,t,n){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),Un(()=>{const r=e.$$.on_mount.map(Fr).filter(Se);e.$$.on_destroy?e.$$.on_destroy.push(...r):Ie(r),e.$$.on_mount=[]}),o.forEach(Un)}function le(e,t){const n=e.$$;n.fragment!==null&&(Vs(n.after_update),Ie(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Xs(e,t){e.$$.dirty[0]===-1&&(qt.push(e),Hs(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function he(e,t,n,i,o,r,s=null,l=[-1]){const a=gn;hn(e);const u=e.$$={fragment:null,ctx:[],props:r,update:we,not_equal:o,bound:_o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:_o(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};s&&s(u.root);let c=!1;if(u.ctx=n?n(e,t.props||{},(d,f,...h)=>{const y=h.length?h[0]:f;return u.ctx&&o(u.ctx[d],u.ctx[d]=y)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](y),c&&Xs(e,d)),f}):[],u.update(),c=!0,Ie(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const d=Os(t.target);u.fragment&&u.fragment.l(d),d.forEach(W)}else u.fragment&&u.fragment.c();t.intro&&j(e.$$.fragment),re(e,t.target,t.anchor),Gr()}hn(a)}class ge{constructor(){Ci(this,"$$");Ci(this,"$$set")}$destroy(){le(this,1),this.$destroy=we}$on(t,n){if(!Se(n))return we;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!Es(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ys="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ys);const Kt=[];function Ge(e,t){return{subscribe:te(e,t).subscribe}}function te(e,t=we){let n;const i=new Set;function o(l){if(ye(e,l)&&(e=l,n)){const a=!Kt.length;for(const u of i)u[1](),Kt.push(u,e);if(a){for(let u=0;u<Kt.length;u+=2)Kt[u][0](Kt[u+1]);Kt.length=0}}}function r(l){o(l(e))}function s(l,a=we){const u=[l,a];return i.add(u),i.size===1&&(n=t(o,r)||we),l(e),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:s}}function Gt(e,t,n){const i=!Array.isArray(e),o=i?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return Ge(n,(s,l)=>{let a=!1;const u=[];let c=0,d=we;const f=()=>{if(c)return;d();const y=t(i?u[0]:u,s,l);r?s(y):d=Se(y)?y:we},h=o.map((y,_)=>Tt(y,v=>{u[_]=v,c&=~(1<<_),a&&f()},()=>{c|=1<<_}));return a=!0,f(),function(){Ie(h),d(),a=!1}})}function Oe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Oe(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ws={value:()=>{}};function ci(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Wn(n)}function Wn(e){this._=e}function Bs(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Wn.prototype=ci.prototype={constructor:Wn,on:function(e,t){var n=this._,i=Bs(e+"",n),o,r=-1,s=i.length;if(arguments.length<2){for(;++r<s;)if((o=(e=i[r]).type)&&(o=Ks(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<s;)if(o=(e=i[r]).type)n[o]=ko(n[o],e.name,t);else if(t==null)for(o in n)n[o]=ko(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Wn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,r;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)}};function Ks(e,t){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===t)return o.value}function ko(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=Ws,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hi="http://www.w3.org/1999/xhtml";const vo={svg:"http://www.w3.org/2000/svg",xhtml:Hi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),vo.hasOwnProperty(t)?{space:vo[t],local:e}:e}function Fs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hi&&t.documentElement.namespaceURI===Hi?t.createElement(e):t.createElementNS(n,e)}}function qs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ur(e){var t=fi(e);return(t.local?qs:Fs)(t)}function Zs(){}function xi(e){return e==null?Zs:function(){return this.querySelector(e)}}function js(e){typeof e!="function"&&(e=xi(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,l=i[o]=new Array(s),a,u,c=0;c<s;++c)(a=r[c])&&(u=e.call(a,a.__data__,c,r))&&("__data__"in a&&(u.__data__=a.__data__),l[c]=u);return new Ze(i,this._parents)}function Gs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Us(){return[]}function Qr(e){return e==null?Us:function(){return this.querySelectorAll(e)}}function Qs(e){return function(){return Gs(e.apply(this,arguments))}}function Js(e){typeof e=="function"?e=Qs(e):e=Qr(e);for(var t=this._groups,n=t.length,i=[],o=[],r=0;r<n;++r)for(var s=t[r],l=s.length,a,u=0;u<l;++u)(a=s[u])&&(i.push(e.call(a,a.__data__,u,s)),o.push(a));return new Ze(i,o)}function Jr(e){return function(){return this.matches(e)}}function xr(e){return function(t){return t.matches(e)}}var xs=Array.prototype.find;function $s(e){return function(){return xs.call(this.children,e)}}function ea(){return this.firstElementChild}function ta(e){return this.select(e==null?ea:$s(typeof e=="function"?e:xr(e)))}var na=Array.prototype.filter;function ia(){return Array.from(this.children)}function oa(e){return function(){return na.call(this.children,e)}}function ra(e){return this.selectAll(e==null?ia:oa(typeof e=="function"?e:xr(e)))}function la(e){typeof e!="function"&&(e=Jr(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,l=i[o]=[],a,u=0;u<s;++u)(a=r[u])&&e.call(a,a.__data__,u,r)&&l.push(a);return new Ze(i,this._parents)}function $r(e){return new Array(e.length)}function sa(){return new Ze(this._enter||this._groups.map($r),this._parents)}function Qn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Qn.prototype={constructor:Qn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function aa(e){return function(){return e}}function ua(e,t,n,i,o,r){for(var s=0,l,a=t.length,u=r.length;s<u;++s)(l=t[s])?(l.__data__=r[s],i[s]=l):n[s]=new Qn(e,r[s]);for(;s<a;++s)(l=t[s])&&(o[s]=l)}function ca(e,t,n,i,o,r,s){var l,a,u=new Map,c=t.length,d=r.length,f=new Array(c),h;for(l=0;l<c;++l)(a=t[l])&&(f[l]=h=s.call(a,a.__data__,l,t)+"",u.has(h)?o[l]=a:u.set(h,a));for(l=0;l<d;++l)h=s.call(e,r[l],l,r)+"",(a=u.get(h))?(i[l]=a,a.__data__=r[l],u.delete(h)):n[l]=new Qn(e,r[l]);for(l=0;l<c;++l)(a=t[l])&&u.get(f[l])===a&&(o[l]=a)}function fa(e){return e.__data__}function da(e,t){if(!arguments.length)return Array.from(this,fa);var n=t?ca:ua,i=this._parents,o=this._groups;typeof e!="function"&&(e=aa(e));for(var r=o.length,s=new Array(r),l=new Array(r),a=new Array(r),u=0;u<r;++u){var c=i[u],d=o[u],f=d.length,h=ha(e.call(c,c&&c.__data__,u,i)),y=h.length,_=l[u]=new Array(y),v=s[u]=new Array(y),m=a[u]=new Array(f);n(c,d,_,v,m,h,t);for(var b=0,p=0,k,E;b<y;++b)if(k=_[b]){for(b>=p&&(p=b+1);!(E=v[p])&&++p<y;);k._next=E||null}}return s=new Ze(s,i),s._enter=l,s._exit=a,s}function ha(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ga(){return new Ze(this._exit||this._groups.map($r),this._parents)}function ma(e,t,n){var i=this.enter(),o=this,r=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?r.remove():n(r),i&&o?i.merge(o).order():o}function ya(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,r=i.length,s=Math.min(o,r),l=new Array(o),a=0;a<s;++a)for(var u=n[a],c=i[a],d=u.length,f=l[a]=new Array(d),h,y=0;y<d;++y)(h=u[y]||c[y])&&(f[y]=h);for(;a<o;++a)l[a]=n[a];return new Ze(l,this._parents)}function _a(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],o=i.length-1,r=i[o],s;--o>=0;)(s=i[o])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function ba(e){e||(e=pa);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var s=n[r],l=s.length,a=o[r]=new Array(l),u,c=0;c<l;++c)(u=s[c])&&(a[c]=u);a.sort(t)}return new Ze(o,this._parents).order()}function pa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function wa(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ka(){return Array.from(this)}function va(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,r=i.length;o<r;++o){var s=i[o];if(s)return s}return null}function Ca(){let e=0;for(const t of this)++e;return e}function Sa(){return!this.node()}function Na(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o=t[n],r=0,s=o.length,l;r<s;++r)(l=o[r])&&e.call(l,l.__data__,r,o);return this}function Ea(e){return function(){this.removeAttribute(e)}}function Pa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ma(e,t){return function(){this.setAttribute(e,t)}}function Oa(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ta(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function za(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Da(e,t){var n=fi(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Pa:Ea:typeof t=="function"?n.local?za:Ta:n.local?Oa:Ma)(n,t))}function el(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Aa(e){return function(){this.style.removeProperty(e)}}function Ia(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ha(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function La(e,t,n){return arguments.length>1?this.each((t==null?Aa:typeof t=="function"?Ha:Ia)(e,t,n??"")):en(this.node(),e)}function en(e,t){return e.style.getPropertyValue(t)||el(e).getComputedStyle(e,null).getPropertyValue(t)}function Va(e){return function(){delete this[e]}}function Ra(e,t){return function(){this[e]=t}}function Xa(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ya(e,t){return arguments.length>1?this.each((t==null?Va:typeof t=="function"?Xa:Ra)(e,t)):this.node()[e]}function tl(e){return e.trim().split(/^|\s+/)}function $i(e){return e.classList||new nl(e)}function nl(e){this._node=e,this._names=tl(e.getAttribute("class")||"")}nl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function il(e,t){for(var n=$i(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function ol(e,t){for(var n=$i(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function Wa(e){return function(){il(this,e)}}function Ba(e){return function(){ol(this,e)}}function Ka(e,t){return function(){(t.apply(this,arguments)?il:ol)(this,e)}}function Fa(e,t){var n=tl(e+"");if(arguments.length<2){for(var i=$i(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Ka:t?Wa:Ba)(n,t))}function qa(){this.textContent=""}function Za(e){return function(){this.textContent=e}}function ja(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ga(e){return arguments.length?this.each(e==null?qa:(typeof e=="function"?ja:Za)(e)):this.node().textContent}function Ua(){this.innerHTML=""}function Qa(e){return function(){this.innerHTML=e}}function Ja(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xa(e){return arguments.length?this.each(e==null?Ua:(typeof e=="function"?Ja:Qa)(e)):this.node().innerHTML}function $a(){this.nextSibling&&this.parentNode.appendChild(this)}function eu(){return this.each($a)}function tu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nu(){return this.each(tu)}function iu(e){var t=typeof e=="function"?e:Ur(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ou(){return null}function ru(e,t){var n=typeof e=="function"?e:Ur(e),i=t==null?ou:typeof t=="function"?t:xi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function lu(){var e=this.parentNode;e&&e.removeChild(this)}function su(){return this.each(lu)}function au(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cu(e){return this.select(e?uu:au)}function fu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function du(e){return function(t){e.call(this,t,this.__data__)}}function hu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function gu(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,o=t.length,r;n<o;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++i]=r;++i?t.length=i:delete this.__on}}}function mu(e,t,n){return function(){var i=this.__on,o,r=du(t);if(i){for(var s=0,l=i.length;s<l;++s)if((o=i[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),o.value=t;return}}this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(o):this.__on=[o]}}function yu(e,t,n){var i=hu(e+""),o,r=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,c;a<u;++a)for(o=0,c=l[a];o<r;++o)if((s=i[o]).type===c.type&&s.name===c.name)return c.value}return}for(l=t?mu:gu,o=0;o<r;++o)this.each(l(i[o],t,n));return this}function rl(e,t,n){var i=el(e),o=i.CustomEvent;typeof o=="function"?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function _u(e,t){return function(){return rl(this,e,t)}}function bu(e,t){return function(){return rl(this,e,t.apply(this,arguments))}}function pu(e,t){return this.each((typeof t=="function"?bu:_u)(e,t))}function*wu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,r=i.length,s;o<r;++o)(s=i[o])&&(yield s)}var ll=[null];function Ze(e,t){this._groups=e,this._parents=t}function Nn(){return new Ze([[document.documentElement]],ll)}function ku(){return this}Ze.prototype=Nn.prototype={constructor:Ze,select:js,selectAll:Js,selectChild:ta,selectChildren:ra,filter:la,data:da,enter:sa,exit:ga,join:ma,merge:ya,selection:ku,order:_a,sort:ba,call:wa,nodes:ka,node:va,size:Ca,empty:Sa,each:Na,attr:Da,style:La,property:Ya,classed:Fa,text:Ga,html:xa,raise:eu,lower:nu,append:iu,insert:ru,remove:su,clone:cu,datum:fu,on:yu,dispatch:pu,[Symbol.iterator]:wu};function et(e){return typeof e=="string"?new Ze([[document.querySelector(e)]],[document.documentElement]):new Ze([[e]],ll)}function vu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function st(e,t){if(e=vu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Cu={passive:!1},yn={capture:!0,passive:!1};function Ni(e){e.stopImmediatePropagation()}function Ut(e){e.preventDefault(),e.stopImmediatePropagation()}function sl(e){var t=e.document.documentElement,n=et(e).on("dragstart.drag",Ut,yn);"onselectstart"in t?n.on("selectstart.drag",Ut,yn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function al(e,t){var n=e.document.documentElement,i=et(e).on("dragstart.drag",null);t&&(i.on("click.drag",Ut,yn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const An=e=>()=>e;function Li(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:r,x:s,y:l,dx:a,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Li.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Su(e){return!e.ctrlKey&&!e.button}function Nu(){return this.parentNode}function Eu(e,t){return t??{x:e.x,y:e.y}}function Pu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mu(){var e=Su,t=Nu,n=Eu,i=Pu,o={},r=ci("start","drag","end"),s=0,l,a,u,c,d=0;function f(k){k.on("mousedown.drag",h).filter(i).on("touchstart.drag",v).on("touchmove.drag",m,Cu).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(k,E){if(!(c||!e.call(this,k,E))){var A=p(this,t.call(this,k,E),k,E,"mouse");A&&(et(k.view).on("mousemove.drag",y,yn).on("mouseup.drag",_,yn),sl(k.view),Ni(k),u=!1,l=k.clientX,a=k.clientY,A("start",k))}}function y(k){if(Ut(k),!u){var E=k.clientX-l,A=k.clientY-a;u=E*E+A*A>d}o.mouse("drag",k)}function _(k){et(k.view).on("mousemove.drag mouseup.drag",null),al(k.view,u),Ut(k),o.mouse("end",k)}function v(k,E){if(e.call(this,k,E)){var A=k.changedTouches,M=t.call(this,k,E),S=A.length,T,P;for(T=0;T<S;++T)(P=p(this,M,k,E,A[T].identifier,A[T]))&&(Ni(k),P("start",k,A[T]))}}function m(k){var E=k.changedTouches,A=E.length,M,S;for(M=0;M<A;++M)(S=o[E[M].identifier])&&(Ut(k),S("drag",k,E[M]))}function b(k){var E=k.changedTouches,A=E.length,M,S;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),M=0;M<A;++M)(S=o[E[M].identifier])&&(Ni(k),S("end",k,E[M]))}function p(k,E,A,M,S,T){var P=r.copy(),H=st(T||A,E),B,R,w;if((w=n.call(k,new Li("beforestart",{sourceEvent:A,target:f,identifier:S,active:s,x:H[0],y:H[1],dx:0,dy:0,dispatch:P}),M))!=null)return B=w.x-H[0]||0,R=w.y-H[1]||0,function N(C,L,X){var z=H,I;switch(C){case"start":o[S]=N,I=s++;break;case"end":delete o[S],--s;case"drag":H=st(X||L,E),I=s;break}P.call(C,k,new Li(C,{sourceEvent:L,subject:w,target:f,identifier:S,active:I,x:H[0]+B,y:H[1]+R,dx:H[0]-z[0],dy:H[1]-z[1],dispatch:P}),M)}}return f.filter=function(k){return arguments.length?(e=typeof k=="function"?k:An(!!k),f):e},f.container=function(k){return arguments.length?(t=typeof k=="function"?k:An(k),f):t},f.subject=function(k){return arguments.length?(n=typeof k=="function"?k:An(k),f):n},f.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:An(!!k),f):i},f.on=function(){var k=r.on.apply(r,arguments);return k===r?f:k},f.clickDistance=function(k){return arguments.length?(d=(k=+k)*k,f):Math.sqrt(d)},f}function eo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ul(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function En(){}var _n=.7,Jn=1/_n,Qt="\\s*([+-]?\\d+)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",at="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ou=/^#([0-9a-f]{3,8})$/,Tu=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),zu=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),Du=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${bn}\\)$`),Au=new RegExp(`^rgba\\(${at},${at},${at},${bn}\\)$`),Iu=new RegExp(`^hsl\\(${bn},${at},${at}\\)$`),Hu=new RegExp(`^hsla\\(${bn},${at},${at},${bn}\\)$`),Co={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eo(En,pn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:So,formatHex:So,formatHex8:Lu,formatHsl:Vu,formatRgb:No,toString:No});function So(){return this.rgb().formatHex()}function Lu(){return this.rgb().formatHex8()}function Vu(){return cl(this).formatHsl()}function No(){return this.rgb().formatRgb()}function pn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ou.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Eo(t):n===3?new Fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?In(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?In(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Tu.exec(e))?new Fe(t[1],t[2],t[3],1):(t=zu.exec(e))?new Fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Du.exec(e))?In(t[1],t[2],t[3],t[4]):(t=Au.exec(e))?In(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Iu.exec(e))?Oo(t[1],t[2]/100,t[3]/100,1):(t=Hu.exec(e))?Oo(t[1],t[2]/100,t[3]/100,t[4]):Co.hasOwnProperty(e)?Eo(Co[e]):e==="transparent"?new Fe(NaN,NaN,NaN,0):null}function Eo(e){return new Fe(e>>16&255,e>>8&255,e&255,1)}function In(e,t,n,i){return i<=0&&(e=t=n=NaN),new Fe(e,t,n,i)}function Ru(e){return e instanceof En||(e=pn(e)),e?(e=e.rgb(),new Fe(e.r,e.g,e.b,e.opacity)):new Fe}function Vi(e,t,n,i){return arguments.length===1?Ru(e):new Fe(e,t,n,i??1)}function Fe(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}eo(Fe,Vi,ul(En,{brighter(e){return e=e==null?Jn:Math.pow(Jn,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_n:Math.pow(_n,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fe(Ot(this.r),Ot(this.g),Ot(this.b),xn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Po,formatHex:Po,formatHex8:Xu,formatRgb:Mo,toString:Mo}));function Po(){return`#${Mt(this.r)}${Mt(this.g)}${Mt(this.b)}`}function Xu(){return`#${Mt(this.r)}${Mt(this.g)}${Mt(this.b)}${Mt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mo(){const e=xn(this.opacity);return`${e===1?"rgb(":"rgba("}${Ot(this.r)}, ${Ot(this.g)}, ${Ot(this.b)}${e===1?")":`, ${e})`}`}function xn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mt(e){return e=Ot(e),(e<16?"0":"")+e.toString(16)}function Oo(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tt(e,t,n,i)}function cl(e){if(e instanceof tt)return new tt(e.h,e.s,e.l,e.opacity);if(e instanceof En||(e=pn(e)),!e)return new tt;if(e instanceof tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),r=Math.max(t,n,i),s=NaN,l=r-o,a=(r+o)/2;return l?(t===r?s=(n-i)/l+(n<i)*6:n===r?s=(i-t)/l+2:s=(t-n)/l+4,l/=a<.5?r+o:2-r-o,s*=60):l=a>0&&a<1?0:s,new tt(s,l,a,e.opacity)}function Yu(e,t,n,i){return arguments.length===1?cl(e):new tt(e,t,n,i??1)}function tt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}eo(tt,Yu,ul(En,{brighter(e){return e=e==null?Jn:Math.pow(Jn,e),new tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_n:Math.pow(_n,e),new tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new Fe(Ei(e>=240?e-240:e+120,o,i),Ei(e,o,i),Ei(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new tt(To(this.h),Hn(this.s),Hn(this.l),xn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xn(this.opacity);return`${e===1?"hsl(":"hsla("}${To(this.h)}, ${Hn(this.s)*100}%, ${Hn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function To(e){return e=(e||0)%360,e<0?e+360:e}function Hn(e){return Math.max(0,Math.min(1,e||0))}function Ei(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const fl=e=>()=>e;function Wu(e,t){return function(n){return e+n*t}}function Bu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Ku(e){return(e=+e)==1?dl:function(t,n){return n-t?Bu(t,n,e):fl(isNaN(t)?n:t)}}function dl(e,t){var n=t-e;return n?Wu(e,n):fl(isNaN(e)?t:e)}const zo=function e(t){var n=Ku(t);function i(o,r){var s=n((o=Vi(o)).r,(r=Vi(r)).r),l=n(o.g,r.g),a=n(o.b,r.b),u=dl(o.opacity,r.opacity);return function(c){return o.r=s(c),o.g=l(c),o.b=a(c),o.opacity=u(c),o+""}}return i.gamma=e,i}(1);function kt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ri=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pi=new RegExp(Ri.source,"g");function Fu(e){return function(){return e}}function qu(e){return function(t){return e(t)+""}}function Zu(e,t){var n=Ri.lastIndex=Pi.lastIndex=0,i,o,r,s=-1,l=[],a=[];for(e=e+"",t=t+"";(i=Ri.exec(e))&&(o=Pi.exec(t));)(r=o.index)>n&&(r=t.slice(n,r),l[s]?l[s]+=r:l[++s]=r),(i=i[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,a.push({i:s,x:kt(i,o)})),n=Pi.lastIndex;return n<t.length&&(r=t.slice(n),l[s]?l[s]+=r:l[++s]=r),l.length<2?a[0]?qu(a[0].x):Fu(t):(t=a.length,function(u){for(var c=0,d;c<t;++c)l[(d=a[c]).i]=d.x(u);return l.join("")})}var Do=180/Math.PI,Xi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hl(e,t,n,i,o,r){var s,l,a;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(a=e*n+t*i)&&(n-=e*a,i-=t*a),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,a/=l),e*i<t*n&&(e=-e,t=-t,a=-a,s=-s),{translateX:o,translateY:r,rotate:Math.atan2(t,e)*Do,skewX:Math.atan(a)*Do,scaleX:s,scaleY:l}}var Ln;function ju(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Xi:hl(t.a,t.b,t.c,t.d,t.e,t.f)}function Gu(e){return e==null||(Ln||(Ln=document.createElementNS("http://www.w3.org/2000/svg","g")),Ln.setAttribute("transform",e),!(e=Ln.transform.baseVal.consolidate()))?Xi:(e=e.matrix,hl(e.a,e.b,e.c,e.d,e.e,e.f))}function gl(e,t,n,i){function o(u){return u.length?u.pop()+" ":""}function r(u,c,d,f,h,y){if(u!==d||c!==f){var _=h.push("translate(",null,t,null,n);y.push({i:_-4,x:kt(u,d)},{i:_-2,x:kt(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(o(d)+"rotate(",null,i)-2,x:kt(u,c)})):c&&d.push(o(d)+"rotate("+c+i)}function l(u,c,d,f){u!==c?f.push({i:d.push(o(d)+"skewX(",null,i)-2,x:kt(u,c)}):c&&d.push(o(d)+"skewX("+c+i)}function a(u,c,d,f,h,y){if(u!==d||c!==f){var _=h.push(o(h)+"scale(",null,",",null,")");y.push({i:_-4,x:kt(u,d)},{i:_-2,x:kt(c,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,f),s(u.rotate,c.rotate,d,f),l(u.skewX,c.skewX,d,f),a(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var y=-1,_=f.length,v;++y<_;)d[(v=f[y]).i]=v.x(h);return d.join("")}}}var Uu=gl(ju,"px, ","px)","deg)"),Qu=gl(Gu,", ",")",")"),Ju=1e-12;function Ao(e){return((e=Math.exp(e))+1/e)/2}function xu(e){return((e=Math.exp(e))-1/e)/2}function $u(e){return((e=Math.exp(2*e))-1)/(e+1)}const ec=function e(t,n,i){function o(r,s){var l=r[0],a=r[1],u=r[2],c=s[0],d=s[1],f=s[2],h=c-l,y=d-a,_=h*h+y*y,v,m;if(_<Ju)m=Math.log(f/u)/t,v=function(M){return[l+M*h,a+M*y,u*Math.exp(t*M*m)]};else{var b=Math.sqrt(_),p=(f*f-u*u+i*_)/(2*u*n*b),k=(f*f-u*u-i*_)/(2*f*n*b),E=Math.log(Math.sqrt(p*p+1)-p),A=Math.log(Math.sqrt(k*k+1)-k);m=(A-E)/t,v=function(M){var S=M*m,T=Ao(E),P=u/(n*b)*(T*$u(t*S+E)-xu(E));return[l+P*h,a+P*y,u*T/Ao(t*S+E)]}}return v.duration=m*1e3*t/Math.SQRT2,v}return o.rho=function(r){var s=Math.max(.001,+r),l=s*s,a=l*l;return e(s,l,a)},o}(Math.SQRT2,2,4);var tn=0,fn=0,un=0,ml=1e3,$n,dn,ei=0,Dt=0,di=0,wn=typeof performance=="object"&&performance.now?performance:Date,yl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function to(){return Dt||(yl(tc),Dt=wn.now()+di)}function tc(){Dt=0}function ti(){this._call=this._time=this._next=null}ti.prototype=_l.prototype={constructor:ti,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?to():+n)+(t==null?0:+t),!this._next&&dn!==this&&(dn?dn._next=this:$n=this,dn=this),this._call=e,this._time=n,Yi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yi())}};function _l(e,t,n){var i=new ti;return i.restart(e,t,n),i}function nc(){to(),++tn;for(var e=$n,t;e;)(t=Dt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tn}function Io(){Dt=(ei=wn.now())+di,tn=fn=0;try{nc()}finally{tn=0,oc(),Dt=0}}function ic(){var e=wn.now(),t=e-ei;t>ml&&(di-=t,ei=e)}function oc(){for(var e,t=$n,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:$n=n);dn=e,Yi(i)}function Yi(e){if(!tn){fn&&(fn=clearTimeout(fn));var t=e-Dt;t>24?(e<1/0&&(fn=setTimeout(Io,e-wn.now()-di)),un&&(un=clearInterval(un))):(un||(ei=wn.now(),un=setInterval(ic,ml)),tn=1,yl(Io))}}function Ho(e,t,n){var i=new ti;return t=t==null?0:+t,i.restart(o=>{i.stop(),e(o+t)},t,n),i}var rc=ci("start","end","cancel","interrupt"),lc=[],bl=0,Lo=1,Wi=2,Bn=3,Vo=4,Bi=5,Kn=6;function hi(e,t,n,i,o,r){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;sc(e,n,{name:t,index:i,group:o,on:rc,tween:lc,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:bl})}function no(e,t){var n=it(e,t);if(n.state>bl)throw new Error("too late; already scheduled");return n}function ft(e,t){var n=it(e,t);if(n.state>Bn)throw new Error("too late; already running");return n}function it(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function sc(e,t,n){var i=e.__transition,o;i[t]=n,n.timer=_l(r,0,n.time);function r(u){n.state=Lo,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,f,h;if(n.state!==Lo)return a();for(c in i)if(h=i[c],h.name===n.name){if(h.state===Bn)return Ho(s);h.state===Vo?(h.state=Kn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=Kn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(Ho(function(){n.state===Bn&&(n.state=Vo,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Wi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Wi){for(n.state=Bn,o=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Bi,1),d=-1,f=o.length;++d<f;)o[d].call(e,c);n.state===Bi&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Kn,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function Fn(e,t){var n=e.__transition,i,o,r=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){r=!1;continue}o=i.state>Wi&&i.state<Bi,i.state=Kn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}r&&delete e.__transition}}function ac(e){return this.each(function(){Fn(this,e)})}function uc(e,t){var n,i;return function(){var o=ft(this,e),r=o.tween;if(r!==n){i=n=r;for(var s=0,l=i.length;s<l;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function cc(e,t,n){var i,o;if(typeof n!="function")throw new Error;return function(){var r=ft(this,e),s=r.tween;if(s!==i){o=(i=s).slice();for(var l={name:t,value:n},a=0,u=o.length;a<u;++a)if(o[a].name===t){o[a]=l;break}a===u&&o.push(l)}r.tween=o}}function fc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=it(this.node(),n).tween,o=0,r=i.length,s;o<r;++o)if((s=i[o]).name===e)return s.value;return null}return this.each((t==null?uc:cc)(n,e,t))}function io(e,t,n){var i=e._id;return e.each(function(){var o=ft(this,i);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return it(o,i).value[t]}}function pl(e,t){var n;return(typeof t=="number"?kt:t instanceof pn?zo:(n=pn(t))?(t=n,zo):Zu)(e,t)}function dc(e){return function(){this.removeAttribute(e)}}function hc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gc(e,t,n){var i,o=n+"",r;return function(){var s=this.getAttribute(e);return s===o?null:s===i?r:r=t(i=s,n)}}function mc(e,t,n){var i,o=n+"",r;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?r:r=t(i=s,n)}}function yc(e,t,n){var i,o,r;return function(){var s,l=n(this),a;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),a=l+"",s===a?null:s===i&&a===o?r:(o=a,r=t(i=s,l)))}}function _c(e,t,n){var i,o,r;return function(){var s,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),a=l+"",s===a?null:s===i&&a===o?r:(o=a,r=t(i=s,l)))}}function bc(e,t){var n=fi(e),i=n==="transform"?Qu:pl;return this.attrTween(e,typeof t=="function"?(n.local?_c:yc)(n,i,io(this,"attr."+e,t)):t==null?(n.local?hc:dc)(n):(n.local?mc:gc)(n,i,t))}function pc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kc(e,t){var n,i;function o(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&wc(e,r)),n}return o._value=t,o}function vc(e,t){var n,i;function o(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&pc(e,r)),n}return o._value=t,o}function Cc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=fi(e);return this.tween(n,(i.local?kc:vc)(i,t))}function Sc(e,t){return function(){no(this,e).delay=+t.apply(this,arguments)}}function Nc(e,t){return t=+t,function(){no(this,e).delay=t}}function Ec(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sc:Nc)(t,e)):it(this.node(),t).delay}function Pc(e,t){return function(){ft(this,e).duration=+t.apply(this,arguments)}}function Mc(e,t){return t=+t,function(){ft(this,e).duration=t}}function Oc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Pc:Mc)(t,e)):it(this.node(),t).duration}function Tc(e,t){if(typeof t!="function")throw new Error;return function(){ft(this,e).ease=t}}function zc(e){var t=this._id;return arguments.length?this.each(Tc(t,e)):it(this.node(),t).ease}function Dc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ft(this,e).ease=n}}function Ac(e){if(typeof e!="function")throw new Error;return this.each(Dc(this._id,e))}function Ic(e){typeof e!="function"&&(e=Jr(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,l=i[o]=[],a,u=0;u<s;++u)(a=r[u])&&e.call(a,a.__data__,u,r)&&l.push(a);return new mt(i,this._parents,this._name,this._id)}function Hc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,r=Math.min(i,o),s=new Array(i),l=0;l<r;++l)for(var a=t[l],u=n[l],c=a.length,d=s[l]=new Array(c),f,h=0;h<c;++h)(f=a[h]||u[h])&&(d[h]=f);for(;l<i;++l)s[l]=t[l];return new mt(s,this._parents,this._name,this._id)}function Lc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Vc(e,t,n){var i,o,r=Lc(t)?no:ft;return function(){var s=r(this,e),l=s.on;l!==i&&(o=(i=l).copy()).on(t,n),s.on=o}}function Rc(e,t){var n=this._id;return arguments.length<2?it(this.node(),n).on.on(e):this.each(Vc(n,e,t))}function Xc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Yc(){return this.on("end.remove",Xc(this._id))}function Wc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xi(e));for(var i=this._groups,o=i.length,r=new Array(o),s=0;s<o;++s)for(var l=i[s],a=l.length,u=r[s]=new Array(a),c,d,f=0;f<a;++f)(c=l[f])&&(d=e.call(c,c.__data__,f,l))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,hi(u[f],t,n,f,u,it(c,n)));return new mt(r,this._parents,t,n)}function Bc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qr(e));for(var i=this._groups,o=i.length,r=[],s=[],l=0;l<o;++l)for(var a=i[l],u=a.length,c,d=0;d<u;++d)if(c=a[d]){for(var f=e.call(c,c.__data__,d,a),h,y=it(c,n),_=0,v=f.length;_<v;++_)(h=f[_])&&hi(h,t,n,_,f,y);r.push(f),s.push(c)}return new mt(r,s,t,n)}var Kc=Nn.prototype.constructor;function Fc(){return new Kc(this._groups,this._parents)}function qc(e,t){var n,i,o;return function(){var r=en(this,e),s=(this.style.removeProperty(e),en(this,e));return r===s?null:r===n&&s===i?o:o=t(n=r,i=s)}}function wl(e){return function(){this.style.removeProperty(e)}}function Zc(e,t,n){var i,o=n+"",r;return function(){var s=en(this,e);return s===o?null:s===i?r:r=t(i=s,n)}}function jc(e,t,n){var i,o,r;return function(){var s=en(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),en(this,e))),s===a?null:s===i&&a===o?r:(o=a,r=t(i=s,l))}}function Gc(e,t){var n,i,o,r="style."+t,s="end."+r,l;return function(){var a=ft(this,e),u=a.on,c=a.value[r]==null?l||(l=wl(t)):void 0;(u!==n||o!==c)&&(i=(n=u).copy()).on(s,o=c),a.on=i}}function Uc(e,t,n){var i=(e+="")=="transform"?Uu:pl;return t==null?this.styleTween(e,qc(e,i)).on("end.style."+e,wl(e)):typeof t=="function"?this.styleTween(e,jc(e,i,io(this,"style."+e,t))).each(Gc(this._id,e)):this.styleTween(e,Zc(e,i,t),n).on("end.style."+e,null)}function Qc(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Jc(e,t,n){var i,o;function r(){var s=t.apply(this,arguments);return s!==o&&(i=(o=s)&&Qc(e,s,n)),i}return r._value=t,r}function xc(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Jc(e,t,n??""))}function $c(e){return function(){this.textContent=e}}function ef(e){return function(){var t=e(this);this.textContent=t??""}}function tf(e){return this.tween("text",typeof e=="function"?ef(io(this,"text",e)):$c(e==null?"":e+""))}function nf(e){return function(t){this.textContent=e.call(this,t)}}function of(e){var t,n;function i(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&nf(o)),t}return i._value=e,i}function rf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,of(e))}function lf(){for(var e=this._name,t=this._id,n=kl(),i=this._groups,o=i.length,r=0;r<o;++r)for(var s=i[r],l=s.length,a,u=0;u<l;++u)if(a=s[u]){var c=it(a,t);hi(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new mt(i,this._parents,e,n)}function sf(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(r,s){var l={value:s},a={value:function(){--o===0&&r()}};n.each(function(){var u=ft(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),u.on=t}),o===0&&r()})}var af=0;function mt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function kl(){return++af}var dt=Nn.prototype;mt.prototype={constructor:mt,select:Wc,selectAll:Bc,selectChild:dt.selectChild,selectChildren:dt.selectChildren,filter:Ic,merge:Hc,selection:Fc,transition:lf,call:dt.call,nodes:dt.nodes,node:dt.node,size:dt.size,empty:dt.empty,each:dt.each,on:Rc,attr:bc,attrTween:Cc,style:Uc,styleTween:xc,text:tf,textTween:rf,remove:Yc,tween:fc,delay:Ec,duration:Oc,ease:zc,easeVarying:Ac,end:sf,[Symbol.iterator]:dt[Symbol.iterator]};function uf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cf={time:null,delay:0,duration:250,ease:uf};function ff(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function df(e){var t,n;e instanceof mt?(t=e._id,e=e._name):(t=kl(),(n=cf).time=to(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,r=0;r<o;++r)for(var s=i[r],l=s.length,a,u=0;u<l;++u)(a=s[u])&&hi(a,e,t,u,s,n||ff(a,t));return new mt(i,this._parents,e,t)}Nn.prototype.interrupt=ac;Nn.prototype.transition=df;const Vn=e=>()=>e;function hf(e,{sourceEvent:t,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function ht(e,t,n){this.k=e,this.x=t,this.y=n}ht.prototype={constructor:ht,scale:function(e){return e===1?this:new ht(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ht(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gi=new ht(1,0,0);vl.prototype=ht.prototype;function vl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return gi;return e.__zoom}function Mi(e){e.stopImmediatePropagation()}function cn(e){e.preventDefault(),e.stopImmediatePropagation()}function gf(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function mf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ro(){return this.__zoom||gi}function yf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function _f(){return navigator.maxTouchPoints||"ontouchstart"in this}function bf(e,t,n){var i=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function pf(){var e=gf,t=mf,n=bf,i=yf,o=_f,r=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,a=ec,u=ci("start","zoom","end"),c,d,f,h=500,y=150,_=0,v=10;function m(w){w.property("__zoom",Ro).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",P).filter(o).on("touchstart.zoom",H).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(w,N,C,L){var X=w.selection?w.selection():w;X.property("__zoom",Ro),w!==X?E(w,N,C,L):X.interrupt().each(function(){A(this,arguments).event(L).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},m.scaleBy=function(w,N,C,L){m.scaleTo(w,function(){var X=this.__zoom.k,z=typeof N=="function"?N.apply(this,arguments):N;return X*z},C,L)},m.scaleTo=function(w,N,C,L){m.transform(w,function(){var X=t.apply(this,arguments),z=this.__zoom,I=C==null?k(X):typeof C=="function"?C.apply(this,arguments):C,q=z.invert(I),U=typeof N=="function"?N.apply(this,arguments):N;return n(p(b(z,U),I,q),X,s)},C,L)},m.translateBy=function(w,N,C,L){m.transform(w,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),s)},null,L)},m.translateTo=function(w,N,C,L,X){m.transform(w,function(){var z=t.apply(this,arguments),I=this.__zoom,q=L==null?k(z):typeof L=="function"?L.apply(this,arguments):L;return n(gi.translate(q[0],q[1]).scale(I.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof C=="function"?-C.apply(this,arguments):-C),z,s)},L,X)};function b(w,N){return N=Math.max(r[0],Math.min(r[1],N)),N===w.k?w:new ht(N,w.x,w.y)}function p(w,N,C){var L=N[0]-C[0]*w.k,X=N[1]-C[1]*w.k;return L===w.x&&X===w.y?w:new ht(w.k,L,X)}function k(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function E(w,N,C,L){w.on("start.zoom",function(){A(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(L).end()}).tween("zoom",function(){var X=this,z=arguments,I=A(X,z).event(L),q=t.apply(X,z),U=C==null?k(q):typeof C=="function"?C.apply(X,z):C,G=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),V=X.__zoom,ee=typeof N=="function"?N.apply(X,z):N,ne=a(V.invert(U).concat(G/V.k),ee.invert(U).concat(G/ee.k));return function(de){if(de===1)de=ee;else{var me=ne(de),J=G/me[2];de=new ht(J,U[0]-me[0]*J,U[1]-me[1]*J)}I.zoom(null,de)}})}function A(w,N,C){return!C&&w.__zooming||new M(w,N)}function M(w,N){this.that=w,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,N),this.taps=0}M.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,N){return this.mouse&&w!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var N=et(this.that).datum();u.call(w,this.that,new hf(w,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),N)}};function S(w,...N){if(!e.apply(this,arguments))return;var C=A(this,N).event(w),L=this.__zoom,X=Math.max(r[0],Math.min(r[1],L.k*Math.pow(2,i.apply(this,arguments)))),z=st(w);if(C.wheel)(C.mouse[0][0]!==z[0]||C.mouse[0][1]!==z[1])&&(C.mouse[1]=L.invert(C.mouse[0]=z)),clearTimeout(C.wheel);else{if(L.k===X)return;C.mouse=[z,L.invert(z)],Fn(this),C.start()}cn(w),C.wheel=setTimeout(I,y),C.zoom("mouse",n(p(b(L,X),C.mouse[0],C.mouse[1]),C.extent,s));function I(){C.wheel=null,C.end()}}function T(w,...N){if(f||!e.apply(this,arguments))return;var C=w.currentTarget,L=A(this,N,!0).event(w),X=et(w.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",G,!0),z=st(w,C),I=w.clientX,q=w.clientY;sl(w.view),Mi(w),L.mouse=[z,this.__zoom.invert(z)],Fn(this),L.start();function U(V){if(cn(V),!L.moved){var ee=V.clientX-I,ne=V.clientY-q;L.moved=ee*ee+ne*ne>_}L.event(V).zoom("mouse",n(p(L.that.__zoom,L.mouse[0]=st(V,C),L.mouse[1]),L.extent,s))}function G(V){X.on("mousemove.zoom mouseup.zoom",null),al(V.view,L.moved),cn(V),L.event(V).end()}}function P(w,...N){if(e.apply(this,arguments)){var C=this.__zoom,L=st(w.changedTouches?w.changedTouches[0]:w,this),X=C.invert(L),z=C.k*(w.shiftKey?.5:2),I=n(p(b(C,z),L,X),t.apply(this,N),s);cn(w),l>0?et(this).transition().duration(l).call(E,I,L,w):et(this).call(m.transform,I,L,w)}}function H(w,...N){if(e.apply(this,arguments)){var C=w.touches,L=C.length,X=A(this,N,w.changedTouches.length===L).event(w),z,I,q,U;for(Mi(w),I=0;I<L;++I)q=C[I],U=st(q,this),U=[U,this.__zoom.invert(U),q.identifier],X.touch0?!X.touch1&&X.touch0[2]!==U[2]&&(X.touch1=U,X.taps=0):(X.touch0=U,z=!0,X.taps=1+!!c);c&&(c=clearTimeout(c)),z&&(X.taps<2&&(d=U[0],c=setTimeout(function(){c=null},h)),Fn(this),X.start())}}function B(w,...N){if(this.__zooming){var C=A(this,N).event(w),L=w.changedTouches,X=L.length,z,I,q,U;for(cn(w),z=0;z<X;++z)I=L[z],q=st(I,this),C.touch0&&C.touch0[2]===I.identifier?C.touch0[0]=q:C.touch1&&C.touch1[2]===I.identifier&&(C.touch1[0]=q);if(I=C.that.__zoom,C.touch1){var G=C.touch0[0],V=C.touch0[1],ee=C.touch1[0],ne=C.touch1[1],de=(de=ee[0]-G[0])*de+(de=ee[1]-G[1])*de,me=(me=ne[0]-V[0])*me+(me=ne[1]-V[1])*me;I=b(I,Math.sqrt(de/me)),q=[(G[0]+ee[0])/2,(G[1]+ee[1])/2],U=[(V[0]+ne[0])/2,(V[1]+ne[1])/2]}else if(C.touch0)q=C.touch0[0],U=C.touch0[1];else return;C.zoom("touch",n(p(I,q,U),C.extent,s))}}function R(w,...N){if(this.__zooming){var C=A(this,N).event(w),L=w.changedTouches,X=L.length,z,I;for(Mi(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),z=0;z<X;++z)I=L[z],C.touch0&&C.touch0[2]===I.identifier?delete C.touch0:C.touch1&&C.touch1[2]===I.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(I=st(I,this),Math.hypot(d[0]-I[0],d[1]-I[1])<v)){var q=et(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return m.wheelDelta=function(w){return arguments.length?(i=typeof w=="function"?w:Vn(+w),m):i},m.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Vn(!!w),m):e},m.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Vn(!!w),m):o},m.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Vn([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),m):t},m.scaleExtent=function(w){return arguments.length?(r[0]=+w[0],r[1]=+w[1],m):[r[0],r[1]]},m.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(w){return arguments.length?(n=w,m):n},m.duration=function(w){return arguments.length?(l=+w,m):l},m.interpolate=function(w){return arguments.length?(a=w,m):a},m.on=function(){var w=u.on.apply(u,arguments);return w===u?m:w},m.clickDistance=function(w){return arguments.length?(_=(w=+w)*w,m):Math.sqrt(_)},m.tapDistance=function(w){return arguments.length?(v=+w,m):v},m}const nn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ni=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var At;(function(e){e.Strict="strict",e.Loose="loose"})(At||(At={}));var ut;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ut||(ut={}));var ii;(function(e){e.Partial="partial",e.Full="full"})(ii||(ii={}));const Ki={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Jt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Jt||(Jt={}));var oi;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(oi||(oi={}));var ue;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ue||(ue={}));const Xo={[ue.Left]:ue.Right,[ue.Right]:ue.Left,[ue.Top]:ue.Bottom,[ue.Bottom]:ue.Top};function wf(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Yo(e,t,n){if(!n)return;const i=[];e.forEach((o,r)=>{t!=null&&t.has(r)||i.push(o)}),i.length&&n(i)}function Wo(e){return e===null?null:e?"valid":"invalid"}const kf=e=>"id"in e&&"source"in e&&"target"in e,vf=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),oo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Pn=(e,t=[0,0])=>{const{width:n,height:i}=Ht(e),o=e.origin??t,r=n*o[0],s=i*o[1];return{x:e.position.x-r,y:e.position.y-s}},Cf=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,o)=>{const r=typeof o=="string";let s=!t.nodeLookup&&!r?o:void 0;t.nodeLookup&&(s=r?t.nodeLookup.get(o):oo(o)?o:t.nodeLookup.get(o.id));const l=s?ri(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return yi(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _i(n)},mi=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const o=ri(i);n=yi(n,o)}}),_i(n)},Cl=(e,t,[n,i,o]=[0,0,1],r=!1,s=!1)=>{const l={...Mn(t,[n,i,o]),width:t.width/o,height:t.height/o},a=[];for(const u of e.values()){const{measured:c,selectable:d=!0,hidden:f=!1}=u;if(s&&!d||f)continue;const h=c.width??u.width??u.initialWidth??null,y=c.height??u.height??u.initialHeight??null,_=kn(l,rn(u)),v=(h??0)*(y??0),m=r&&_>0;(!u.internals.handleBounds||m||_>=v||u.dragging)&&a.push(u)}return a},Fi=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function Sf(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function Nf({nodes:e,width:t,height:n,panZoom:i,minZoom:o,maxZoom:r},s){if(e.size===0)return Promise.resolve(!0);const l=Sf(e,s),a=mi(l),u=lo(a,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??r,(s==null?void 0:s.padding)??.1);return await i.setViewport(u,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Ef({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:r}){const s=n.get(e),l=s.parentId?n.get(s.parentId):void 0,{x:a,y:u}=l?l.internals.positionAbsolute:{x:0,y:0},c=s.origin??i;let d=o;if(s.extent==="parent"&&!s.expandParent)if(!l)r==null||r("005",nn.error005());else{const h=l.measured.width,y=l.measured.height;h&&y&&(d=[[a,u],[a+h,u+y]])}else l&&ln(s.extent)&&(d=[[s.extent[0][0]+a,s.extent[0][1]+u],[s.extent[1][0]+a,s.extent[1][1]+u]]);const f=ln(d)?It(t,d,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(r==null||r("015",nn.error015())),{position:{x:f.x-a+(s.measured.width??0)*c[0],y:f.y-u+(s.measured.height??0)*c[1]},positionAbsolute:f}}async function Sl({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:o}){const r=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const h=r.has(f.id),y=!h&&f.parentId&&s.find(_=>_.id===f.parentId);(h||y)&&s.push(f)}const l=new Set(t.map(f=>f.id)),a=i.filter(f=>f.deletable!==!1),c=Fi(s,a);for(const f of a)l.has(f.id)&&!c.find(y=>y.id===f.id)&&c.push(f);if(!o)return{edges:c,nodes:s};const d=await o({nodes:s,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:s}:{edges:[],nodes:[]}:d}const on=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),It=(e={x:0,y:0},t,n)=>({x:on(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:on(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Nl(e,t,n){const{width:i,height:o}=Ht(n),{x:r,y:s}=n.internals.positionAbsolute;return It(e,[[r,s],[r+i,s+o]],t)}const Bo=(e,t,n)=>e<t?on(Math.abs(e-t),1,t)/t:e>n?-on(Math.abs(e-n),1,t)/t:0,El=(e,t,n=15,i=40)=>{const o=Bo(e.x,i,t.width-i)*n,r=Bo(e.y,i,t.height-i)*n;return[o,r]},yi=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),qi=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),_i=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),rn=(e,t=[0,0])=>{var o,r;const{x:n,y:i}=oo(e)?e.internals.positionAbsolute:Pn(e,t);return{x:n,y:i,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0}},ri=(e,t=[0,0])=>{var o,r;const{x:n,y:i}=oo(e)?e.internals.positionAbsolute:Pn(e,t);return{x:n,y:i,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:i+(((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0)}},Pf=(e,t)=>_i(yi(qi(e),qi(t))),kn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},Ko=e=>nt(e.width)&&nt(e.height)&&nt(e.x)&&nt(e.y),nt=e=>!isNaN(e)&&isFinite(e),Mf=(e,t)=>{},ro=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Mn=({x:e,y:t},[n,i,o],r=!1,s=[1,1])=>{const l={x:(e-n)/o,y:(t-i)/o};return r?ro(l,s):l},li=({x:e,y:t},[n,i,o])=>({x:e*o+n,y:t*o+i});function Ft(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Of(e,t,n){if(typeof e=="string"||typeof e=="number"){const i=Ft(e,n),o=Ft(e,t);return{top:i,right:o,bottom:i,left:o,x:o*2,y:i*2}}if(typeof e=="object"){const i=Ft(e.top??e.y??0,n),o=Ft(e.bottom??e.y??0,n),r=Ft(e.left??e.x??0,t),s=Ft(e.right??e.x??0,t);return{top:i,right:s,bottom:o,left:r,x:r+s,y:i+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Tf(e,t,n,i,o,r){const{x:s,y:l}=li(e,[t,n,i]),{x:a,y:u}=li({x:e.x+e.width,y:e.y+e.height},[t,n,i]),c=o-a,d=r-u;return{left:Math.floor(s),top:Math.floor(l),right:Math.floor(c),bottom:Math.floor(d)}}const lo=(e,t,n,i,o,r)=>{const s=Of(r,t,n),l=(t-s.x)/e.width,a=(n-s.y)/e.height,u=Math.min(l,a),c=on(u,i,o),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,y=n/2-f*c,_=Tf(e,h,y,c,t,n),v={left:Math.min(_.left-s.left,0),top:Math.min(_.top-s.top,0),right:Math.min(_.right-s.right,0),bottom:Math.min(_.bottom-s.bottom,0)};return{x:h-v.left+v.right,y:y-v.top+v.bottom,zoom:c}},si=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ln(e){return e!==void 0&&e!=="parent"}function Ht(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Fo(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function zf(e,t={width:0,height:0},n,i,o){const r={...e},s=i.get(n);if(s){const l=s.origin||o;r.x+=s.internals.positionAbsolute.x-(t.width??0)*l[0],r.y+=s.internals.positionAbsolute.y-(t.height??0)*l[1]}return r}function Df(){let e,t;return{promise:new Promise((i,o)=>{e=i,t=o}),resolve:e,reject:t}}function Oi(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:o}){const{x:r,y:s}=gt(e),l=Mn({x:r-((o==null?void 0:o.left)??0),y:s-((o==null?void 0:o.top)??0)},i),{x:a,y:u}=n?ro(l,t):l;return{xSnapped:a,ySnapped:u,...l}}const Pl=e=>({width:e.offsetWidth,height:e.offsetHeight}),Af=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},If=["INPUT","SELECT","TEXTAREA"];function Hf(e){var i,o;const t=((o=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:If.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Ml=e=>"clientX"in e,gt=(e,t)=>{var r,s;const n=Ml(e),i=n?e.clientX:(r=e.touches)==null?void 0:r[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},qo=(e,t,n,i,o)=>{const r=t.querySelectorAll(`.${e}`);return!r||!r.length?null:Array.from(r).map(s=>{const l=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...Pl(s)}})};function Lf({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:r,targetControlX:s,targetControlY:l}){const a=e*.125+o*.375+s*.375+n*.125,u=t*.125+r*.375+l*.375+i*.125,c=Math.abs(a-e),d=Math.abs(u-t);return[a,u,c,d]}function Rn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Zo({pos:e,x1:t,y1:n,x2:i,y2:o,c:r}){switch(e){case ue.Left:return[t-Rn(t-i,r),n];case ue.Right:return[t+Rn(i-t,r),n];case ue.Top:return[t,n-Rn(n-o,r)];case ue.Bottom:return[t,n+Rn(o-n,r)]}}function Ol({sourceX:e,sourceY:t,sourcePosition:n=ue.Bottom,targetX:i,targetY:o,targetPosition:r=ue.Top,curvature:s=.25}){const[l,a]=Zo({pos:n,x1:e,y1:t,x2:i,y2:o,c:s}),[u,c]=Zo({pos:r,x1:i,y1:o,x2:e,y2:t,c:s}),[d,f,h,y]=Lf({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${e},${t} C${l},${a} ${u},${c} ${i},${o}`,d,f,h,y]}function Tl({sourceX:e,sourceY:t,targetX:n,targetY:i}){const o=Math.abs(n-e)/2,r=n<e?n+o:n-o,s=Math.abs(i-t)/2,l=i<t?i+s:i-s;return[r,l,o,s]}function Vf({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){if(!o)return i;const r=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(r?s:0)}function Rf({sourceNode:e,targetNode:t,width:n,height:i,transform:o}){const r=yi(ri(e),ri(t));r.x===r.x2&&(r.x2+=1),r.y===r.y2&&(r.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return kn(s,_i(r))>0}const Xf=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,Yf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Wf=(e,t)=>{if(!e.source||!e.target)return t;let n;return kf(e)?n={...e}:n={...e,id:Xf(e)},Yf(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function zl({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[o,r,s,l]=Tl({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,o,r,s,l]}const jo={[ue.Left]:{x:-1,y:0},[ue.Right]:{x:1,y:0},[ue.Top]:{x:0,y:-1},[ue.Bottom]:{x:0,y:1}},Bf=({source:e,sourcePosition:t=ue.Bottom,target:n})=>t===ue.Left||t===ue.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Go=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Kf({source:e,sourcePosition:t=ue.Bottom,target:n,targetPosition:i=ue.Top,center:o,offset:r}){const s=jo[t],l=jo[i],a={x:e.x+s.x*r,y:e.y+s.y*r},u={x:n.x+l.x*r,y:n.y+l.y*r},c=Bf({source:a,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h=[],y,_;const v={x:0,y:0},m={x:0,y:0},[b,p,k,E]=Tl({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*l[d]===-1){y=o.x??b,_=o.y??p;const M=[{x:y,y:a.y},{x:y,y:u.y}],S=[{x:a.x,y:_},{x:u.x,y:_}];s[d]===f?h=d==="x"?M:S:h=d==="x"?S:M}else{const M=[{x:a.x,y:u.y}],S=[{x:u.x,y:a.y}];if(d==="x"?h=s.x===f?S:M:h=s.y===f?M:S,t===i){const R=Math.abs(e[d]-n[d]);if(R<=r){const w=Math.min(r-1,r-R);s[d]===f?v[d]=(a[d]>e[d]?-1:1)*w:m[d]=(u[d]>n[d]?-1:1)*w}}if(t!==i){const R=d==="x"?"y":"x",w=s[d]===l[R],N=a[R]>u[R],C=a[R]<u[R];(s[d]===1&&(!w&&N||w&&C)||s[d]!==1&&(!w&&C||w&&N))&&(h=d==="x"?M:S)}const T={x:a.x+v.x,y:a.y+v.y},P={x:u.x+m.x,y:u.y+m.y},H=Math.max(Math.abs(T.x-h[0].x),Math.abs(P.x-h[0].x)),B=Math.max(Math.abs(T.y-h[0].y),Math.abs(P.y-h[0].y));H>=B?(y=(T.x+P.x)/2,_=h[0].y):(y=h[0].x,_=(T.y+P.y)/2)}return[[e,{x:a.x+v.x,y:a.y+v.y},...h,{x:u.x+m.x,y:u.y+m.y},n],y,_,k,E]}function Ff(e,t,n,i){const o=Math.min(Go(e,t)/2,Go(t,n)/2,i),{x:r,y:s}=t;if(e.x===r&&r===n.x||e.y===s&&s===n.y)return`L${r} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${r+o*u},${s}Q ${r},${s} ${r},${s+o*c}`}const l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${r},${s+o*a}Q ${r},${s} ${r+o*l},${s}`}function ai({sourceX:e,sourceY:t,sourcePosition:n=ue.Bottom,targetX:i,targetY:o,targetPosition:r=ue.Top,borderRadius:s=5,centerX:l,centerY:a,offset:u=20}){const[c,d,f,h,y]=Kf({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:o},targetPosition:r,center:{x:l,y:a},offset:u});return[c.reduce((v,m,b)=>{let p="";return b>0&&b<c.length-1?p=Ff(c[b-1],m,c[b+1],s):p=`${b===0?"M":"L"}${m.x} ${m.y}`,v+=p,v},""),d,f,h,y]}function Uo(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function qf(e){var d;const{sourceNode:t,targetNode:n}=e;if(!Uo(t)||!Uo(n))return null;const i=t.internals.handleBounds||Qo(t.handles),o=n.internals.handleBounds||Qo(n.handles),r=Jo((i==null?void 0:i.source)??[],e.sourceHandle),s=Jo(e.connectionMode===At.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!r||!s)return(d=e.onError)==null||d.call(e,"008",nn.error008(r?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(r==null?void 0:r.position)||ue.Bottom,a=(s==null?void 0:s.position)||ue.Top,u=vn(t,r,l),c=vn(n,s,a);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:l,targetPosition:a}}function Qo(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function vn(e,t,n=ue.Left,i=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,r=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:l}=t??Ht(e);if(i)return{x:o+s/2,y:r+l/2};switch((t==null?void 0:t.position)??n){case ue.Top:return{x:o+s/2,y:r};case ue.Right:return{x:o+s,y:r+l/2};case ue.Bottom:return{x:o+s/2,y:r+l};case ue.Left:return{x:o,y:r+l/2}}}function Jo(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Zi(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function Zf(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const r=new Set;return e.reduce((s,l)=>([l.markerStart||i,l.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const u=Zi(a,t);r.has(u)||(s.push({id:u,color:a.color||n,...a}),r.add(u))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))}const so={nodeOrigin:[0,0],nodeExtent:ni,elevateNodesOnSelect:!0,defaults:{}},jf={...so,checkEquality:!0};function ao(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function Gf(e,t,n){const i=ao(so,n);for(const o of e.values())if(o.parentId)uo(o,e,t,i);else{const r=Pn(o,i.nodeOrigin),s=ln(o.extent)?o.extent:i.nodeExtent,l=It(r,s,Ht(o));o.internals.positionAbsolute=l}}function Dl(e,t,n,i){var a,u;const o=ao(jf,i);let r=e.length>0;const s=new Map(t),l=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let d=s.get(c.id);if(o.checkEquality&&c===(d==null?void 0:d.internals.userNode))t.set(c.id,d);else{const f=Pn(c,o.nodeOrigin),h=ln(c.extent)?c.extent:o.nodeExtent,y=It(f,h,Ht(c));d={...o.defaults,...c,measured:{width:(a=c.measured)==null?void 0:a.width,height:(u=c.measured)==null?void 0:u.height},internals:{positionAbsolute:y,handleBounds:c.measured?d==null?void 0:d.internals.handleBounds:void 0,z:Al(c,l),userNode:c}},t.set(c.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(r=!1),c.parentId&&uo(d,t,n,i)}return r}function Uf(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function uo(e,t,n,i){const{elevateNodesOnSelect:o,nodeOrigin:r,nodeExtent:s}=ao(so,i),l=e.parentId,a=t.get(l);if(!a){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Uf(e,n);const u=o?1e3:0,{x:c,y:d,z:f}=Qf(e,a,r,s,u),{positionAbsolute:h}=e.internals,y=c!==h.x||d!==h.y;(y||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:y?{x:c,y:d}:h,z:f}})}function Al(e,t){return(nt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Qf(e,t,n,i,o){const{x:r,y:s}=t.internals.positionAbsolute,l=Ht(e),a=Pn(e,n),u=ln(e.extent)?It(a,e.extent,l):a;let c=It({x:r+u.x,y:s+u.y},i,l);e.extent==="parent"&&(c=Nl(c,l,t));const d=Al(e,o),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>d?f:d}}function Jf(e,t,n,i=[0,0]){var s;const o=[],r=new Map;for(const l of e){const a=t.get(l.parentId);if(!a)continue;const u=((s=r.get(l.parentId))==null?void 0:s.expandedRect)??rn(a),c=Pf(u,l.rect);r.set(l.parentId,{expandedRect:c,parent:a})}return r.size>0&&r.forEach(({expandedRect:l,parent:a},u)=>{var p;const c=a.internals.positionAbsolute,d=Ht(a),f=a.origin??i,h=l.x<c.x?Math.round(Math.abs(c.x-l.x)):0,y=l.y<c.y?Math.round(Math.abs(c.y-l.y)):0,_=Math.max(d.width,Math.round(l.width)),v=Math.max(d.height,Math.round(l.height)),m=(_-d.width)*f[0],b=(v-d.height)*f[1];(h>0||y>0||m||b)&&(o.push({id:u,type:"position",position:{x:a.position.x-h+m,y:a.position.y-y+b}}),(p=n.get(u))==null||p.forEach(k=>{e.some(E=>E.id===k.id)||o.push({id:k.id,type:"position",position:{x:k.position.x+h,y:k.position.y+y}})})),(d.width<l.width||d.height<l.height||h||y)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(h?f[0]*h-m:0),height:v+(y?f[1]*y-b:0)}})}),o}function xf(e,t,n,i,o,r){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let l=!1;if(!s)return{changes:[],updatedInternals:l};const a=[],u=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const f of e.values()){const h=t.get(f.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),l=!0;continue}const y=Pl(f.nodeElement),_=h.measured.width!==y.width||h.measured.height!==y.height;if(!!(y.width&&y.height&&(_||!h.internals.handleBounds||f.force))){const m=f.nodeElement.getBoundingClientRect(),b=ln(h.extent)?h.extent:r;let{positionAbsolute:p}=h.internals;h.parentId&&h.extent==="parent"?p=Nl(p,y,t.get(h.parentId)):b&&(p=It(p,b,y));const k={...h,measured:y,internals:{...h.internals,positionAbsolute:p,handleBounds:{source:qo("source",f.nodeElement,m,c,h.id),target:qo("target",f.nodeElement,m,c,h.id)}}};t.set(h.id,k),h.parentId&&uo(k,t,n,{nodeOrigin:o}),l=!0,_&&(a.push({id:h.id,type:"dimensions",dimensions:y}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:rn(k,o)}))}}if(d.length>0){const f=Jf(d,t,n,o);a.push(...f)}return{changes:a,updatedInternals:l}}async function $f({delta:e,panZoom:t,transform:n,translateExtent:i,width:o,height:r}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,r]],i),l=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(l)}function xo(e,t,n,i,o,r){let s=o;const l=i.get(s)||new Map;i.set(s,l.set(n,t)),s=`${o}-${e}`;const a=i.get(s)||new Map;if(i.set(s,a.set(n,t)),r){s=`${o}-${e}-${r}`;const u=i.get(s)||new Map;i.set(s,u.set(n,t))}}function Il(e,t,n){e.clear(),t.clear();for(const i of n){const{source:o,target:r,sourceHandle:s=null,targetHandle:l=null}=i,a={edgeId:i.id,source:o,target:r,sourceHandle:s,targetHandle:l},u=`${o}-${s}--${r}-${l}`,c=`${r}-${l}--${o}-${s}`;xo("source",a,c,e,o,s),xo("target",a,u,e,r,l),t.set(i.id,i)}}function Hl(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Hl(n,t):!1}function $o(e,t,n){var o;let i=e;do{if((o=i==null?void 0:i.matches)!=null&&o.call(i,t))return!0;if(i===n)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function ed(e,t,n,i){const o=new Map;for(const[r,s]of e)if((s.selected||s.id===i)&&(!s.parentId||!Hl(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const l=e.get(r);l&&o.set(r,{id:r,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return o}function Ti({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var s,l,a;const o=[];for(const[u,c]of t){const d=(s=n.get(u))==null?void 0:s.internals.userNode;d&&o.push({...d,position:c.position,dragging:i})}if(!e)return[o[0],o];const r=(l=n.get(e))==null?void 0:l.internals.userNode;return[r?{...r,position:((a=t.get(e))==null?void 0:a.position)||r.position,dragging:i}:o[0],o]}function td({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:o}){let r={x:null,y:null},s=0,l=new Map,a=!1,u={x:0,y:0},c=null,d=!1,f=null,h=!1;function y({noDragClassName:v,handleSelector:m,domNode:b,isSelectable:p,nodeId:k,nodeClickDistance:E=0}){f=et(b);function A({x:P,y:H},B){const{nodeLookup:R,nodeExtent:w,snapGrid:N,snapToGrid:C,nodeOrigin:L,onNodeDrag:X,onSelectionDrag:z,onError:I,updateNodePositions:q}=t();r={x:P,y:H};let U=!1,G={x:0,y:0,x2:0,y2:0};if(l.size>1&&w){const V=mi(l);G=qi(V)}for(const[V,ee]of l){if(!R.has(V))continue;let ne={x:P-ee.distance.x,y:H-ee.distance.y};C&&(ne=ro(ne,N));let de=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];if(l.size>1&&w&&!ee.extent){const{positionAbsolute:ie}=ee.internals,_e=ie.x-G.x+w[0][0],be=ie.x+ee.measured.width-G.x2+w[1][0],ve=ie.y-G.y+w[0][1],Z=ie.y+ee.measured.height-G.y2+w[1][1];de=[[_e,ve],[be,Z]]}const{position:me,positionAbsolute:J}=Ef({nodeId:V,nextPosition:ne,nodeLookup:R,nodeExtent:de,nodeOrigin:L,onError:I});U=U||ee.position.x!==me.x||ee.position.y!==me.y,ee.position=me,ee.internals.positionAbsolute=J}if(U&&(q(l,!0),B&&(i||X||!k&&z))){const[V,ee]=Ti({nodeId:k,dragItems:l,nodeLookup:R});i==null||i(B,l,V,ee),X==null||X(B,V,ee),k||z==null||z(B,ee)}}async function M(){if(!c)return;const{transform:P,panBy:H,autoPanSpeed:B,autoPanOnNodeDrag:R}=t();if(!R){a=!1,cancelAnimationFrame(s);return}const[w,N]=El(u,c,B);(w!==0||N!==0)&&(r.x=(r.x??0)-w/P[2],r.y=(r.y??0)-N/P[2],await H({x:w,y:N})&&A(r,null)),s=requestAnimationFrame(M)}function S(P){var U;const{nodeLookup:H,multiSelectionActive:B,nodesDraggable:R,transform:w,snapGrid:N,snapToGrid:C,selectNodesOnDrag:L,onNodeDragStart:X,onSelectionDragStart:z,unselectNodesAndEdges:I}=t();d=!0,(!L||!p)&&!B&&k&&((U=H.get(k))!=null&&U.selected||I()),p&&L&&k&&(e==null||e(k));const q=Oi(P.sourceEvent,{transform:w,snapGrid:N,snapToGrid:C,containerBounds:c});if(r=q,l=ed(H,R,q,k),l.size>0&&(n||X||!k&&z)){const[G,V]=Ti({nodeId:k,dragItems:l,nodeLookup:H});n==null||n(P.sourceEvent,l,G,V),X==null||X(P.sourceEvent,G,V),k||z==null||z(P.sourceEvent,V)}}const T=Mu().clickDistance(E).on("start",P=>{const{domNode:H,nodeDragThreshold:B,transform:R,snapGrid:w,snapToGrid:N}=t();c=(H==null?void 0:H.getBoundingClientRect())||null,h=!1,B===0&&S(P),r=Oi(P.sourceEvent,{transform:R,snapGrid:w,snapToGrid:N,containerBounds:c}),u=gt(P.sourceEvent,c)}).on("drag",P=>{const{autoPanOnNodeDrag:H,transform:B,snapGrid:R,snapToGrid:w,nodeDragThreshold:N,nodeLookup:C}=t(),L=Oi(P.sourceEvent,{transform:B,snapGrid:R,snapToGrid:w,containerBounds:c});if((P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||k&&!C.has(k))&&(h=!0),!h){if(!a&&H&&d&&(a=!0,M()),!d){const X=L.xSnapped-(r.x??0),z=L.ySnapped-(r.y??0);Math.sqrt(X*X+z*z)>N&&S(P)}(r.x!==L.xSnapped||r.y!==L.ySnapped)&&l&&d&&(u=gt(P.sourceEvent,c),A(L,P.sourceEvent))}}).on("end",P=>{if(!(!d||h)&&(a=!1,d=!1,cancelAnimationFrame(s),l.size>0)){const{nodeLookup:H,updateNodePositions:B,onNodeDragStop:R,onSelectionDragStop:w}=t();if(B(l,!1),o||R||!k&&w){const[N,C]=Ti({nodeId:k,dragItems:l,nodeLookup:H,dragging:!1});o==null||o(P.sourceEvent,l,N,C),R==null||R(P.sourceEvent,N,C),k||w==null||w(P.sourceEvent,C)}}}).filter(P=>{const H=P.target;return!P.button&&(!v||!$o(H,`.${v}`,b))&&(!m||$o(H,m,b))});f.call(T)}function _(){f==null||f.on(".drag",null)}return{update:y,destroy:_}}function nd(e,t,n){const i=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const r of t.values())kn(o,rn(r))>0&&i.push(r);return i}const id=250;function od(e,t,n,i){var l,a;let o=[],r=1/0;const s=nd(e,n,t+id);for(const u of s){const c=[...((l=u.internals.handleBounds)==null?void 0:l.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const d of c){if(i.nodeId===d.nodeId&&i.type===d.type&&i.id===d.id)continue;const{x:f,y:h}=vn(u,d,d.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(h-e.y,2));y>t||(y<r?(o=[{...d,x:f,y:h}],r=y):y===r&&o.push({...d,x:f,y:h}))}}if(!o.length)return null;if(o.length>1){const u=i.type==="source"?"target":"source";return o.find(c=>c.type===u)??o[0]}return o[0]}function Ll(e,t,n,i,o,r=!1){var u,c,d;const s=i.get(e);if(!s)return null;const l=o==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...((c=s.internals.handleBounds)==null?void 0:c.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],a=(n?l==null?void 0:l.find(f=>f.id===n):l==null?void 0:l[0])??null;return a&&r?{...a,...vn(s,a,a.position,!0)}:a}function Vl(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function rd(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Rl=()=>!0;function ld(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:r,isTarget:s,domNode:l,nodeLookup:a,lib:u,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:h,onConnectStart:y,onConnect:_,onConnectEnd:v,isValidConnection:m=Rl,onReconnectEnd:b,updateConnection:p,getTransform:k,getFromHandle:E,autoPanSpeed:A}){const M=Af(e.target);let S=0,T;const{x:P,y:H}=gt(e),B=M==null?void 0:M.elementFromPoint(P,H),R=Vl(r,B),w=l==null?void 0:l.getBoundingClientRect();if(!w||!R)return;const N=Ll(o,R,i,a,t);if(!N)return;let C=gt(e,w),L=!1,X=null,z=!1,I=null;function q(){if(!c||!w)return;const[J,ie]=El(C,w,A);f({x:J,y:ie}),S=requestAnimationFrame(q)}const U={...N,nodeId:o,type:R,position:N.position},G=a.get(o),ee={inProgress:!0,isValid:null,from:vn(G,U,ue.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:G,to:C,toHandle:null,toPosition:Xo[U.position],toNode:null};p(ee);let ne=ee;y==null||y(e,{nodeId:o,handleId:i,handleType:R});function de(J){if(!E()||!U){me(J);return}const ie=k();C=gt(J,w),T=od(Mn(C,ie,!1,[1,1]),n,a,U),L||(q(),L=!0);const _e=Xl(J,{handle:T,connectionMode:t,fromNodeId:o,fromHandleId:i,fromType:s?"target":"source",isValidConnection:m,doc:M,lib:u,flowId:d,nodeLookup:a});I=_e.handleDomNode,X=_e.connection,z=rd(!!T,_e.isValid);const be={...ne,isValid:z,to:T&&z?li({x:T.x,y:T.y},ie):C,toHandle:_e.toHandle,toPosition:z&&_e.toHandle?_e.toHandle.position:Xo[U.position],toNode:_e.toHandle?a.get(_e.toHandle.nodeId):null};z&&T&&ne.toHandle&&be.toHandle&&ne.toHandle.type===be.toHandle.type&&ne.toHandle.nodeId===be.toHandle.nodeId&&ne.toHandle.id===be.toHandle.id&&ne.to.x===be.to.x&&ne.to.y===be.to.y||(p(be),ne=be)}function me(J){(T||I)&&X&&z&&(_==null||_(X));const{inProgress:ie,..._e}=ne,be={..._e,toPosition:ne.toHandle?ne.toPosition:null};v==null||v(J,be),r&&(b==null||b(J,be)),h(),cancelAnimationFrame(S),L=!1,z=!1,X=null,I=null,M.removeEventListener("mousemove",de),M.removeEventListener("mouseup",me),M.removeEventListener("touchmove",de),M.removeEventListener("touchend",me)}M.addEventListener("mousemove",de),M.addEventListener("mouseup",me),M.addEventListener("touchmove",de),M.addEventListener("touchend",me)}function Xl(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:r,doc:s,lib:l,flowId:a,isValidConnection:u=Rl,nodeLookup:c}){const d=r==="target",f=t?s.querySelector(`.${l}-flow__handle[data-id="${a}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y}=gt(e),_=s.elementFromPoint(h,y),v=_!=null&&_.classList.contains(`${l}-flow__handle`)?_:f,m={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const b=Vl(void 0,v),p=v.getAttribute("data-nodeid"),k=v.getAttribute("data-handleid"),E=v.classList.contains("connectable"),A=v.classList.contains("connectableend");if(!p||!b)return m;const M={source:d?p:i,sourceHandle:d?k:o,target:d?i:p,targetHandle:d?o:k};m.connection=M;const T=E&&A&&(n===At.Strict?d&&b==="source"||!d&&b==="target":p!==i||k!==o);m.isValid=T&&u(M),m.toHandle=Ll(p,b,k,c,n,!1)}return m}const sd={onPointerDown:ld,isValid:Xl},ad=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,bi=e=>({x:e.x,y:e.y,zoom:e.k}),zi=({x:e,y:t,zoom:n})=>gi.translate(e,t).scale(n),Zt=(e,t)=>e.target.closest(`.${t}`),Yl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Di=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},Wl=e=>{const t=e.ctrlKey&&si()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function ud({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:r,zoomOnPinch:s,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:u}){return c=>{if(Zt(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&s){const v=st(c),m=Wl(c),b=d*Math.pow(2,m);i.scaleTo(n,b,v,c);return}const f=c.deltaMode===1?20:1;let h=o===ut.Vertical?0:c.deltaX*f,y=o===ut.Horizontal?0:c.deltaY*f;!si()&&c.shiftKey&&o!==ut.Vertical&&(h=c.deltaY*f,y=0),i.translateBy(n,-(h/d)*r,-(y/d)*r,{internal:!0});const _=bi(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l==null||l(c,_)),e.isPanScrolling&&(a==null||a(c,_),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,_),e.isPanScrolling=!1},150))}}function cd({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,o){const r=i.type==="wheel",s=!t&&r&&!i.ctrlKey,l=Zt(i,e);if(i.ctrlKey&&r&&l&&i.preventDefault(),s||l)return null;i.preventDefault(),n.call(this,i,o)}}function fd({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var r,s,l;if((r=i.sourceEvent)!=null&&r.internal)return;const o=bi(i.transform);e.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,o))}}function dd({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return r=>{var s,l;e.usedRightMouseButton=!!(n&&Yl(t,e.mouseButton??0)),(s=r.sourceEvent)!=null&&s.sync||i([r.transform.x,r.transform.y,r.transform.k]),o&&!((l=r.sourceEvent)!=null&&l.internal)&&(o==null||o(r.sourceEvent,bi(r.transform)))}}function hd({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:r}){return s=>{var l;if(!((l=s.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,r&&Yl(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&r(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),o&&ad(e.prevViewport,s.transform))){const a=bi(s.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,a)},n?150:0)}}}function gd({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:r,userSelectionActive:s,noWheelClassName:l,noPanClassName:a,lib:u}){return c=>{var y;const d=e||t,f=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(Zt(c,`${u}-flow__node`)||Zt(c,`${u}-flow__edge`)))return!0;if(!i&&!d&&!o&&!r&&!n||s||Zt(c,l)&&c.type==="wheel"||Zt(c,a)&&(c.type!=="wheel"||o&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((y=c.touches)==null?void 0:y.length)>1)return c.preventDefault(),!1;if(!d&&!o&&!f&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&c.type==="mousedown")return!1;const h=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&h}}function md({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:o,viewport:r,onPanZoom:s,onPanZoomStart:l,onPanZoomEnd:a,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=pf().clickDistance(!nt(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(o),h=et(e).call(f);p({x:r.x,y:r.y,zoom:on(r.zoom,t,n)},[[0,0],[d.width,d.height]],o);const y=h.on("wheel.zoom"),_=h.on("dblclick.zoom");f.wheelDelta(Wl);function v(B,R){return h?new Promise(w=>{f==null||f.transform(Di(h,R==null?void 0:R.duration,()=>w(!0)),B)}):Promise.resolve(!1)}function m({noWheelClassName:B,noPanClassName:R,onPaneContextMenu:w,userSelectionActive:N,panOnScroll:C,panOnDrag:L,panOnScrollMode:X,panOnScrollSpeed:z,preventScrolling:I,zoomOnPinch:q,zoomOnScroll:U,zoomOnDoubleClick:G,zoomActivationKeyPressed:V,lib:ee,onTransformChange:ne}){N&&!c.isZoomingOrPanning&&b();const me=C&&!V&&!N?ud({zoomPanValues:c,noWheelClassName:B,d3Selection:h,d3Zoom:f,panOnScrollMode:X,panOnScrollSpeed:z,zoomOnPinch:q,onPanZoomStart:l,onPanZoom:s,onPanZoomEnd:a}):cd({noWheelClassName:B,preventScrolling:I,d3ZoomHandler:y});if(h.on("wheel.zoom",me,{passive:!1}),!N){const ie=fd({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:l});f.on("start",ie);const _e=dd({zoomPanValues:c,panOnDrag:L,onPaneContextMenu:!!w,onPanZoom:s,onTransformChange:ne});f.on("zoom",_e);const be=hd({zoomPanValues:c,panOnDrag:L,panOnScroll:C,onPaneContextMenu:w,onPanZoomEnd:a,onDraggingChange:u});f.on("end",be)}const J=gd({zoomActivationKeyPressed:V,panOnDrag:L,zoomOnScroll:U,panOnScroll:C,zoomOnDoubleClick:G,zoomOnPinch:q,userSelectionActive:N,noPanClassName:R,noWheelClassName:B,lib:ee});f.filter(J),G?h.on("dblclick.zoom",_):h.on("dblclick.zoom",null)}function b(){f.on("zoom",null)}async function p(B,R,w){const N=zi(B),C=f==null?void 0:f.constrain()(N,R,w);return C&&await v(C),new Promise(L=>L(C))}async function k(B,R){const w=zi(B);return await v(w,R),new Promise(N=>N(w))}function E(B){if(h){const R=zi(B),w=h.property("__zoom");(w.k!==B.zoom||w.x!==B.x||w.y!==B.y)&&(f==null||f.transform(h,R,null,{sync:!0}))}}function A(){const B=h?vl(h.node()):{x:0,y:0,k:1};return{x:B.x,y:B.y,zoom:B.k}}function M(B,R){return h?new Promise(w=>{f==null||f.scaleTo(Di(h,R==null?void 0:R.duration,()=>w(!0)),B)}):Promise.resolve(!1)}function S(B,R){return h?new Promise(w=>{f==null||f.scaleBy(Di(h,R==null?void 0:R.duration,()=>w(!0)),B)}):Promise.resolve(!1)}function T(B){f==null||f.scaleExtent(B)}function P(B){f==null||f.translateExtent(B)}function H(B){const R=!nt(B)||B<0?0:B;f==null||f.clickDistance(R)}return{update:m,destroy:b,setViewport:k,setViewportConstrained:p,getViewport:A,scaleTo:M,scaleBy:S,setScaleExtent:T,setTranslateExtent:P,syncViewport:E,setClickDistance:H}}var er;(function(e){e.Line="line",e.Handle="handle"})(er||(er={}));function yd(e){let t,n,i,o,r,s;const l=e[45].default,a=Ue(l,e,e[44],null);return{c(){t=x("div"),a&&a.c(),g(t,"data-handleid",e[6]),g(t,"data-nodeid",e[14]),g(t,"data-handlepos",e[2]),g(t,"data-id",n=e[13]+"-"+e[14]+"-"+(e[0]||null)+"-"+e[1]),g(t,"class",i=Oe(["svelte-flow__handle",`svelte-flow__handle-${e[2]}`,"nodrag","nopan",e[2],e[4]])),g(t,"style",e[3]),g(t,"role","button"),g(t,"tabindex","-1"),ae(t,"valid",e[7]),ae(t,"connectingto",e[5]),ae(t,"connectingfrom",e[9]),ae(t,"source",!e[11]),ae(t,"target",e[11]),ae(t,"connectablestart",e[12]),ae(t,"connectableend",e[12]),ae(t,"connectable",e[12]),ae(t,"connectionindicator",e[12]&&(!e[10]||e[8]))},m(u,c){F(u,t,c),a&&a.m(t,null),o=!0,r||(s=[fe(t,"mousedown",e[32]),fe(t,"touchstart",e[32])],r=!0)},p(u,c){a&&a.p&&(!o||c[1]&8192)&&Je(a,l,u,u[44],o?Qe(l,u[44],c,null):xe(u[44]),null),(!o||c[0]&64)&&g(t,"data-handleid",u[6]),(!o||c[0]&4)&&g(t,"data-handlepos",u[2]),(!o||c[0]&8195&&n!==(n=u[13]+"-"+u[14]+"-"+(u[0]||null)+"-"+u[1]))&&g(t,"data-id",n),(!o||c[0]&20&&i!==(i=Oe(["svelte-flow__handle",`svelte-flow__handle-${u[2]}`,"nodrag","nopan",u[2],u[4]])))&&g(t,"class",i),(!o||c[0]&8)&&g(t,"style",u[3]),(!o||c[0]&148)&&ae(t,"valid",u[7]),(!o||c[0]&52)&&ae(t,"connectingto",u[5]),(!o||c[0]&532)&&ae(t,"connectingfrom",u[9]),(!o||c[0]&2068)&&ae(t,"source",!u[11]),(!o||c[0]&2068)&&ae(t,"target",u[11]),(!o||c[0]&4116)&&ae(t,"connectablestart",u[12]),(!o||c[0]&4116)&&ae(t,"connectableend",u[12]),(!o||c[0]&4116)&&ae(t,"connectable",u[12]),(!o||c[0]&5396)&&ae(t,"connectionindicator",u[12]&&(!u[10]||u[8]))},i(u){o||(j(a,u),o=!0)},o(u){Q(a,u),o=!1},d(u){u&&W(t),a&&a.d(u),r=!1,Ie(s)}}}function _d(e,t,n){let i,o,r,s,l,a,u,c,d,f,h,y,_,v,m,b,p,k,E,A,M,S,T,P,H,{$$slots:B={},$$scope:R}=t,{id:w=void 0}=t,{type:N="source"}=t,{position:C=ue.Top}=t,{style:L=void 0}=t,{isValidConnection:X=void 0}=t,{onconnect:z=void 0}=t,{ondisconnect:I=void 0}=t,{isConnectable:q=void 0}=t,{class:U=void 0}=t;const G=mn("svelteflow__node_id"),V=mn("svelteflow__node_connectable");$(e,V,D=>n(43,H=D));const ee=Ae(),{connectionMode:ne,domNode:de,nodeLookup:me,connectionRadius:J,viewport:ie,isValidConnection:_e,lib:be,addEdge:ve,onedgecreate:Z,panBy:Ne,cancelConnection:Re,updateConnection:qe,autoPanOnConnect:Ce,edges:ot,connectionLookup:Ct,onconnect:St,onconnectstart:yt,onconnectend:_t,flowId:bt,connection:pt}=ee;$(e,ne,D=>n(40,f=D)),$(e,de,D=>n(55,T=D)),$(e,me,D=>n(54,S=D)),$(e,J,D=>n(56,P=D)),$(e,ie,D=>n(46,_=D)),$(e,_e,D=>n(51,k=D)),$(e,be,D=>n(53,M=D)),$(e,Z,D=>n(50,p=D)),$(e,Ce,D=>n(52,A=D)),$(e,ot,D=>n(42,y=D)),$(e,Ct,D=>n(41,h=D)),$(e,St,D=>n(49,b=D)),$(e,yt,D=>n(48,m=D)),$(e,_t,D=>n(47,v=D)),$(e,bt,D=>n(13,E=D)),$(e,pt,D=>n(39,d=D));function Nt(D){const je=Ml(D);(je&&D.button===0||!je)&&sd.onPointerDown(D,{handleId:r,nodeId:G,isTarget:i,connectionRadius:P,domNode:T,nodeLookup:S,connectionMode:f,lib:M,autoPanOnConnect:A,flowId:E,isValidConnection:X??k,updateConnection:qe,cancelConnection:Re,panBy:Ne,onConnect:Te=>{const Me=p?p(Te):Te;Me&&(ve(Me),b==null||b(Te))},onConnectStart:(Te,Me)=>{m==null||m(Te,{nodeId:Me.nodeId,handleId:Me.handleId,handleType:Me.handleType})},onConnectEnd:(Te,Me)=>{v==null||v(Te,Me)},getTransform:()=>[_.x,_.y,_.zoom],getFromHandle:()=>d.fromHandle})}let $e=null,rt;return e.$$set=D=>{"id"in D&&n(0,w=D.id),"type"in D&&n(1,N=D.type),"position"in D&&n(2,C=D.position),"style"in D&&n(3,L=D.style),"isValidConnection"in D&&n(33,X=D.isValidConnection),"onconnect"in D&&n(34,z=D.onconnect),"ondisconnect"in D&&n(35,I=D.ondisconnect),"isConnectable"in D&&n(36,q=D.isConnectable),"class"in D&&n(4,U=D.class),"$$scope"in D&&n(44,R=D.$$scope)},e.$$.update=()=>{var D,je,Te,Me,Lt,Vt,Rt,Xt,wt;if(e.$$.dirty[0]&2&&n(11,i=N==="target"),e.$$.dirty[1]&4128&&n(12,o=q!==void 0?q:H),e.$$.dirty[0]&1&&n(6,r=w||null),e.$$.dirty[0]&3|e.$$.dirty[1]&3096&&(z||I)&&n(38,rt=h.get(`${G}-${N}${w?`-${w}`:""}`)),e.$$.dirty[1]&216){if($e&&!wf(rt,$e)){const Et=rt??new Map;Yo($e,Et,I),Yo(Et,$e,z)}n(37,$e=rt??new Map)}e.$$.dirty[1]&256&&n(10,s=!!d.fromHandle),e.$$.dirty[0]&66|e.$$.dirty[1]&256&&n(9,l=((D=d.fromHandle)==null?void 0:D.nodeId)===G&&((je=d.fromHandle)==null?void 0:je.type)===N&&((Te=d.fromHandle)==null?void 0:Te.id)===r),e.$$.dirty[0]&66|e.$$.dirty[1]&256&&n(5,a=((Me=d.toHandle)==null?void 0:Me.nodeId)===G&&((Lt=d.toHandle)==null?void 0:Lt.type)===N&&((Vt=d.toHandle)==null?void 0:Vt.id)===r),e.$$.dirty[0]&66|e.$$.dirty[1]&768&&n(8,u=f===At.Strict?((Rt=d.fromHandle)==null?void 0:Rt.type)!==N:G!==((Xt=d.fromHandle)==null?void 0:Xt.nodeId)||r!==((wt=d.fromHandle)==null?void 0:wt.id)),e.$$.dirty[0]&32|e.$$.dirty[1]&256&&n(7,c=a&&d.isValid)},[w,N,C,L,U,a,r,c,u,l,s,i,o,E,G,V,ne,de,me,J,ie,_e,be,Z,Ce,ot,Ct,St,yt,_t,bt,pt,Nt,X,z,I,q,$e,rt,d,f,h,y,H,R,B]}class sn extends ge{constructor(t){super(),he(this,t,_d,yd,ye,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}function bd(e){var a;let t,n,i=((a=e[0])==null?void 0:a.label)+"",o,r,s,l;return t=new sn({props:{type:"target",position:e[1]??ue.Top}}),s=new sn({props:{type:"source",position:e[2]??ue.Bottom}}),{c(){se(t.$$.fragment),n=ce(),o=Pe(i),r=ce(),se(s.$$.fragment)},m(u,c){re(t,u,c),F(u,n,c),F(u,o,c),F(u,r,c),re(s,u,c),l=!0},p(u,[c]){var h;const d={};c&2&&(d.position=u[1]??ue.Top),t.$set(d),(!l||c&1)&&i!==(i=((h=u[0])==null?void 0:h.label)+"")&&Ve(o,i);const f={};c&4&&(f.position=u[2]??ue.Bottom),s.$set(f)},i(u){l||(j(t.$$.fragment,u),j(s.$$.fragment,u),l=!0)},o(u){Q(t.$$.fragment,u),Q(s.$$.fragment,u),l=!1},d(u){u&&(W(n),W(o),W(r)),le(t,u),le(s,u)}}}function pd(e,t,n){const i=["data","targetPosition","sourcePosition"];De(t,i);let{data:o={label:"Node"}}=t,{targetPosition:r=void 0}=t,{sourcePosition:s=void 0}=t;return e.$$set=l=>{t=Ee(Ee({},t),ct(l)),n(3,De(t,i)),"data"in l&&n(0,o=l.data),"targetPosition"in l&&n(1,r=l.targetPosition),"sourcePosition"in l&&n(2,s=l.sourcePosition)},[o,r,s]}class Bl extends ge{constructor(t){super(),he(this,t,pd,bd,ye,{data:0,targetPosition:1,sourcePosition:2})}}function wd(e){var s;let t=((s=e[0])==null?void 0:s.label)+"",n,i,o,r;return o=new sn({props:{type:"source",position:e[1]??ue.Bottom}}),{c(){n=Pe(t),i=ce(),se(o.$$.fragment)},m(l,a){F(l,n,a),F(l,i,a),re(o,l,a),r=!0},p(l,[a]){var c;(!r||a&1)&&t!==(t=((c=l[0])==null?void 0:c.label)+"")&&Ve(n,t);const u={};a&2&&(u.position=l[1]??ue.Bottom),o.$set(u)},i(l){r||(j(o.$$.fragment,l),r=!0)},o(l){Q(o.$$.fragment,l),r=!1},d(l){l&&(W(n),W(i)),le(o,l)}}}function kd(e,t,n){const i=["data","sourcePosition"];De(t,i);let{data:o={label:"Node"}}=t,{sourcePosition:r=void 0}=t;return e.$$set=s=>{t=Ee(Ee({},t),ct(s)),n(2,De(t,i)),"data"in s&&n(0,o=s.data),"sourcePosition"in s&&n(1,r=s.sourcePosition)},[o,r]}class vd extends ge{constructor(t){super(),he(this,t,kd,wd,ye,{data:0,sourcePosition:1})}}function Cd(e){var s;let t=((s=e[0])==null?void 0:s.label)+"",n,i,o,r;return o=new sn({props:{type:"target",position:e[1]??ue.Top}}),{c(){n=Pe(t),i=ce(),se(o.$$.fragment)},m(l,a){F(l,n,a),F(l,i,a),re(o,l,a),r=!0},p(l,[a]){var c;(!r||a&1)&&t!==(t=((c=l[0])==null?void 0:c.label)+"")&&Ve(n,t);const u={};a&2&&(u.position=l[1]??ue.Top),o.$set(u)},i(l){r||(j(o.$$.fragment,l),r=!0)},o(l){Q(o.$$.fragment,l),r=!1},d(l){l&&(W(n),W(i)),le(o,l)}}}function Sd(e,t,n){const i=["data","targetPosition"];De(t,i);let{data:o={label:"Node"}}=t,{targetPosition:r=void 0}=t;return e.$$set=s=>{t=Ee(Ee({},t),ct(s)),n(2,De(t,i)),"data"in s&&n(0,o=s.data),"targetPosition"in s&&n(1,r=s.targetPosition)},[o,r]}class Nd extends ge{constructor(t){super(),he(this,t,Sd,Cd,ye,{data:0,targetPosition:1})}}function Ed(e,t,n){const i=[];return De(t,i),e.$$set=o=>{t=Ee(Ee({},t),ct(o)),n(0,De(t,i))},[]}class Pd extends ge{constructor(t){super(),he(this,t,Ed,null,ye,{})}}function tr(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function Md(e,{target:t,domNode:n}){return tr(e,n,t),{async update({target:i,domNode:o}){tr(e,o,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}function Od(e){let t,n,i,o,r;const s=e[3].default,l=Ue(s,e,e[2],null);return{c(){t=x("div"),l&&l.c()},m(a,u){F(a,t,u),l&&l.m(t,null),i=!0,o||(r=Ke(n=Md.call(null,t,{target:".svelte-flow__edgelabel-renderer",domNode:e[0]})),o=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&Je(l,s,a,a[2],i?Qe(s,a[2],u,null):xe(a[2]),null),n&&Se(n.update)&&u&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){i||(j(l,a),i=!0)},o(a){Q(l,a),i=!1},d(a){a&&W(t),l&&l.d(a),o=!1,r()}}}function Td(e,t,n){let i,{$$slots:o={},$$scope:r}=t;const{domNode:s}=Ae();return $(e,s,l=>n(0,i=l)),e.$$set=l=>{"$$scope"in l&&n(2,r=l.$$scope)},[i,s,r,o]}class zd extends ge{constructor(t){super(),he(this,t,Td,Od,ye,{})}}function Kl(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:r,elementsSelectable:s}=Ae();return l=>{const a=Y(e).get(l);if(!a){console.warn("012",nn.error012(l));return}(a.selectable||Y(s)&&typeof a.selectable>"u")&&(t.set(null),n.set(null),a.selected?a.selected&&Y(i)&&r({nodes:[],edges:[a]}):o([l]))}}function Dd(e){let t,n,i=`translate(-50%, -50%) translate(${e[1]}px,${e[2]}px)`,o,r,s;const l=e[5].default,a=Ue(l,e,e[7],null);return{c(){t=x("div"),a&&a.c(),g(t,"class","svelte-flow__edge-label"),g(t,"style",n="pointer-events: all;"+e[0]),g(t,"role","button"),g(t,"tabindex","-1"),pe(t,"transform",i)},m(u,c){F(u,t,c),a&&a.m(t,null),o=!0,r||(s=[fe(t,"keyup",Id),fe(t,"click",e[6])],r=!0)},p(u,c){a&&a.p&&(!o||c&128)&&Je(a,l,u,u[7],o?Qe(l,u[7],c,null):xe(u[7]),null),(!o||c&1&&n!==(n="pointer-events: all;"+u[0]))&&g(t,"style",n);const d=c&1;(c&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||d)&&pe(t,"transform",i)},i(u){o||(j(a,u),o=!0)},o(u){Q(a,u),o=!1},d(u){u&&W(t),a&&a.d(u),r=!1,Ie(s)}}}function Ad(e){let t,n;return t=new zd({props:{$$slots:{default:[Dd]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,[o]){const r={};o&135&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}const Id=()=>{};function Hd(e,t,n){let{$$slots:i={},$$scope:o}=t,{style:r=void 0}=t,{x:s=void 0}=t,{y:l=void 0}=t;const a=Kl(),u=mn("svelteflow__edge_id"),c=()=>{u&&a(u)};return e.$$set=d=>{"style"in d&&n(0,r=d.style),"x"in d&&n(1,s=d.x),"y"in d&&n(2,l=d.y),"$$scope"in d&&n(7,o=d.$$scope)},[r,s,l,a,u,i,c,o]}class Ld extends ge{constructor(t){super(),he(this,t,Hd,Ad,ye,{style:0,x:1,y:2})}}function Vd(e){let t;return{c(){t=oe("path"),g(t,"d",e[1]),g(t,"stroke-opacity",0),g(t,"stroke-width",e[10]),g(t,"fill","none"),g(t,"class","svelte-flow__edge-interaction")},m(n,i){F(n,t,i)},p(n,i){i&2&&g(t,"d",n[1])},d(n){n&&W(t)}}}function nr(e){let t,n;return t=new Ld({props:{x:e[3],y:e[4],style:e[5],$$slots:{default:[Rd]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,o){const r={};o&8&&(r.x=i[3]),o&16&&(r.y=i[4]),o&32&&(r.style=i[5]),o&4100&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function Rd(e){let t;return{c(){t=Pe(e[2])},m(n,i){F(n,t,i)},p(n,i){i&4&&Ve(t,n[2])},d(n){n&&W(t)}}}function Xd(e){let t,n,i,o,r,s,l=e[10]&&Vd(e),a=e[2]&&nr(e);return{c(){t=oe("path"),i=ce(),l&&l.c(),o=ce(),a&&a.c(),r=Be(),g(t,"id",e[0]),g(t,"d",e[1]),g(t,"class",n=Oe(["svelte-flow__edge-path",e[9]])),g(t,"marker-start",e[6]),g(t,"marker-end",e[7]),g(t,"fill","none"),g(t,"style",e[8])},m(u,c){F(u,t,c),F(u,i,c),l&&l.m(u,c),F(u,o,c),a&&a.m(u,c),F(u,r,c),s=!0},p(u,[c]){(!s||c&1)&&g(t,"id",u[0]),(!s||c&2)&&g(t,"d",u[1]),(!s||c&512&&n!==(n=Oe(["svelte-flow__edge-path",u[9]])))&&g(t,"class",n),(!s||c&64)&&g(t,"marker-start",u[6]),(!s||c&128)&&g(t,"marker-end",u[7]),(!s||c&256)&&g(t,"style",u[8]),u[10]&&l.p(u,c),u[2]?a?(a.p(u,c),c&4&&j(a,1)):(a=nr(u),a.c(),j(a,1),a.m(r.parentNode,r)):a&&(Xe(),Q(a,1,1,()=>{a=null}),Ye())},i(u){s||(j(a),s=!0)},o(u){Q(a),s=!1},d(u){u&&(W(t),W(i),W(o),W(r)),l&&l.d(u),a&&a.d(u)}}}function Yd(e,t,n){let{id:i=void 0}=t,{path:o}=t,{label:r=void 0}=t,{labelX:s=void 0}=t,{labelY:l=void 0}=t,{labelStyle:a=void 0}=t,{markerStart:u=void 0}=t,{markerEnd:c=void 0}=t,{style:d=void 0}=t,{interactionWidth:f=20}=t,{class:h=void 0}=t,y=f===void 0?20:f;return e.$$set=_=>{"id"in _&&n(0,i=_.id),"path"in _&&n(1,o=_.path),"label"in _&&n(2,r=_.label),"labelX"in _&&n(3,s=_.labelX),"labelY"in _&&n(4,l=_.labelY),"labelStyle"in _&&n(5,a=_.labelStyle),"markerStart"in _&&n(6,u=_.markerStart),"markerEnd"in _&&n(7,c=_.markerEnd),"style"in _&&n(8,d=_.style),"interactionWidth"in _&&n(11,f=_.interactionWidth),"class"in _&&n(9,h=_.class)},[i,o,r,s,l,a,u,c,d,h,y,f]}class pi extends ge{constructor(t){super(),he(this,t,Yd,Xd,ye,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function Wd(e){let t,n;return t=new pi({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function Bd(e,t,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];De(t,s);let{label:l=void 0}=t,{labelStyle:a=void 0}=t,{style:u=void 0}=t,{markerStart:c=void 0}=t,{markerEnd:d=void 0}=t,{interactionWidth:f=void 0}=t,{sourceX:h}=t,{sourceY:y}=t,{sourcePosition:_}=t,{targetX:v}=t,{targetY:m}=t,{targetPosition:b}=t;return e.$$set=p=>{t=Ee(Ee({},t),ct(p)),n(15,De(t,s)),"label"in p&&n(0,l=p.label),"labelStyle"in p&&n(1,a=p.labelStyle),"style"in p&&n(2,u=p.style),"markerStart"in p&&n(3,c=p.markerStart),"markerEnd"in p&&n(4,d=p.markerEnd),"interactionWidth"in p&&n(5,f=p.interactionWidth),"sourceX"in p&&n(9,h=p.sourceX),"sourceY"in p&&n(10,y=p.sourceY),"sourcePosition"in p&&n(11,_=p.sourcePosition),"targetX"in p&&n(12,v=p.targetX),"targetY"in p&&n(13,m=p.targetY),"targetPosition"in p&&n(14,b=p.targetPosition)},e.$$.update=()=>{e.$$.dirty&32256&&n(8,[i,o,r]=Ol({sourceX:h,sourceY:y,targetX:v,targetY:m,sourcePosition:_,targetPosition:b}),i,(n(7,o),n(9,h),n(10,y),n(12,v),n(13,m),n(11,_),n(14,b)),(n(6,r),n(9,h),n(10,y),n(12,v),n(13,m),n(11,_),n(14,b)))},[l,a,u,c,d,f,r,o,i,h,y,_,v,m,b]}class Fl extends ge{constructor(t){super(),he(this,t,Bd,Wd,ye,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Kd(e){let t,n;return t=new pi({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function Fd(e,t,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];De(t,s);let{label:l=void 0}=t,{labelStyle:a=void 0}=t,{style:u=void 0}=t,{markerStart:c=void 0}=t,{markerEnd:d=void 0}=t,{interactionWidth:f=void 0}=t,{sourceX:h}=t,{sourceY:y}=t,{sourcePosition:_}=t,{targetX:v}=t,{targetY:m}=t,{targetPosition:b}=t;return e.$$set=p=>{t=Ee(Ee({},t),ct(p)),n(15,De(t,s)),"label"in p&&n(0,l=p.label),"labelStyle"in p&&n(1,a=p.labelStyle),"style"in p&&n(2,u=p.style),"markerStart"in p&&n(3,c=p.markerStart),"markerEnd"in p&&n(4,d=p.markerEnd),"interactionWidth"in p&&n(5,f=p.interactionWidth),"sourceX"in p&&n(9,h=p.sourceX),"sourceY"in p&&n(10,y=p.sourceY),"sourcePosition"in p&&n(11,_=p.sourcePosition),"targetX"in p&&n(12,v=p.targetX),"targetY"in p&&n(13,m=p.targetY),"targetPosition"in p&&n(14,b=p.targetPosition)},e.$$.update=()=>{e.$$.dirty&32256&&n(8,[i,o,r]=ai({sourceX:h,sourceY:y,targetX:v,targetY:m,sourcePosition:_,targetPosition:b}),i,(n(7,o),n(9,h),n(10,y),n(12,v),n(13,m),n(11,_),n(14,b)),(n(6,r),n(9,h),n(10,y),n(12,v),n(13,m),n(11,_),n(14,b)))},[l,a,u,c,d,f,r,o,i,h,y,_,v,m,b]}class qd extends ge{constructor(t){super(),he(this,t,Fd,Kd,ye,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Zd(e){let t,n;return t=new pi({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function jd(e,t,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];De(t,s);let{label:l=void 0}=t,{labelStyle:a=void 0}=t,{style:u=void 0}=t,{markerStart:c=void 0}=t,{markerEnd:d=void 0}=t,{interactionWidth:f=void 0}=t,{sourceX:h}=t,{sourceY:y}=t,{targetX:_}=t,{targetY:v}=t;return e.$$set=m=>{t=Ee(Ee({},t),ct(m)),n(13,De(t,s)),"label"in m&&n(0,l=m.label),"labelStyle"in m&&n(1,a=m.labelStyle),"style"in m&&n(2,u=m.style),"markerStart"in m&&n(3,c=m.markerStart),"markerEnd"in m&&n(4,d=m.markerEnd),"interactionWidth"in m&&n(5,f=m.interactionWidth),"sourceX"in m&&n(9,h=m.sourceX),"sourceY"in m&&n(10,y=m.sourceY),"targetX"in m&&n(11,_=m.targetX),"targetY"in m&&n(12,v=m.targetY)},e.$$.update=()=>{e.$$.dirty&7680&&n(8,[i,o,r]=zl({sourceX:h,sourceY:y,targetX:_,targetY:v}),i,(n(7,o),n(9,h),n(10,y),n(11,_),n(12,v)),(n(6,r),n(9,h),n(10,y),n(11,_),n(12,v)))},[l,a,u,c,d,f,r,o,i,h,y,_,v]}class Gd extends ge{constructor(t){super(),he(this,t,jd,Zd,ye,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function Ud(e){let t,n;return t=new pi({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function Qd(e,t,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];De(t,s);let{label:l=void 0}=t,{labelStyle:a=void 0}=t,{style:u=void 0}=t,{markerStart:c=void 0}=t,{markerEnd:d=void 0}=t,{interactionWidth:f=void 0}=t,{sourceX:h}=t,{sourceY:y}=t,{sourcePosition:_}=t,{targetX:v}=t,{targetY:m}=t,{targetPosition:b}=t;return e.$$set=p=>{t=Ee(Ee({},t),ct(p)),n(15,De(t,s)),"label"in p&&n(0,l=p.label),"labelStyle"in p&&n(1,a=p.labelStyle),"style"in p&&n(2,u=p.style),"markerStart"in p&&n(3,c=p.markerStart),"markerEnd"in p&&n(4,d=p.markerEnd),"interactionWidth"in p&&n(5,f=p.interactionWidth),"sourceX"in p&&n(9,h=p.sourceX),"sourceY"in p&&n(10,y=p.sourceY),"sourcePosition"in p&&n(11,_=p.sourcePosition),"targetX"in p&&n(12,v=p.targetX),"targetY"in p&&n(13,m=p.targetY),"targetPosition"in p&&n(14,b=p.targetPosition)},e.$$.update=()=>{e.$$.dirty&32256&&n(8,[i,o,r]=ai({sourceX:h,sourceY:y,targetX:v,targetY:m,sourcePosition:_,targetPosition:b,borderRadius:0}),i,(n(7,o),n(9,h),n(10,y),n(12,v),n(13,m),n(11,_),n(14,b)),(n(6,r),n(9,h),n(10,y),n(12,v),n(13,m),n(11,_),n(14,b)))},[l,a,u,c,d,f,r,o,i,h,y,_,v,m,b]}class Jd extends ge{constructor(t){super(),he(this,t,Qd,Ud,ye,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function xd(e,t){const n=e.set,i=t.set,o=Y(e),r=Y(t);let l=o.length===0&&r.length>0?r:o;e.set(l);const a=u=>{const c=n(u);return l=c,i(l),c};e.set=t.set=a,e.update=t.update=u=>a(u(l))}function $d(e,t){const n=e.set,i=t.set;let o=Y(t);e.set(o);const r=s=>{n(s),i(s),o=s};e.set=t.set=r,e.update=t.update=s=>r(s(o))}const e1=(e,t,n)=>{if(!n)return;const i=Y(e),o=t.set,r=n.set;let s=n?Y(n):{x:0,y:0,zoom:1};t.set(s),t.set=l=>(o(l),r(l),s=l,l),n.set=l=>(i==null||i.syncViewport(l),o(l),r(l),s=l,l),t.update=l=>{t.set(l(s))},n.update=l=>{n.set(l(s))}},t1=(e,t,n,i=[0,0],o=ni,r,s,l,a,u,c,d,f)=>{const{subscribe:h,set:y,update:_}=te([]);let v=e,m={},b=!0;const p=M=>{const S=Dl(M,t,n,{elevateNodesOnSelect:b,nodeOrigin:i,nodeExtent:o,defaults:m,checkEquality:!1});return Y(r)&&S&&Y(a)&&(Nf({nodes:t,width:Y(u),height:Y(c),panZoom:Y(a),minZoom:Y(d),maxZoom:Y(f)},Y(s)).then(P=>{var H;(H=Y(l))==null||H.resolve(P),l.set(null)}),r.set(!1),s.set(void 0)),v=M,y(v),v},k=M=>p(M(v)),E=M=>{m=M},A=M=>{b=M.elevateNodesOnSelect??b};return p(v),{subscribe:h,set:p,update:k,setDefaultOptions:E,setOptions:A}},n1=(e,t,n,i)=>{const{subscribe:o,set:r,update:s}=te([]);let l=e,a={};const u=f=>{const h=a?f.map(y=>({...a,...y})):f;Il(t,n,h),l=h,r(l)},c=f=>u(f(l)),d=f=>{a=f};return u(l),{subscribe:o,set:u,update:c,setDefaultOptions:d}},ql={input:vd,output:Nd,default:Bl,group:Pd},Zl={straight:Gd,smoothstep:qd,default:Fl,step:Jd},i1=({nodes:e=[],edges:t=[],width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s})=>{const l=new Map,a=new Map,u=new Map,c=new Map,d=r??[0,0],f=s??ni;Dl(e,l,a,{nodeExtent:f,nodeOrigin:d,elevateNodesOnSelect:!1,checkEquality:!1}),Il(u,c,t);let h={x:0,y:0,zoom:1};if(o&&n&&i){const A=mi(l,{filter:M=>!!((M.width||M.initialWidth)&&(M.height||M.initialHeight))});h=lo(A,n,i,.5,2,.1)}const y=te(!1),_=te(void 0),v=te(null),m=te(null),b=te(500),p=te(500),k=te(.5),E=te(2);return{flowId:te(null),nodes:t1(e,l,a,d,f,y,_,v,m,b,p,k,E),nodeLookup:Ge(l),parentLookup:Ge(a),edgeLookup:Ge(c),visibleNodes:Ge([]),edges:n1(t,u,c),visibleEdges:Ge([]),connectionLookup:Ge(u),width:b,height:p,minZoom:k,maxZoom:E,nodeOrigin:te(d),nodeDragThreshold:te(1),nodeExtent:te(f),translateExtent:te(ni),autoPanOnNodeDrag:te(!0),autoPanOnConnect:te(!0),fitViewQueued:y,fitViewOptions:_,fitViewResolver:v,panZoom:m,snapGrid:te(null),dragging:te(!1),selectionRect:te(null),selectionKeyPressed:te(!1),multiselectionKeyPressed:te(!1),deleteKeyPressed:te(!1),panActivationKeyPressed:te(!1),zoomActivationKeyPressed:te(!1),selectionRectMode:te(null),selectionMode:te(ii.Partial),nodeTypes:te(ql),edgeTypes:te(Zl),viewport:te(h),connectionMode:te(At.Strict),domNode:te(null),connection:Ge(Ki),connectionLineType:te(Jt.Bezier),connectionRadius:te(20),isValidConnection:te(()=>!0),nodesDraggable:te(!0),nodesConnectable:te(!0),elementsSelectable:te(!0),selectNodesOnDrag:te(!0),markers:Ge([]),defaultMarkerColor:te("#b1b1b7"),lib:Ge("svelte"),onlyRenderVisibleElements:te(!1),onerror:te(Mf),ondelete:te(void 0),onedgecreate:te(void 0),onconnect:te(void 0),onconnectstart:te(void 0),onconnectend:te(void 0),onbeforedelete:te(void 0),nodesInitialized:te(!1),edgesInitialized:te(!1),viewportInitialized:te(!1),initialized:Ge(!1)}};function o1(e){const t=Gt([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,o,r,s,l])=>o&&s&&l?n.filter(u=>{const c=i.get(u.source),d=i.get(u.target);return c&&d&&Rf({sourceNode:c,targetNode:d,width:s,height:l,transform:[r.x,r.y,r.zoom]})}):n);return Gt([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,o,r])=>n.reduce((l,a)=>{const u=i.get(a.source),c=i.get(a.target);if(!u||!c)return l;const d=qf({id:a.id,sourceNode:u,targetNode:c,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:r});return d&&l.push({...a,zIndex:Vf({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:c,elevateOnSelect:!1}),...d}),l},[]))}function r1(e){return Gt([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,o,r])=>{const s=[r.x,r.y,r.zoom];return n?Cl(t,{x:0,y:0,width:i,height:o},s,!0):Array.from(t.values())})}const wi=Symbol();function jl({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s}){const l=i1({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s});function a(N){l.nodeTypes.set({...ql,...N})}function u(N){l.edgeTypes.set({...Zl,...N})}function c(N){const C=Y(l.edges);l.edges.set(Wf(N,C))}const d=(N,C=!1)=>{var X;const L=Y(l.nodeLookup);for(const[z,I]of N){const q=(X=L.get(z))==null?void 0:X.internals.userNode;q&&(q.position=I.position,q.dragging=C)}l.nodes.update(z=>z)};function f(N){var I,q,U;const C=Y(l.nodeLookup),L=Y(l.parentLookup),{changes:X,updatedInternals:z}=xf(N,C,Y(l.parentLookup),Y(l.domNode),Y(l.nodeOrigin));if(z){Gf(C,L,{nodeOrigin:r,nodeExtent:s});for(const G of X){const V=(I=C.get(G.id))==null?void 0:I.internals.userNode;if(V)switch(G.type){case"dimensions":{const ee={...V.measured,...G.dimensions};G.setAttributes&&(V.width=((q=G.dimensions)==null?void 0:q.width)??V.width,V.height=((U=G.dimensions)==null?void 0:U.height)??V.height),V.measured=ee;break}case"position":V.position=G.position??V.position;break}}l.nodes.update(G=>G),Y(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function h(N){const C=Y(l.fitViewResolver)??Df();return l.fitViewQueued.set(!0),l.fitViewOptions.set(N),l.fitViewResolver.set(C),l.nodes.set(Y(l.nodes)),C.promise}function y(N,C){const L=Y(l.panZoom);return L?L.scaleBy(N,C):Promise.resolve(!1)}function _(N){return y(1.2,N)}function v(N){return y(1/1.2,N)}function m(N){const C=Y(l.panZoom);C&&(C.setScaleExtent([N,Y(l.maxZoom)]),l.minZoom.set(N))}function b(N){const C=Y(l.panZoom);C&&(C.setScaleExtent([Y(l.minZoom),N]),l.maxZoom.set(N))}function p(N){const C=Y(l.panZoom);C&&(C.setTranslateExtent(N),l.translateExtent.set(N))}function k(N){let C=!1;return N.forEach(L=>{L.selected&&(L.selected=!1,C=!0)}),C}function E(N){var C;(C=Y(l.panZoom))==null||C.setClickDistance(N)}function A(N){k((N==null?void 0:N.nodes)||Y(l.nodes))&&l.nodes.set(Y(l.nodes)),k((N==null?void 0:N.edges)||Y(l.edges))&&l.edges.set(Y(l.edges))}l.deleteKeyPressed.subscribe(async N=>{var C;if(N){const L=Y(l.nodes),X=Y(l.edges),z=L.filter(G=>G.selected),I=X.filter(G=>G.selected),{nodes:q,edges:U}=await Sl({nodesToRemove:z,edgesToRemove:I,nodes:L,edges:X,onBeforeDelete:Y(l.onbeforedelete)});(q.length||U.length)&&(l.nodes.update(G=>G.filter(V=>!q.some(ee=>ee.id===V.id))),l.edges.update(G=>G.filter(V=>!U.some(ee=>ee.id===V.id))),(C=Y(l.ondelete))==null||C({nodes:q,edges:U}))}});function M(N){const C=Y(l.multiselectionKeyPressed);l.nodes.update(L=>L.map(X=>{const z=N.includes(X.id),I=C&&X.selected||z;return X.selected=I,X})),C||l.edges.update(L=>L.map(X=>(X.selected=!1,X)))}function S(N){const C=Y(l.multiselectionKeyPressed);l.edges.update(L=>L.map(X=>{const z=N.includes(X.id),I=C&&X.selected||z;return X.selected=I,X})),C||l.nodes.update(L=>L.map(X=>(X.selected=!1,X)))}function T(N){var L;const C=(L=Y(l.nodes))==null?void 0:L.find(X=>X.id===N);if(!C){console.warn("012",nn.error012(N));return}l.selectionRect.set(null),l.selectionRectMode.set(null),C.selected?C.selected&&Y(l.multiselectionKeyPressed)&&A({nodes:[C],edges:[]}):M([N])}function P(N){const C=Y(l.viewport);return $f({delta:N,panZoom:Y(l.panZoom),transform:[C.x,C.y,C.zoom],translateExtent:Y(l.translateExtent),width:Y(l.width),height:Y(l.height)})}const H=te(Ki),B=N=>{H.set({...N})};function R(){H.set(Ki)}function w(){l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),A(),R()}return{...l,visibleEdges:o1(l),visibleNodes:r1(l),connection:Gt([H,l.viewport],([N,C])=>N.inProgress?{...N,to:Mn(N.to,[C.x,C.y,C.zoom])}:{...N}),markers:Gt([l.edges,l.defaultMarkerColor,l.flowId],([N,C,L])=>Zf(N,{defaultColor:C,id:L})),initialized:(()=>{let N=!1;const C=Y(l.nodes).length,L=Y(l.edges).length;return Gt([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([X,z,I])=>N||(C===0?N=I:L===0?N=I&&X:N=I&&X&&z,N))})(),syncNodeStores:N=>xd(l.nodes,N),syncEdgeStores:N=>$d(l.edges,N),syncViewport:N=>e1(l.panZoom,l.viewport,N),setNodeTypes:a,setEdgeTypes:u,addEdge:c,updateNodePositions:d,updateNodeInternals:f,zoomIn:_,zoomOut:v,fitView:N=>h(N),setMinZoom:m,setMaxZoom:b,setTranslateExtent:p,setPaneClickDistance:E,unselectNodesAndEdges:A,addSelectedNodes:M,addSelectedEdges:S,handleNodeSelection:T,panBy:P,updateConnection:B,cancelConnection:R,reset:w}}function Ae(){const e=mn(wi);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function l1({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s}){const l=jl({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s});return $t(wi,{getStore:()=>l}),l}function s1(e,t){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:r,viewport:s,dragging:l,translateExtent:a,paneClickDistance:u}=t,c=md({domNode:e,minZoom:i,maxZoom:o,translateExtent:a,viewport:r,paneClickDistance:u,onDraggingChange:l.set}),d=c.getViewport();return s.set(d),n.set(c),c.update(t),{update(f){c.update(f)}}}function a1(e){let t,n,i,o,r;const s=e[35].default,l=Ue(s,e,e[34],null);return{c(){t=x("div"),l&&l.c(),g(t,"class","svelte-flow__zoom svelte-4xkw84")},m(a,u){F(a,t,u),l&&l.m(t,null),i=!0,o||(r=Ke(n=s1.call(null,t,{viewport:e[18],minZoom:e[12],maxZoom:e[13],initialViewport:e[11],dragging:e[23],panZoom:e[19],onPanZoomStart:e[0],onPanZoom:e[1],onPanZoomEnd:e[2],zoomOnScroll:e[5],zoomOnDoubleClick:e[6],zoomOnPinch:e[7],panOnScroll:e[9],panOnDrag:e[10],panOnScrollSpeed:.5,panOnScrollMode:e[3]||ut.Free,zoomActivationKeyPressed:e[14],preventScrolling:typeof e[4]=="boolean"?e[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!e[15],translateExtent:e[16],lib:e[17],paneClickDistance:e[8],onTransformChange:e[29]})),o=!0)},p(a,u){l&&l.p&&(!i||u[1]&8)&&Je(l,s,a,a[34],i?Qe(s,a[34],u,null):xe(a[34]),null),n&&Se(n.update)&&u[0]&262143&&n.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||ut.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8],onTransformChange:a[29]})},i(a){i||(j(l,a),i=!0)},o(a){Q(l,a),i=!1},d(a){a&&W(t),l&&l.d(a),o=!1,r()}}}function u1(e,t,n){let i,o,r,s,l,a,u,c,d,f,h,{$$slots:y={},$$scope:_}=t,{initialViewport:v=void 0}=t,{onMoveStart:m=void 0}=t,{onMove:b=void 0}=t,{onMoveEnd:p=void 0}=t,{panOnScrollMode:k}=t,{preventScrolling:E}=t,{zoomOnScroll:A}=t,{zoomOnDoubleClick:M}=t,{zoomOnPinch:S}=t,{panOnDrag:T}=t,{panOnScroll:P}=t,{paneClickDistance:H}=t;const{viewport:B,panZoom:R,selectionRect:w,minZoom:N,maxZoom:C,dragging:L,translateExtent:X,lib:z,panActivationKeyPressed:I,zoomActivationKeyPressed:q,viewportInitialized:U}=Ae();$(e,w,V=>n(15,d=V)),$(e,N,V=>n(12,a=V)),$(e,C,V=>n(13,u=V)),$(e,X,V=>n(16,f=V)),$(e,z,V=>n(17,h=V)),$(e,I,V=>n(33,l=V)),$(e,q,V=>n(14,c=V)),$(e,U,V=>n(36,s=V));const G=V=>B.set({x:V[0],y:V[1],zoom:V[2]});return Cn(()=>{qn(U,s=!0,s)}),e.$$set=V=>{"initialViewport"in V&&n(30,v=V.initialViewport),"onMoveStart"in V&&n(0,m=V.onMoveStart),"onMove"in V&&n(1,b=V.onMove),"onMoveEnd"in V&&n(2,p=V.onMoveEnd),"panOnScrollMode"in V&&n(3,k=V.panOnScrollMode),"preventScrolling"in V&&n(4,E=V.preventScrolling),"zoomOnScroll"in V&&n(5,A=V.zoomOnScroll),"zoomOnDoubleClick"in V&&n(6,M=V.zoomOnDoubleClick),"zoomOnPinch"in V&&n(7,S=V.zoomOnPinch),"panOnDrag"in V&&n(31,T=V.panOnDrag),"panOnScroll"in V&&n(32,P=V.panOnScroll),"paneClickDistance"in V&&n(8,H=V.paneClickDistance),"$$scope"in V&&n(34,_=V.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&1073741824&&n(11,i=v||{x:0,y:0,zoom:1}),e.$$.dirty[1]&5&&n(10,o=l||T),e.$$.dirty[1]&6&&n(9,r=l||P)},[m,b,p,k,E,A,M,S,H,r,o,i,a,u,c,d,f,h,B,R,w,N,C,L,X,z,I,q,U,G,v,T,P,l,_,y]}class c1 extends ge{constructor(t){super(),he(this,t,u1,a1,ye,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}}function f1(e){let t,n,i,o;const r=e[29].default,s=Ue(r,e,e[28],null);return{c(){t=x("div"),s&&s.c(),g(t,"class","svelte-flow__pane svelte-1esy7hx"),ae(t,"draggable",e[0]===!0||Array.isArray(e[0])&&e[0].includes(0)),ae(t,"dragging",e[4]),ae(t,"selection",e[1])},m(l,a){F(l,t,a),s&&s.m(t,null),e[30](t),n=!0,i||(o=[fe(t,"click",function(){Se(e[3]?void 0:Xn(e[16],e[2]))&&(e[3]?void 0:Xn(e[16],e[2])).apply(this,arguments)}),fe(t,"pointerdown",function(){Se(e[3]?e[17]:void 0)&&(e[3]?e[17]:void 0).apply(this,arguments)}),fe(t,"pointermove",function(){Se(e[3]?e[18]:void 0)&&(e[3]?e[18]:void 0).apply(this,arguments)}),fe(t,"pointerup",function(){Se(e[3]?e[19]:void 0)&&(e[3]?e[19]:void 0).apply(this,arguments)}),fe(t,"contextmenu",function(){Se(Xn(e[20],e[2]))&&Xn(e[20],e[2]).apply(this,arguments)})],i=!0)},p(l,a){e=l,s&&s.p&&(!n||a[0]&268435456)&&Je(s,r,e,e[28],n?Qe(r,e[28],a,null):xe(e[28]),null),(!n||a[0]&1)&&ae(t,"draggable",e[0]===!0||Array.isArray(e[0])&&e[0].includes(0)),(!n||a[0]&16)&&ae(t,"dragging",e[4]),(!n||a[0]&2)&&ae(t,"selection",e[1])},i(l){n||(j(s,l),n=!0)},o(l){Q(s,l),n=!1},d(l){l&&W(t),s&&s.d(l),e[30](null),i=!1,Ie(o)}}}function Xn(e,t){return n=>{n.target===t&&(e==null||e(n))}}function ir(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}function d1(e,t,n){let i,o,r,s,l,a,u,c,d,f,h,y,_,v,{$$slots:m={},$$scope:b}=t,{panOnDrag:p=void 0}=t,{selectionOnDrag:k=void 0}=t;const E=Sn(),{nodes:A,nodeLookup:M,edges:S,viewport:T,dragging:P,elementsSelectable:H,selectionRect:B,selectionRectMode:R,selectionKeyPressed:w,selectionMode:N,panActivationKeyPressed:C,unselectNodesAndEdges:L,connection:X}=Ae();$(e,M,J=>n(37,d=J)),$(e,S,J=>n(34,a=J)),$(e,T,J=>n(36,c=J)),$(e,P,J=>n(4,v=J)),$(e,H,J=>n(26,y=J)),$(e,B,J=>n(25,f=J)),$(e,R,J=>n(24,l=J)),$(e,w,J=>n(23,s=J)),$(e,N,J=>n(35,u=J)),$(e,C,J=>n(27,_=J)),$(e,X,J=>n(38,h=J));let z,I=null,q=[],U=!1;function G(J){if(U||h.inProgress){U=!1;return}E("paneclick",{event:J}),L(),R.set(null)}function V(J){var be,ve;if(I=z.getBoundingClientRect(),!H||!o||J.button!==0||J.target!==z||!I)return;(ve=(be=J.target)==null?void 0:be.setPointerCapture)==null||ve.call(be,J.pointerId);const{x:ie,y:_e}=gt(J,I);L(),B.set({width:0,height:0,startX:ie,startY:_e,x:ie,y:_e})}function ee(J){if(!o||!I||!f)return;U=!0;const ie=gt(J,I),_e=f.startX??0,be=f.startY??0,ve={...f,x:ie.x<_e?ie.x:_e,y:ie.y<be?ie.y:be,width:Math.abs(ie.x-_e),height:Math.abs(ie.y-be)},Z=q.map(Ce=>Ce.id),Ne=Fi(q,a).map(Ce=>Ce.id);q=Cl(d,ve,[c.x,c.y,c.zoom],u===ii.Partial,!0);const Re=Fi(q,a).map(Ce=>Ce.id),qe=q.map(Ce=>Ce.id);(Z.length!==qe.length||qe.some(Ce=>!Z.includes(Ce)))&&A.update(Ce=>Ce.map(ir(qe))),(Ne.length!==Re.length||Re.some(Ce=>!Ne.includes(Ce)))&&S.update(Ce=>Ce.map(ir(Re))),R.set("user"),B.set(ve)}function ne(J){var ie,_e;J.button===0&&((_e=(ie=J.target)==null?void 0:ie.releasePointerCapture)==null||_e.call(ie,J.pointerId),!o&&l==="user"&&J.target===z&&(G==null||G(J)),B.set(null),q.length>0&&qn(R,l="nodes",l),s&&(U=!1))}const de=J=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){J.preventDefault();return}E("panecontextmenu",{event:J})};function me(J){zt[J?"unshift":"push"](()=>{z=J,n(2,z)})}return e.$$set=J=>{"panOnDrag"in J&&n(0,p=J.panOnDrag),"selectionOnDrag"in J&&n(21,k=J.selectionOnDrag),"$$scope"in J&&n(28,b=J.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&134217729&&n(22,i=_||p),e.$$.dirty[0]&48234496&&n(1,o=s||f||k&&i!==!0),e.$$.dirty[0]&83886082&&n(3,r=y&&(o||l==="user"))},[p,o,z,r,v,M,S,T,P,H,B,R,w,N,C,X,G,V,ee,ne,de,k,i,s,l,f,y,_,b,m,me]}class h1 extends ge{constructor(t){super(),he(this,t,d1,f1,ye,{panOnDrag:0,selectionOnDrag:21},null,[-1,-1])}}function g1(e){let t,n;const i=e[3].default,o=Ue(i,e,e[2],null);return{c(){t=x("div"),o&&o.c(),g(t,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),pe(t,"transform","translate("+e[0].x+"px, "+e[0].y+"px) scale("+e[0].zoom+")")},m(r,s){F(r,t,s),o&&o.m(t,null),n=!0},p(r,[s]){o&&o.p&&(!n||s&4)&&Je(o,i,r,r[2],n?Qe(i,r[2],s,null):xe(r[2]),null),(!n||s&1)&&pe(t,"transform","translate("+r[0].x+"px, "+r[0].y+"px) scale("+r[0].zoom+")")},i(r){n||(j(o,r),n=!0)},o(r){Q(o,r),n=!1},d(r){r&&W(t),o&&o.d(r)}}}function m1(e,t,n){let i,{$$slots:o={},$$scope:r}=t;const{viewport:s}=Ae();return $(e,s,l=>n(0,i=l)),e.$$set=l=>{"$$scope"in l&&n(2,r=l.$$scope)},[i,s,r,o]}class y1 extends ge{constructor(t){super(),he(this,t,m1,g1,ye,{})}}function Gl(e,t){const{store:n,onDrag:i,onDragStart:o,onDragStop:r,onNodeMouseDown:s}=t,l=td({onDrag:i,onDragStart:o,onDragStop:r,onNodeMouseDown:s,getStoreItems:()=>{const u=Y(n.snapGrid),c=Y(n.viewport);return{nodes:Y(n.nodes),nodeLookup:Y(n.nodeLookup),edges:Y(n.edges),nodeExtent:Y(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:Y(n.nodeOrigin),multiSelectionActive:Y(n.multiselectionKeyPressed),domNode:Y(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:Y(n.autoPanOnNodeDrag),nodesDraggable:Y(n.nodesDraggable),selectNodesOnDrag:Y(n.selectNodesOnDrag),nodeDragThreshold:Y(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,c){if(c.disabled){l.destroy();return}l.update({domNode:u,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return a(e,t),{update(u){a(e,u)},destroy(){l.destroy()}}}function _1({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:o,measuredHeight:r}){if(o===void 0&&r===void 0){const s=e??n,l=t??i;return{width:s?`width:${s}px;`:"",height:l?`height:${l}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}function or(e){let t,n,i,o,r,s=`translate(${e[12]}px, ${e[13]}px)`,l,a,u;var c=e[27];function d(f,h){return{props:{data:f[2],id:f[1],selected:f[3]??!1,selectable:f[5]??f[28]??!0,deletable:f[7]??!0,sourcePosition:f[14],targetPosition:f[15],zIndex:f[16],dragging:f[9],draggable:f[4]??f[29]??!0,dragHandle:f[19],parentId:f[21],type:f[25],isConnectable:f[30],positionAbsoluteX:f[12],positionAbsoluteY:f[13],width:f[17],height:f[18]}}}return c&&(n=Gn(c,d(e))),{c(){t=x("div"),n&&se(n.$$.fragment),g(t,"data-id",e[1]),g(t,"class",i=Oe(["svelte-flow__node",`svelte-flow__node-${e[25]}`,e[23]])),g(t,"style",o=(e[10]??"")+";"+e[26].width+e[26].height),ae(t,"dragging",e[9]),ae(t,"selected",e[3]),ae(t,"draggable",e[4]),ae(t,"connectable",e[6]),ae(t,"selectable",e[5]),ae(t,"nopan",e[4]),ae(t,"parent",e[11]),pe(t,"z-index",e[16]),pe(t,"transform",s),pe(t,"visibility",e[20]?"visible":"hidden")},m(f,h){F(f,t,h),n&&re(n,t,null),e[54](t),l=!0,a||(u=[Ke(r=Gl.call(null,t,{nodeId:e[1],isSelectable:e[5],disabled:!1,handleSelector:e[19],noDragClass:"nodrag",nodeClickDistance:e[22],onNodeMouseDown:e[33],onDrag:e[51],onDragStart:e[52],onDragStop:e[53],store:e[31]})),fe(t,"click",e[38]),fe(t,"mouseenter",e[55]),fe(t,"mouseleave",e[56]),fe(t,"mousemove",e[57]),fe(t,"contextmenu",e[58])],a=!0)},p(f,h){if(h[0]&134217728&&c!==(c=f[27])){if(n){Xe();const _=n;Q(_.$$.fragment,1,0,()=>{le(_,1)}),Ye()}c?(n=Gn(c,d(f)),se(n.$$.fragment),j(n.$$.fragment,1),re(n,t,null)):n=null}else if(c){const _={};h[0]&4&&(_.data=f[2]),h[0]&2&&(_.id=f[1]),h[0]&8&&(_.selected=f[3]??!1),h[0]&268435488&&(_.selectable=f[5]??f[28]??!0),h[0]&128&&(_.deletable=f[7]??!0),h[0]&16384&&(_.sourcePosition=f[14]),h[0]&32768&&(_.targetPosition=f[15]),h[0]&65536&&(_.zIndex=f[16]),h[0]&512&&(_.dragging=f[9]),h[0]&536870928&&(_.draggable=f[4]??f[29]??!0),h[0]&524288&&(_.dragHandle=f[19]),h[0]&2097152&&(_.parentId=f[21]),h[0]&33554432&&(_.type=f[25]),h[0]&1073741824&&(_.isConnectable=f[30]),h[0]&4096&&(_.positionAbsoluteX=f[12]),h[0]&8192&&(_.positionAbsoluteY=f[13]),h[0]&131072&&(_.width=f[17]),h[0]&262144&&(_.height=f[18]),n.$set(_)}(!l||h[0]&2)&&g(t,"data-id",f[1]),(!l||h[0]&41943040&&i!==(i=Oe(["svelte-flow__node",`svelte-flow__node-${f[25]}`,f[23]])))&&g(t,"class",i),(!l||h[0]&67109888&&o!==(o=(f[10]??"")+";"+f[26].width+f[26].height))&&g(t,"style",o),r&&Se(r.update)&&h[0]&4718626&&r.update.call(null,{nodeId:f[1],isSelectable:f[5],disabled:!1,handleSelector:f[19],noDragClass:"nodrag",nodeClickDistance:f[22],onNodeMouseDown:f[33],onDrag:f[51],onDragStart:f[52],onDragStop:f[53],store:f[31]}),(!l||h[0]&41943552)&&ae(t,"dragging",f[9]),(!l||h[0]&41943048)&&ae(t,"selected",f[3]),(!l||h[0]&41943056)&&ae(t,"draggable",f[4]),(!l||h[0]&41943104)&&ae(t,"connectable",f[6]),(!l||h[0]&41943072)&&ae(t,"selectable",f[5]),(!l||h[0]&41943056)&&ae(t,"nopan",f[4]),(!l||h[0]&41945088)&&ae(t,"parent",f[11]);const y=h[0]&67109888;(h[0]&67175424||y)&&pe(t,"z-index",f[16]),(h[0]&67122176&&s!==(s=`translate(${f[12]}px, ${f[13]}px)`)||y)&&pe(t,"transform",s),(h[0]&68158464||y)&&pe(t,"visibility",f[20]?"visible":"hidden")},i(f){l||(n&&j(n.$$.fragment,f),l=!0)},o(f){n&&Q(n.$$.fragment,f),l=!1},d(f){f&&W(t),n&&le(n),e[54](null),a=!1,Ie(u)}}}function b1(e){let t,n,i=!e[8]&&or(e);return{c(){i&&i.c(),t=Be()},m(o,r){i&&i.m(o,r),F(o,t,r),n=!0},p(o,r){o[8]?i&&(Xe(),Q(i,1,1,()=>{i=null}),Ye()):i?(i.p(o,r),r[0]&256&&j(i,1)):(i=or(o),i.c(),j(i,1),i.m(t.parentNode,t))},i(o){n||(j(i),n=!0)},o(o){Q(i),n=!1},d(o){o&&W(t),i&&i.d(o)}}}function p1(e,t,n){let i,o,r,s,l,a,u,c,{node:d}=t,{id:f}=t,{data:h={}}=t,{selected:y=!1}=t,{draggable:_=void 0}=t,{selectable:v=void 0}=t,{connectable:m=!0}=t,{deletable:b=!0}=t,{hidden:p=!1}=t,{dragging:k=!1}=t,{resizeObserver:E=null}=t,{style:A=void 0}=t,{type:M="default"}=t,{isParent:S=!1}=t,{positionX:T}=t,{positionY:P}=t,{sourcePosition:H=void 0}=t,{targetPosition:B=void 0}=t,{zIndex:R}=t,{measuredWidth:w=void 0}=t,{measuredHeight:N=void 0}=t,{initialWidth:C=void 0}=t,{initialHeight:L=void 0}=t,{width:X=void 0}=t,{height:z=void 0}=t,{dragHandle:I=void 0}=t,{initialized:q=!1}=t,{parentId:U=void 0}=t,{nodeClickDistance:G=void 0}=t,{class:V=""}=t;const ee=Ae(),{nodeTypes:ne,nodeDragThreshold:de,selectNodesOnDrag:me,handleNodeSelection:J,updateNodeInternals:ie,elementsSelectable:_e,nodesDraggable:be}=ee;$(e,ne,D=>n(50,l=D)),$(e,_e,D=>n(28,a=D)),$(e,be,D=>n(29,u=D));let ve,Z=null;const Ne=Sn(),Re=te(m);$(e,Re,D=>n(30,c=D));let qe,Ce,ot;$t("svelteflow__node_id",f),$t("svelteflow__node_connectable",Re),Gi(()=>{Z&&(E==null||E.unobserve(Z))});function Ct(D){v&&(!Y(me)||!_||Y(de)>0)&&J(f),Ne("nodeclick",{node:d.internals.userNode,event:D})}const St=(D,je,Te,Me)=>{Ne("nodedrag",{event:D,targetNode:Te,nodes:Me})},yt=(D,je,Te,Me)=>{Ne("nodedragstart",{event:D,targetNode:Te,nodes:Me})},_t=(D,je,Te,Me)=>{Ne("nodedragstop",{event:D,targetNode:Te,nodes:Me})};function bt(D){zt[D?"unshift":"push"](()=>{ve=D,n(24,ve)})}const pt=D=>Ne("nodemouseenter",{node:d,event:D}),Nt=D=>Ne("nodemouseleave",{node:d,event:D}),$e=D=>Ne("nodemousemove",{node:d,event:D}),rt=D=>Ne("nodecontextmenu",{node:d,event:D});return e.$$set=D=>{"node"in D&&n(0,d=D.node),"id"in D&&n(1,f=D.id),"data"in D&&n(2,h=D.data),"selected"in D&&n(3,y=D.selected),"draggable"in D&&n(4,_=D.draggable),"selectable"in D&&n(5,v=D.selectable),"connectable"in D&&n(6,m=D.connectable),"deletable"in D&&n(7,b=D.deletable),"hidden"in D&&n(8,p=D.hidden),"dragging"in D&&n(9,k=D.dragging),"resizeObserver"in D&&n(39,E=D.resizeObserver),"style"in D&&n(10,A=D.style),"type"in D&&n(40,M=D.type),"isParent"in D&&n(11,S=D.isParent),"positionX"in D&&n(12,T=D.positionX),"positionY"in D&&n(13,P=D.positionY),"sourcePosition"in D&&n(14,H=D.sourcePosition),"targetPosition"in D&&n(15,B=D.targetPosition),"zIndex"in D&&n(16,R=D.zIndex),"measuredWidth"in D&&n(41,w=D.measuredWidth),"measuredHeight"in D&&n(42,N=D.measuredHeight),"initialWidth"in D&&n(43,C=D.initialWidth),"initialHeight"in D&&n(44,L=D.initialHeight),"width"in D&&n(17,X=D.width),"height"in D&&n(18,z=D.height),"dragHandle"in D&&n(19,I=D.dragHandle),"initialized"in D&&n(20,q=D.initialized),"parentId"in D&&n(21,U=D.parentId),"nodeClickDistance"in D&&n(22,G=D.nodeClickDistance),"class"in D&&n(23,V=D.class)},e.$$.update=()=>{e.$$.dirty[1]&512&&n(25,i=M||"default"),e.$$.dirty[0]&33554432|e.$$.dirty[1]&524288&&n(49,o=!!l[i]),e.$$.dirty[0]&33554432|e.$$.dirty[1]&524288&&n(27,r=l[i]||Bl),e.$$.dirty[1]&262656&&(o||console.warn("003",nn.error003(M))),e.$$.dirty[0]&393216|e.$$.dirty[1]&15360&&n(26,s=_1({width:X,height:z,initialWidth:C,initialHeight:L,measuredWidth:w,measuredHeight:N})),e.$$.dirty[0]&64&&Re.set(!!m),e.$$.dirty[0]&50380802|e.$$.dirty[1]&229376&&((qe&&i!==qe||Ce&&H!==Ce||ot&&B!==ot)&&requestAnimationFrame(()=>ie(new Map([[f,{id:f,nodeElement:ve,force:!0}]]))),n(46,qe=i),n(47,Ce=H),n(48,ot=B)),e.$$.dirty[0]&17825792|e.$$.dirty[1]&16640&&E&&(ve!==Z||!q)&&(Z&&E.unobserve(Z),ve&&E.observe(ve),n(45,Z=ve))},[d,f,h,y,_,v,m,b,p,k,A,S,T,P,H,B,R,X,z,I,q,U,G,V,ve,i,s,r,a,u,c,ee,ne,J,_e,be,Ne,Re,Ct,E,M,w,N,C,L,Z,qe,Ce,ot,o,l,St,yt,_t,bt,pt,Nt,$e,rt]}class w1 extends ge{constructor(t){super(),he(this,t,p1,b1,qr,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:39,style:10,type:40,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:41,measuredHeight:42,initialWidth:43,initialHeight:44,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:k1}=jr;function rr(e,t,n){const i=e.slice();return i[21]=t[n],i}function lr(e,t){let n,i,o;return i=new w1({props:{node:t[21],id:t[21].id,data:t[21].data,selected:!!t[21].selected,hidden:!!t[21].hidden,draggable:!!(t[21].draggable||t[2]&&typeof t[21].draggable>"u"),selectable:!!(t[21].selectable||t[3]&&typeof t[21].selectable>"u"),connectable:!!(t[21].connectable||t[4]&&typeof t[21].connectable>"u"),deletable:t[21].deletable??!0,positionX:t[21].internals.positionAbsolute.x,positionY:t[21].internals.positionAbsolute.y,isParent:t[5].has(t[21].id),style:t[21].style,class:t[21].class,type:t[21].type??"default",sourcePosition:t[21].sourcePosition,targetPosition:t[21].targetPosition,dragging:t[21].dragging,zIndex:t[21].internals.z??0,dragHandle:t[21].dragHandle,initialized:Fo(t[21]),width:t[21].width,height:t[21].height,initialWidth:t[21].initialWidth,initialHeight:t[21].initialHeight,measuredWidth:t[21].measured.width,measuredHeight:t[21].measured.height,parentId:t[21].parentId,resizeObserver:t[11],nodeClickDistance:t[0]}}),i.$on("nodeclick",t[12]),i.$on("nodemouseenter",t[13]),i.$on("nodemousemove",t[14]),i.$on("nodemouseleave",t[15]),i.$on("nodedrag",t[16]),i.$on("nodedragstart",t[17]),i.$on("nodedragstop",t[18]),i.$on("nodecontextmenu",t[19]),{key:e,first:null,c(){n=Be(),se(i.$$.fragment),this.first=n},m(r,s){F(r,n,s),re(i,r,s),o=!0},p(r,s){t=r;const l={};s&2&&(l.node=t[21]),s&2&&(l.id=t[21].id),s&2&&(l.data=t[21].data),s&2&&(l.selected=!!t[21].selected),s&2&&(l.hidden=!!t[21].hidden),s&6&&(l.draggable=!!(t[21].draggable||t[2]&&typeof t[21].draggable>"u")),s&10&&(l.selectable=!!(t[21].selectable||t[3]&&typeof t[21].selectable>"u")),s&18&&(l.connectable=!!(t[21].connectable||t[4]&&typeof t[21].connectable>"u")),s&2&&(l.deletable=t[21].deletable??!0),s&2&&(l.positionX=t[21].internals.positionAbsolute.x),s&2&&(l.positionY=t[21].internals.positionAbsolute.y),s&34&&(l.isParent=t[5].has(t[21].id)),s&2&&(l.style=t[21].style),s&2&&(l.class=t[21].class),s&2&&(l.type=t[21].type??"default"),s&2&&(l.sourcePosition=t[21].sourcePosition),s&2&&(l.targetPosition=t[21].targetPosition),s&2&&(l.dragging=t[21].dragging),s&2&&(l.zIndex=t[21].internals.z??0),s&2&&(l.dragHandle=t[21].dragHandle),s&2&&(l.initialized=Fo(t[21])),s&2&&(l.width=t[21].width),s&2&&(l.height=t[21].height),s&2&&(l.initialWidth=t[21].initialWidth),s&2&&(l.initialHeight=t[21].initialHeight),s&2&&(l.measuredWidth=t[21].measured.width),s&2&&(l.measuredHeight=t[21].measured.height),s&2&&(l.parentId=t[21].parentId),s&1&&(l.nodeClickDistance=t[0]),i.$set(l)},i(r){o||(j(i.$$.fragment,r),o=!0)},o(r){Q(i.$$.fragment,r),o=!1},d(r){r&&W(n),le(i,r)}}}function v1(e){let t,n=[],i=new k1,o,r=He(e[1]);const s=l=>l[21].id;for(let l=0;l<r.length;l+=1){let a=rr(e,r,l),u=s(a);i.set(u,n[l]=lr(u,a))}return{c(){t=x("div");for(let l=0;l<n.length;l+=1)n[l].c();g(t,"class","svelte-flow__nodes svelte-tf4uy4")},m(l,a){F(l,t,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null);o=!0},p(l,[a]){a&2111&&(r=He(l[1]),Xe(),n=Qi(n,a,s,1,l,r,i,t,Ui,lr,null,rr),Ye())},i(l){if(!o){for(let a=0;a<r.length;a+=1)j(n[a]);o=!0}},o(l){for(let a=0;a<n.length;a+=1)Q(n[a]);o=!1},d(l){l&&W(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function C1(e,t,n){let i,o,r,s,l,{nodeClickDistance:a=0}=t;const{visibleNodes:u,nodesDraggable:c,nodesConnectable:d,elementsSelectable:f,updateNodeInternals:h,parentLookup:y}=Ae();$(e,u,S=>n(1,i=S)),$(e,c,S=>n(2,o=S)),$(e,d,S=>n(4,s=S)),$(e,f,S=>n(3,r=S)),$(e,y,S=>n(5,l=S));const _=typeof ResizeObserver>"u"?null:new ResizeObserver(S=>{const T=new Map;S.forEach(P=>{const H=P.target.getAttribute("data-id");T.set(H,{id:H,nodeElement:P.target,force:!0})}),h(T)});Gi(()=>{_==null||_.disconnect()});function v(S){ke.call(this,e,S)}function m(S){ke.call(this,e,S)}function b(S){ke.call(this,e,S)}function p(S){ke.call(this,e,S)}function k(S){ke.call(this,e,S)}function E(S){ke.call(this,e,S)}function A(S){ke.call(this,e,S)}function M(S){ke.call(this,e,S)}return e.$$set=S=>{"nodeClickDistance"in S&&n(0,a=S.nodeClickDistance)},[a,i,o,r,s,l,u,c,d,f,y,_,v,m,b,p,k,E,A,M]}class S1 extends ge{constructor(t){super(),he(this,t,C1,v1,ye,{nodeClickDistance:0})}}function sr(e){let t,n,i,o,r,s,l,a;var u=e[27];function c(d,f){return{props:{id:d[0],source:d[1],target:d[2],sourceX:d[14],sourceY:d[15],targetX:d[16],targetY:d[17],sourcePosition:d[18],targetPosition:d[19],animated:d[6],selected:d[7],label:d[10],labelStyle:d[11],data:d[3],style:d[4],interactionWidth:d[21],selectable:d[24],deletable:d[8]??!0,type:d[23],sourceHandleId:d[12],targetHandleId:d[13],markerStart:d[26],markerEnd:d[25]}}}return u&&(i=Gn(u,c(e))),{c(){t=oe("svg"),n=oe("g"),i&&se(i.$$.fragment),g(n,"class",o=Oe(["svelte-flow__edge",e[22]])),g(n,"data-id",e[0]),g(n,"aria-label",r=e[20]===null?void 0:e[20]?e[20]:`Edge from ${e[1]} to ${e[2]}`),g(n,"role","img"),ae(n,"animated",e[6]),ae(n,"selected",e[7]),ae(n,"selectable",e[24]),pe(t,"z-index",e[5])},m(d,f){F(d,t,f),K(t,n),i&&re(i,n,null),s=!0,l||(a=[fe(n,"click",e[32]),fe(n,"contextmenu",e[41]),fe(n,"mouseenter",e[42]),fe(n,"mouseleave",e[43])],l=!0)},p(d,f){if(f[0]&134217728&&u!==(u=d[27])){if(i){Xe();const h=i;Q(h.$$.fragment,1,0,()=>{le(h,1)}),Ye()}u?(i=Gn(u,c(d)),se(i.$$.fragment),j(i.$$.fragment,1),re(i,n,null)):i=null}else if(u){const h={};f[0]&1&&(h.id=d[0]),f[0]&2&&(h.source=d[1]),f[0]&4&&(h.target=d[2]),f[0]&16384&&(h.sourceX=d[14]),f[0]&32768&&(h.sourceY=d[15]),f[0]&65536&&(h.targetX=d[16]),f[0]&131072&&(h.targetY=d[17]),f[0]&262144&&(h.sourcePosition=d[18]),f[0]&524288&&(h.targetPosition=d[19]),f[0]&64&&(h.animated=d[6]),f[0]&128&&(h.selected=d[7]),f[0]&1024&&(h.label=d[10]),f[0]&2048&&(h.labelStyle=d[11]),f[0]&8&&(h.data=d[3]),f[0]&16&&(h.style=d[4]),f[0]&2097152&&(h.interactionWidth=d[21]),f[0]&16777216&&(h.selectable=d[24]),f[0]&256&&(h.deletable=d[8]??!0),f[0]&8388608&&(h.type=d[23]),f[0]&4096&&(h.sourceHandleId=d[12]),f[0]&8192&&(h.targetHandleId=d[13]),f[0]&67108864&&(h.markerStart=d[26]),f[0]&33554432&&(h.markerEnd=d[25]),i.$set(h)}(!s||f[0]&4194304&&o!==(o=Oe(["svelte-flow__edge",d[22]])))&&g(n,"class",o),(!s||f[0]&1)&&g(n,"data-id",d[0]),(!s||f[0]&1048582&&r!==(r=d[20]===null?void 0:d[20]?d[20]:`Edge from ${d[1]} to ${d[2]}`))&&g(n,"aria-label",r),(!s||f[0]&4194368)&&ae(n,"animated",d[6]),(!s||f[0]&4194432)&&ae(n,"selected",d[7]),(!s||f[0]&20971520)&&ae(n,"selectable",d[24]),f[0]&32&&pe(t,"z-index",d[5])},i(d){s||(i&&j(i.$$.fragment,d),s=!0)},o(d){i&&Q(i.$$.fragment,d),s=!1},d(d){d&&W(t),i&&le(i),l=!1,Ie(a)}}}function N1(e){let t,n,i=!e[9]&&sr(e);return{c(){i&&i.c(),t=Be()},m(o,r){i&&i.m(o,r),F(o,t,r),n=!0},p(o,r){o[9]?i&&(Xe(),Q(i,1,1,()=>{i=null}),Ye()):i?(i.p(o,r),r[0]&512&&j(i,1)):(i=sr(o),i.c(),j(i,1),i.m(t.parentNode,t))},i(o){n||(j(i),n=!0)},o(o){Q(i),n=!1},d(o){o&&W(t),i&&i.d(o)}}}function E1(e,t,n){let i,o,r,s,l,a,u,c,d,{id:f}=t,{type:h="default"}=t,{source:y=""}=t,{target:_=""}=t,{data:v={}}=t,{style:m=void 0}=t,{zIndex:b=void 0}=t,{animated:p=!1}=t,{selected:k=!1}=t,{selectable:E=void 0}=t,{deletable:A=void 0}=t,{hidden:M=!1}=t,{label:S=void 0}=t,{labelStyle:T=void 0}=t,{markerStart:P=void 0}=t,{markerEnd:H=void 0}=t,{sourceHandle:B=void 0}=t,{targetHandle:R=void 0}=t,{sourceX:w}=t,{sourceY:N}=t,{targetX:C}=t,{targetY:L}=t,{sourcePosition:X}=t,{targetPosition:z}=t,{ariaLabel:I=void 0}=t,{interactionWidth:q=void 0}=t,{class:U=""}=t;$t("svelteflow__edge_id",f);const{edgeLookup:G,edgeTypes:V,flowId:ee,elementsSelectable:ne}=Ae();$(e,G,Z=>n(44,a=Z)),$(e,V,Z=>n(40,d=Z)),$(e,ee,Z=>n(39,c=Z)),$(e,ne,Z=>n(38,u=Z));const de=Sn(),me=Kl();function J(Z){const Ne=a.get(f);Ne&&(me(f),de("edgeclick",{event:Z,edge:Ne}))}function ie(Z,Ne){const Re=a.get(f);Re&&de(Ne,{event:Z,edge:Re})}const _e=Z=>{ie(Z,"edgecontextmenu")},be=Z=>{ie(Z,"edgemouseenter")},ve=Z=>{ie(Z,"edgemouseleave")};return e.$$set=Z=>{"id"in Z&&n(0,f=Z.id),"type"in Z&&n(34,h=Z.type),"source"in Z&&n(1,y=Z.source),"target"in Z&&n(2,_=Z.target),"data"in Z&&n(3,v=Z.data),"style"in Z&&n(4,m=Z.style),"zIndex"in Z&&n(5,b=Z.zIndex),"animated"in Z&&n(6,p=Z.animated),"selected"in Z&&n(7,k=Z.selected),"selectable"in Z&&n(35,E=Z.selectable),"deletable"in Z&&n(8,A=Z.deletable),"hidden"in Z&&n(9,M=Z.hidden),"label"in Z&&n(10,S=Z.label),"labelStyle"in Z&&n(11,T=Z.labelStyle),"markerStart"in Z&&n(36,P=Z.markerStart),"markerEnd"in Z&&n(37,H=Z.markerEnd),"sourceHandle"in Z&&n(12,B=Z.sourceHandle),"targetHandle"in Z&&n(13,R=Z.targetHandle),"sourceX"in Z&&n(14,w=Z.sourceX),"sourceY"in Z&&n(15,N=Z.sourceY),"targetX"in Z&&n(16,C=Z.targetX),"targetY"in Z&&n(17,L=Z.targetY),"sourcePosition"in Z&&n(18,X=Z.sourcePosition),"targetPosition"in Z&&n(19,z=Z.targetPosition),"ariaLabel"in Z&&n(20,I=Z.ariaLabel),"interactionWidth"in Z&&n(21,q=Z.interactionWidth),"class"in Z&&n(22,U=Z.class)},e.$$.update=()=>{e.$$.dirty[1]&8&&n(23,i=h||"default"),e.$$.dirty[0]&8388608|e.$$.dirty[1]&512&&n(27,o=d[i]||Fl),e.$$.dirty[1]&288&&n(26,r=P?`url('#${Zi(P,c)}')`:void 0),e.$$.dirty[1]&320&&n(25,s=H?`url('#${Zi(H,c)}')`:void 0),e.$$.dirty[1]&144&&n(24,l=E??u)},[f,y,_,v,m,b,p,k,A,M,S,T,B,R,w,N,C,L,X,z,I,q,U,i,l,s,r,o,G,V,ee,ne,J,ie,h,E,P,H,u,c,d,_e,be,ve]}class P1 extends ge{constructor(t){super(),he(this,t,E1,N1,qr,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function M1(e,t,n){let{onMount:i=void 0}=t,{onDestroy:o=void 0}=t;return Cn(()=>(i==null||i(),o)),e.$$set=r=>{"onMount"in r&&n(0,i=r.onMount),"onDestroy"in r&&n(1,o=r.onDestroy)},[i,o]}class O1 extends ge{constructor(t){super(),he(this,t,M1,null,ye,{onMount:0,onDestroy:1})}}function ar(e,t,n){const i=e.slice();return i[2]=t[n],i}function ur(e,t){let n,i,o;const r=[t[2]];let s={};for(let l=0;l<r.length;l+=1)s=Ee(s,r[l]);return i=new V1({props:s}),{key:e,first:null,c(){n=Be(),se(i.$$.fragment),this.first=n},m(l,a){F(l,n,a),re(i,l,a),o=!0},p(l,a){t=l;const u=a&1?Ji(r,[Rs(t[2])]):{};i.$set(u)},i(l){o||(j(i.$$.fragment,l),o=!0)},o(l){Q(i.$$.fragment,l),o=!1},d(l){l&&W(n),le(i,l)}}}function T1(e){let t,n=[],i=new Map,o,r=He(e[0]);const s=l=>l[2].id;for(let l=0;l<r.length;l+=1){let a=ar(e,r,l),u=s(a);i.set(u,n[l]=ur(u,a))}return{c(){t=oe("defs");for(let l=0;l<n.length;l+=1)n[l].c()},m(l,a){F(l,t,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null);o=!0},p(l,[a]){a&1&&(r=He(l[0]),Xe(),n=Qi(n,a,s,1,l,r,i,t,Ui,ur,null,ar),Ye())},i(l){if(!o){for(let a=0;a<r.length;a+=1)j(n[a]);o=!0}},o(l){for(let a=0;a<n.length;a+=1)Q(n[a]);o=!1},d(l){l&&W(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function z1(e,t,n){let i;const{markers:o}=Ae();return $(e,o,r=>n(0,i=r)),[i,o]}class D1 extends ge{constructor(t){super(),he(this,t,z1,T1,ye,{})}}function A1(e){let t;return{c(){t=oe("polyline"),g(t,"stroke",e[6]),g(t,"stroke-linecap","round"),g(t,"stroke-linejoin","round"),g(t,"stroke-width",e[7]),g(t,"fill",e[6]),g(t,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){F(n,t,i)},p(n,i){i&64&&g(t,"stroke",n[6]),i&128&&g(t,"stroke-width",n[7]),i&64&&g(t,"fill",n[6])},d(n){n&&W(t)}}}function I1(e){let t;return{c(){t=oe("polyline"),g(t,"stroke",e[6]),g(t,"stroke-linecap","round"),g(t,"stroke-linejoin","round"),g(t,"stroke-width",e[7]),g(t,"fill","none"),g(t,"points","-5,-4 0,0 -5,4")},m(n,i){F(n,t,i)},p(n,i){i&64&&g(t,"stroke",n[6]),i&128&&g(t,"stroke-width",n[7])},d(n){n&&W(t)}}}function H1(e){let t,n,i;function o(l,a){if(l[1]===oi.Arrow)return I1;if(l[1]===oi.ArrowClosed)return A1}let r=o(e),s=r&&r(e);return{c(){t=oe("marker"),s&&s.c(),g(t,"class","svelte-flow__arrowhead"),g(t,"id",e[0]),g(t,"markerWidth",n=`${e[2]}`),g(t,"markerHeight",i=`${e[3]}`),g(t,"viewBox","-10 -10 20 20"),g(t,"markerUnits",e[4]),g(t,"orient",e[5]),g(t,"refX","0"),g(t,"refY","0")},m(l,a){F(l,t,a),s&&s.m(t,null)},p(l,[a]){r===(r=o(l))&&s?s.p(l,a):(s&&s.d(1),s=r&&r(l),s&&(s.c(),s.m(t,null))),a&1&&g(t,"id",l[0]),a&4&&n!==(n=`${l[2]}`)&&g(t,"markerWidth",n),a&8&&i!==(i=`${l[3]}`)&&g(t,"markerHeight",i),a&16&&g(t,"markerUnits",l[4]),a&32&&g(t,"orient",l[5])},i:we,o:we,d(l){l&&W(t),s&&s.d()}}}function L1(e,t,n){let{id:i}=t,{type:o}=t,{width:r=12.5}=t,{height:s=12.5}=t,{markerUnits:l="strokeWidth"}=t,{orient:a="auto-start-reverse"}=t,{color:u=void 0}=t,{strokeWidth:c=void 0}=t;return e.$$set=d=>{"id"in d&&n(0,i=d.id),"type"in d&&n(1,o=d.type),"width"in d&&n(2,r=d.width),"height"in d&&n(3,s=d.height),"markerUnits"in d&&n(4,l=d.markerUnits),"orient"in d&&n(5,a=d.orient),"color"in d&&n(6,u=d.color),"strokeWidth"in d&&n(7,c=d.strokeWidth)},[i,o,r,s,l,a,u,c]}class V1 extends ge{constructor(t){super(),he(this,t,L1,H1,ye,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function cr(e,t,n){const i=e.slice();return i[14]=t[n],i}function fr(e,t){let n,i,o;return i=new P1({props:{id:t[14].id,source:t[14].source,target:t[14].target,data:t[14].data,style:t[14].style,animated:t[14].animated,selected:t[14].selected,selectable:t[14].selectable??t[1],deletable:t[14].deletable,hidden:t[14].hidden,label:t[14].label,labelStyle:t[14].labelStyle,markerStart:t[14].markerStart,markerEnd:t[14].markerEnd,sourceHandle:t[14].sourceHandle,targetHandle:t[14].targetHandle,sourceX:t[14].sourceX,sourceY:t[14].sourceY,targetX:t[14].targetX,targetY:t[14].targetY,sourcePosition:t[14].sourcePosition,targetPosition:t[14].targetPosition,ariaLabel:t[14].ariaLabel,interactionWidth:t[14].interactionWidth,class:t[14].class,type:t[14].type||"default",zIndex:t[14].zIndex}}),i.$on("edgeclick",t[7]),i.$on("edgecontextmenu",t[8]),i.$on("edgemouseenter",t[9]),i.$on("edgemouseleave",t[10]),{key:e,first:null,c(){n=Be(),se(i.$$.fragment),this.first=n},m(r,s){F(r,n,s),re(i,r,s),o=!0},p(r,s){t=r;const l={};s&1&&(l.id=t[14].id),s&1&&(l.source=t[14].source),s&1&&(l.target=t[14].target),s&1&&(l.data=t[14].data),s&1&&(l.style=t[14].style),s&1&&(l.animated=t[14].animated),s&1&&(l.selected=t[14].selected),s&3&&(l.selectable=t[14].selectable??t[1]),s&1&&(l.deletable=t[14].deletable),s&1&&(l.hidden=t[14].hidden),s&1&&(l.label=t[14].label),s&1&&(l.labelStyle=t[14].labelStyle),s&1&&(l.markerStart=t[14].markerStart),s&1&&(l.markerEnd=t[14].markerEnd),s&1&&(l.sourceHandle=t[14].sourceHandle),s&1&&(l.targetHandle=t[14].targetHandle),s&1&&(l.sourceX=t[14].sourceX),s&1&&(l.sourceY=t[14].sourceY),s&1&&(l.targetX=t[14].targetX),s&1&&(l.targetY=t[14].targetY),s&1&&(l.sourcePosition=t[14].sourcePosition),s&1&&(l.targetPosition=t[14].targetPosition),s&1&&(l.ariaLabel=t[14].ariaLabel),s&1&&(l.interactionWidth=t[14].interactionWidth),s&1&&(l.class=t[14].class),s&1&&(l.type=t[14].type||"default"),s&1&&(l.zIndex=t[14].zIndex),i.$set(l)},i(r){o||(j(i.$$.fragment,r),o=!0)},o(r){Q(i.$$.fragment,r),o=!1},d(r){r&&W(n),le(i,r)}}}function dr(e){let t,n;return t=new O1({props:{onMount:e[11],onDestroy:e[12]}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,o){const r={};o&4&&(r.onMount=i[11]),o&4&&(r.onDestroy=i[12]),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function R1(e){let t,n,i,o,r=[],s=new Map,l,a;i=new D1({});let u=He(e[0]);const c=f=>f[14].id;for(let f=0;f<u.length;f+=1){let h=cr(e,u,f),y=c(h);s.set(y,r[f]=fr(y,h))}let d=e[0].length>0&&dr(e);return{c(){t=x("div"),n=oe("svg"),se(i.$$.fragment),o=ce();for(let f=0;f<r.length;f+=1)r[f].c();l=ce(),d&&d.c(),g(n,"class","svelte-flow__marker"),g(t,"class","svelte-flow__edges")},m(f,h){F(f,t,h),K(t,n),re(i,n,null),K(t,o);for(let y=0;y<r.length;y+=1)r[y]&&r[y].m(t,null);K(t,l),d&&d.m(t,null),a=!0},p(f,[h]){h&3&&(u=He(f[0]),Xe(),r=Qi(r,h,c,1,f,u,s,t,Ui,fr,l,cr),Ye()),f[0].length>0?d?(d.p(f,h),h&1&&j(d,1)):(d=dr(f),d.c(),j(d,1),d.m(t,null)):d&&(Xe(),Q(d,1,1,()=>{d=null}),Ye())},i(f){if(!a){j(i.$$.fragment,f);for(let h=0;h<u.length;h+=1)j(r[h]);j(d),a=!0}},o(f){Q(i.$$.fragment,f);for(let h=0;h<r.length;h+=1)Q(r[h]);Q(d),a=!1},d(f){f&&W(t),le(i);for(let h=0;h<r.length;h+=1)r[h].d();d&&d.d()}}}function X1(e,t,n){let i,o,r,{defaultEdgeOptions:s}=t;const{visibleEdges:l,edgesInitialized:a,edges:{setDefaultOptions:u},elementsSelectable:c}=Ae();$(e,l,m=>n(0,i=m)),$(e,a,m=>n(2,r=m)),$(e,c,m=>n(1,o=m)),Cn(()=>{s&&u(s)});function d(m){ke.call(this,e,m)}function f(m){ke.call(this,e,m)}function h(m){ke.call(this,e,m)}function y(m){ke.call(this,e,m)}const _=()=>{qn(a,r=!0,r)},v=()=>{qn(a,r=!1,r)};return e.$$set=m=>{"defaultEdgeOptions"in m&&n(6,s=m.defaultEdgeOptions)},[i,o,r,l,a,c,s,d,f,h,y,_,v]}class Y1 extends ge{constructor(t){super(),he(this,t,X1,R1,ye,{defaultEdgeOptions:6})}}function hr(e){let t;return{c(){t=x("div"),g(t,"class","svelte-flow__selection svelte-1iugwpu"),pe(t,"width",typeof e[2]=="string"?e[2]:`${e[2]}px`),pe(t,"height",typeof e[3]=="string"?e[3]:`${e[3]}px`),pe(t,"transform",`translate(${e[0]}px, ${e[1]}px)`)},m(n,i){F(n,t,i)},p(n,i){i&4&&pe(t,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&pe(t,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&pe(t,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&W(t)}}}function W1(e){let t,n=e[4]&&hr(e);return{c(){n&&n.c(),t=Be()},m(i,o){n&&n.m(i,o),F(i,t,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=hr(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:we,o:we,d(i){i&&W(t),n&&n.d(i)}}}function B1(e,t,n){let{x:i=0}=t,{y:o=0}=t,{width:r=0}=t,{height:s=0}=t,{isVisible:l=!0}=t;return e.$$set=a=>{"x"in a&&n(0,i=a.x),"y"in a&&n(1,o=a.y),"width"in a&&n(2,r=a.width),"height"in a&&n(3,s=a.height),"isVisible"in a&&n(4,l=a.isVisible)},[i,o,r,s,l]}class Ul extends ge{constructor(t){super(),he(this,t,B1,W1,ye,{x:0,y:1,width:2,height:3,isVisible:4})}}function K1(e){var i,o,r,s;let t,n;return t=new Ul({props:{isVisible:!!(e[0]&&e[1]==="user"),width:(i=e[0])==null?void 0:i.width,height:(o=e[0])==null?void 0:o.height,x:(r=e[0])==null?void 0:r.x,y:(s=e[0])==null?void 0:s.y}}),{c(){se(t.$$.fragment)},m(l,a){re(t,l,a),n=!0},p(l,[a]){var c,d,f,h;const u={};a&3&&(u.isVisible=!!(l[0]&&l[1]==="user")),a&1&&(u.width=(c=l[0])==null?void 0:c.width),a&1&&(u.height=(d=l[0])==null?void 0:d.height),a&1&&(u.x=(f=l[0])==null?void 0:f.x),a&1&&(u.y=(h=l[0])==null?void 0:h.y),t.$set(u)},i(l){n||(j(t.$$.fragment,l),n=!0)},o(l){Q(t.$$.fragment,l),n=!1},d(l){le(t,l)}}}function F1(e,t,n){let i,o;const{selectionRect:r,selectionRectMode:s}=Ae();return $(e,r,l=>n(0,i=l)),$(e,s,l=>n(1,o=l)),[i,o,r,s]}class q1 extends ge{constructor(t){super(),he(this,t,F1,K1,ye,{})}}function gr(e){let t,n,i,o,r;return n=new Ul({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){t=x("div"),se(n.$$.fragment),g(t,"class","selection-wrapper nopan svelte-5pxri"),pe(t,"width",e[1].width+"px"),pe(t,"height",e[1].height+"px"),pe(t,"transform","translate("+e[1].x+"px, "+e[1].y+"px)"),g(t,"role","button"),g(t,"tabindex","-1")},m(s,l){F(s,t,l),re(n,t,null),i=!0,o||(r=[Ke(Gl.call(null,t,{disabled:!1,store:e[2],onDrag:e[11],onDragStart:e[12],onDragStop:e[13]})),fe(t,"contextmenu",e[7]),fe(t,"click",e[8]),fe(t,"keyup",j1)],o=!0)},p(s,l){(!i||l&2)&&pe(t,"width",s[1].width+"px"),(!i||l&2)&&pe(t,"height",s[1].height+"px"),(!i||l&2)&&pe(t,"transform","translate("+s[1].x+"px, "+s[1].y+"px)")},i(s){i||(j(n.$$.fragment,s),i=!0)},o(s){Q(n.$$.fragment,s),i=!1},d(s){s&&W(t),le(n),o=!1,Ie(r)}}}function Z1(e){let t=e[0]==="nodes"&&e[1]&&nt(e[1].x)&&nt(e[1].y),n,i,o=t&&gr(e);return{c(){o&&o.c(),n=Be()},m(r,s){o&&o.m(r,s),F(r,n,s),i=!0},p(r,[s]){s&3&&(t=r[0]==="nodes"&&r[1]&&nt(r[1].x)&&nt(r[1].y)),t?o?(o.p(r,s),s&3&&j(o,1)):(o=gr(r),o.c(),j(o,1),o.m(n.parentNode,n)):o&&(Xe(),Q(o,1,1,()=>{o=null}),Ye())},i(r){i||(j(o),i=!0)},o(r){Q(o),i=!1},d(r){r&&W(n),o&&o.d(r)}}}const j1=()=>{};function G1(e,t,n){let i,o,r;const s=Ae(),{selectionRectMode:l,nodes:a,nodeLookup:u}=s;$(e,l,m=>n(0,r=m)),$(e,a,m=>n(9,i=m)),$(e,u,m=>n(10,o=m));const c=Sn();let d=null;function f(m){const b=i.filter(p=>p.selected);c("selectioncontextmenu",{nodes:b,event:m})}function h(m){const b=i.filter(p=>p.selected);c("selectionclick",{nodes:b,event:m})}const y=(m,b,p,k)=>{c("nodedrag",{event:m,targetNode:null,nodes:k})},_=(m,b,p,k)=>{c("nodedragstart",{event:m,targetNode:null,nodes:k})},v=(m,b,p,k)=>{c("nodedragstop",{event:m,targetNode:null,nodes:k})};return e.$$.update=()=>{e.$$.dirty&1537&&r==="nodes"&&n(1,d=mi(o,{filter:m=>!!m.selected}))},[r,d,s,l,a,u,c,f,h,i,o,y,_,v]}class U1 extends ge{constructor(t){super(),he(this,t,G1,Z1,ye,{})}}function lt(e,t){let{enabled:n=!0,trigger:i,type:o="keydown"}=t;function r(s){const l=Array.isArray(i)?i:[i],a={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const u of l){const c={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:d,key:f,callback:h,preventDefault:y,enabled:_}=c;if(_){if(d.length&&!(Array.isArray(d)?d:[d]).map(b=>typeof b=="string"?[b]:b).some(b=>b.every(p=>a[p])))continue;if(s.key===f){y&&s.preventDefault();const v={node:e,trigger:c,originalEvent:s};e.dispatchEvent(new CustomEvent("shortcut",{detail:v})),h==null||h(v)}}}}return n&&e.addEventListener(o,r),{update:s=>{const{enabled:l=!0,type:a="keydown"}=s;n&&(!l||o!==a)?e.removeEventListener(o,r):!n&&l&&e.addEventListener(a,r),n=l,o=a,i=s.trigger},destroy:()=>{e.removeEventListener(o,r)}}}function Q1(e){let t,n,i,o,r,s,l,a,u,c,d,f;return{c:we,m(h,y){d||(f=[Ke(t=lt.call(null,window,{trigger:ze(e[0],e[11]),type:"keydown"})),Ke(n=lt.call(null,window,{trigger:ze(e[0],e[12]),type:"keyup"})),Ke(i=lt.call(null,window,{trigger:ze(e[1],e[13]),type:"keydown"})),Ke(o=lt.call(null,window,{trigger:ze(e[1],e[14]),type:"keyup"})),Ke(r=lt.call(null,window,{trigger:ze(e[2],e[15]),type:"keydown"})),Ke(s=lt.call(null,window,{trigger:ze(e[2],e[16]),type:"keyup"})),Ke(l=lt.call(null,window,{trigger:ze(e[3],e[17]),type:"keydown"})),Ke(a=lt.call(null,window,{trigger:ze(e[3],e[18]),type:"keyup"})),Ke(u=lt.call(null,window,{trigger:ze(e[4],e[19]),type:"keydown"})),Ke(c=lt.call(null,window,{trigger:ze(e[4],e[20]),type:"keyup"})),fe(window,"blur",e[10]),fe(window,"contextmenu",e[10])],d=!0)},p(h,[y]){t&&Se(t.update)&&y&1&&t.update.call(null,{trigger:ze(h[0],h[11]),type:"keydown"}),n&&Se(n.update)&&y&1&&n.update.call(null,{trigger:ze(h[0],h[12]),type:"keyup"}),i&&Se(i.update)&&y&2&&i.update.call(null,{trigger:ze(h[1],h[13]),type:"keydown"}),o&&Se(o.update)&&y&2&&o.update.call(null,{trigger:ze(h[1],h[14]),type:"keyup"}),r&&Se(r.update)&&y&4&&r.update.call(null,{trigger:ze(h[2],h[15]),type:"keydown"}),s&&Se(s.update)&&y&4&&s.update.call(null,{trigger:ze(h[2],h[16]),type:"keyup"}),l&&Se(l.update)&&y&8&&l.update.call(null,{trigger:ze(h[3],h[17]),type:"keydown"}),a&&Se(a.update)&&y&8&&a.update.call(null,{trigger:ze(h[3],h[18]),type:"keyup"}),u&&Se(u.update)&&y&16&&u.update.call(null,{trigger:ze(h[4],h[19]),type:"keydown"}),c&&Se(c.update)&&y&16&&c.update.call(null,{trigger:ze(h[4],h[20]),type:"keyup"})},i:we,o:we,d(h){d=!1,Ie(f)}}}function Ql(e){return e!==null&&typeof e=="object"}function J1(e){return Ql(e)?e.modifier||[]:[]}function x1(e){return e==null?"":Ql(e)?e.key:e}function ze(e,t){return(Array.isArray(e)?e:[e]).map(i=>{const o=x1(i);return{key:o,modifier:J1(i),enabled:o!==null,callback:t}})}function $1(e,t,n){let{selectionKey:i="Shift"}=t,{multiSelectionKey:o=si()?"Meta":"Control"}=t,{deleteKey:r="Backspace"}=t,{panActivationKey:s=" "}=t,{zoomActivationKey:l=si()?"Meta":"Control"}=t;const{selectionKeyPressed:a,multiselectionKeyPressed:u,deleteKeyPressed:c,panActivationKeyPressed:d,zoomActivationKeyPressed:f,selectionRect:h}=Ae();function y(){h.set(null),a.set(!1),u.set(!1),c.set(!1),d.set(!1),f.set(!1)}const _=()=>a.set(!0),v=()=>a.set(!1),m=()=>u.set(!0),b=()=>u.set(!1),p=T=>{!(T.originalEvent.ctrlKey||T.originalEvent.metaKey||T.originalEvent.shiftKey)&&!Hf(T.originalEvent)&&c.set(!0)},k=()=>c.set(!1),E=()=>d.set(!0),A=()=>d.set(!1),M=()=>f.set(!0),S=()=>f.set(!1);return e.$$set=T=>{"selectionKey"in T&&n(0,i=T.selectionKey),"multiSelectionKey"in T&&n(1,o=T.multiSelectionKey),"deleteKey"in T&&n(2,r=T.deleteKey),"panActivationKey"in T&&n(3,s=T.panActivationKey),"zoomActivationKey"in T&&n(4,l=T.zoomActivationKey)},[i,o,r,s,l,a,u,c,d,f,y,_,v,m,b,p,k,E,A,M,S]}class eh extends ge{constructor(t){super(),he(this,t,$1,Q1,ye,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const th=e=>({}),mr=e=>({});function yr(e){let t,n,i,o;const r=e[13].connectionLine,s=Ue(r,e,e[12],mr);let l=!e[2]&&_r(e);return{c(){t=oe("svg"),n=oe("g"),s&&s.c(),l&&l.c(),g(n,"class",i=Oe(["svelte-flow__connection",Wo(e[3].isValid)])),g(t,"width",e[5]),g(t,"height",e[6]),g(t,"class","svelte-flow__connectionline"),g(t,"style",e[0])},m(a,u){F(a,t,u),K(t,n),s&&s.m(n,null),l&&l.m(n,null),o=!0},p(a,u){s&&s.p&&(!o||u&4096)&&Je(s,r,a,a[12],o?Qe(r,a[12],u,th):xe(a[12]),mr),a[2]?l&&(l.d(1),l=null):l?l.p(a,u):(l=_r(a),l.c(),l.m(n,null)),(!o||u&8&&i!==(i=Oe(["svelte-flow__connection",Wo(a[3].isValid)])))&&g(n,"class",i),(!o||u&32)&&g(t,"width",a[5]),(!o||u&64)&&g(t,"height",a[6]),(!o||u&1)&&g(t,"style",a[0])},i(a){o||(j(s,a),o=!0)},o(a){Q(s,a),o=!1},d(a){a&&W(t),s&&s.d(a),l&&l.d()}}}function _r(e){let t;return{c(){t=oe("path"),g(t,"d",e[4]),g(t,"style",e[1]),g(t,"fill","none"),g(t,"class","svelte-flow__connection-path")},m(n,i){F(n,t,i)},p(n,i){i&16&&g(t,"d",n[4]),i&2&&g(t,"style",n[1])},d(n){n&&W(t)}}}function nh(e){let t,n,i=e[3].inProgress&&yr(e);return{c(){i&&i.c(),t=Be()},m(o,r){i&&i.m(o,r),F(o,t,r),n=!0},p(o,[r]){o[3].inProgress?i?(i.p(o,r),r&8&&j(i,1)):(i=yr(o),i.c(),j(i,1),i.m(t.parentNode,t)):i&&(Xe(),Q(i,1,1,()=>{i=null}),Ye())},i(o){n||(j(i),n=!0)},o(o){Q(i),n=!1},d(o){o&&W(t),i&&i.d(o)}}}function ih(e,t,n){let i,o,r,s,{$$slots:l={},$$scope:a}=t,{containerStyle:u=""}=t,{style:c=""}=t,{isCustomComponent:d=!1}=t;const{width:f,height:h,connection:y,connectionLineType:_}=Ae();$(e,f,m=>n(5,r=m)),$(e,h,m=>n(6,s=m)),$(e,y,m=>n(3,o=m)),$(e,_,m=>n(11,i=m));let v=null;return e.$$set=m=>{"containerStyle"in m&&n(0,u=m.containerStyle),"style"in m&&n(1,c=m.style),"isCustomComponent"in m&&n(2,d=m.isCustomComponent),"$$scope"in m&&n(12,a=m.$$scope)},e.$$.update=()=>{if(e.$$.dirty&2060&&o.inProgress&&!d){const{from:m,to:b,fromPosition:p,toPosition:k}=o,E={sourceX:m.x,sourceY:m.y,sourcePosition:p,targetX:b.x,targetY:b.y,targetPosition:k};switch(i){case Jt.Bezier:n(4,[v]=Ol(E),v);break;case Jt.Step:n(4,[v]=ai({...E,borderRadius:0}),v);break;case Jt.SmoothStep:n(4,[v]=ai(E),v);break;default:n(4,[v]=zl(E),v)}}},[u,c,d,o,v,r,s,f,h,y,_,i,a,l]}class oh extends ge{constructor(t){super(),he(this,t,ih,nh,ye,{containerStyle:0,style:1,isCustomComponent:2})}}function rh(e){let t,n,i;const o=e[8].default,r=Ue(o,e,e[7],null);let s=[{class:n=Oe(["svelte-flow__panel",e[1],...e[2]])},{style:e[0]},e[5]],l={};for(let a=0;a<s.length;a+=1)l=Ee(l,s[a]);return{c(){t=x("div"),r&&r.c(),Zn(t,l),pe(t,"pointer-events",e[3]?"none":"")},m(a,u){F(a,t,u),r&&r.m(t,null),i=!0},p(a,[u]){r&&r.p&&(!i||u&128)&&Je(r,o,a,a[7],i?Qe(o,a[7],u,null):xe(a[7]),null),Zn(t,l=Ji(s,[(!i||u&6&&n!==(n=Oe(["svelte-flow__panel",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&32&&a[5]])),pe(t,"pointer-events",a[3]?"none":"")},i(a){i||(j(r,a),i=!0)},o(a){Q(r,a),i=!1},d(a){a&&W(t),r&&r.d(a)}}}function lh(e,t,n){let i;const o=["position","style","class"];let r=De(t,o),s,{$$slots:l={},$$scope:a}=t,{position:u="top-right"}=t,{style:c=void 0}=t,{class:d=void 0}=t;const{selectionRectMode:f}=Ae();return $(e,f,h=>n(3,s=h)),e.$$set=h=>{t=Ee(Ee({},t),ct(h)),n(5,r=De(t,o)),"position"in h&&n(6,u=h.position),"style"in h&&n(0,c=h.style),"class"in h&&n(1,d=h.class),"$$scope"in h&&n(7,a=h.$$scope)},e.$$.update=()=>{e.$$.dirty&64&&n(2,i=`${u}`.split("-"))},[c,d,i,s,f,r,u,a,l]}class sh extends ge{constructor(t){super(),he(this,t,lh,rh,ye,{position:6,style:0,class:1})}}function br(e){let t,n;return t=new sh({props:{position:e[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[ah]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,o){const r={};o&2&&(r.position=i[1]),o&4&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function ah(e){let t;return{c(){t=x("a"),t.textContent="Svelte Flow",g(t,"href","https://svelteflow.dev"),g(t,"target","_blank"),g(t,"rel","noopener noreferrer"),g(t,"aria-label","Svelte Flow attribution")},m(n,i){F(n,t,i)},p:we,d(n){n&&W(t)}}}function uh(e){var o;let t,n,i=!((o=e[0])!=null&&o.hideAttribution)&&br(e);return{c(){i&&i.c(),t=Be()},m(r,s){i&&i.m(r,s),F(r,t,s),n=!0},p(r,[s]){var l;(l=r[0])!=null&&l.hideAttribution?i&&(Xe(),Q(i,1,1,()=>{i=null}),Ye()):i?(i.p(r,s),s&1&&j(i,1)):(i=br(r),i.c(),j(i,1),i.m(t.parentNode,t))},i(r){n||(j(i),n=!0)},o(r){Q(i),n=!1},d(r){r&&W(t),i&&i.d(r)}}}function ch(e,t,n){let{proOptions:i=void 0}=t,{position:o="bottom-right"}=t;return e.$$set=r=>{"proOptions"in r&&n(0,i=r.proOptions),"position"in r&&n(1,o=r.position)},[i,o]}class fh extends ge{constructor(t){super(),he(this,t,ch,uh,ye,{proOptions:0,position:1})}}function pr(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:r,paneClickDistance:s}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),o!==void 0&&e.setMaxZoom(o),r!==void 0&&e.setTranslateExtent(r),s!==void 0&&e.setPaneClickDistance(s)}const dh=e=>Object.keys(e);function hh(e,t){dh(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function gh(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function mh(e="light"){return Ge("light",n=>{if(e!=="system"){n(e);return}const i=gh(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const yh=e=>({}),wr=e=>({slot:"connectionLine"});function _h(e){let t;const n=e[75].connectionLine,i=Ue(n,e,e[99],wr);return{c(){i&&i.c()},m(o,r){i&&i.m(o,r),t=!0},p(o,r){i&&i.p&&(!t||r[3]&64)&&Je(i,n,o,o[99],t?Qe(n,o[99],r,yh):xe(o[99]),wr)},i(o){t||(j(i,o),t=!0)},o(o){Q(i,o),t=!1},d(o){i&&i.d(o)}}}function bh(e){let t,n,i,o,r,s,l,a,u,c,d,f;return t=new Y1({props:{defaultEdgeOptions:e[21]}}),t.$on("edgeclick",e[78]),t.$on("edgecontextmenu",e[79]),t.$on("edgemouseenter",e[80]),t.$on("edgemouseleave",e[81]),i=new oh({props:{containerStyle:e[7],style:e[6],isCustomComponent:e[34].connectionLine,$$slots:{connectionLine:[_h]},$$scope:{ctx:e}}}),u=new S1({props:{nodeClickDistance:e[23]}}),u.$on("nodeclick",e[82]),u.$on("nodemouseenter",e[83]),u.$on("nodemousemove",e[84]),u.$on("nodemouseleave",e[85]),u.$on("nodedragstart",e[86]),u.$on("nodedrag",e[87]),u.$on("nodedragstop",e[88]),u.$on("nodecontextmenu",e[89]),d=new U1({}),d.$on("selectionclick",e[90]),d.$on("selectioncontextmenu",e[91]),d.$on("nodedragstart",e[92]),d.$on("nodedrag",e[93]),d.$on("nodedragstop",e[94]),{c(){se(t.$$.fragment),n=ce(),se(i.$$.fragment),o=ce(),r=x("div"),s=ce(),l=x("div"),a=ce(),se(u.$$.fragment),c=ce(),se(d.$$.fragment),g(r,"class","svelte-flow__edgelabel-renderer"),g(l,"class","svelte-flow__viewport-portal")},m(h,y){re(t,h,y),F(h,n,y),re(i,h,y),F(h,o,y),F(h,r,y),F(h,s,y),F(h,l,y),F(h,a,y),re(u,h,y),F(h,c,y),re(d,h,y),f=!0},p(h,y){const _={};y[0]&2097152&&(_.defaultEdgeOptions=h[21]),t.$set(_);const v={};y[0]&128&&(v.containerStyle=h[7]),y[0]&64&&(v.style=h[6]),y[1]&8&&(v.isCustomComponent=h[34].connectionLine),y[3]&64&&(v.$$scope={dirty:y,ctx:h}),i.$set(v);const m={};y[0]&8388608&&(m.nodeClickDistance=h[23]),u.$set(m)},i(h){f||(j(t.$$.fragment,h),j(i.$$.fragment,h),j(u.$$.fragment,h),j(d.$$.fragment,h),f=!0)},o(h){Q(t.$$.fragment,h),Q(i.$$.fragment,h),Q(u.$$.fragment,h),Q(d.$$.fragment,h),f=!1},d(h){h&&(W(n),W(o),W(r),W(s),W(l),W(a),W(c)),le(t,h),le(i,h),le(u,h),le(d,h)}}}function ph(e){let t,n,i,o;return t=new y1({props:{$$slots:{default:[bh]},$$scope:{ctx:e}}}),i=new q1({}),{c(){se(t.$$.fragment),n=ce(),se(i.$$.fragment)},m(r,s){re(t,r,s),F(r,n,s),re(i,r,s),o=!0},p(r,s){const l={};s[0]&10485952|s[1]&8|s[3]&64&&(l.$$scope={dirty:s,ctx:r}),t.$set(l)},i(r){o||(j(t.$$.fragment,r),j(i.$$.fragment,r),o=!0)},o(r){Q(t.$$.fragment,r),Q(i.$$.fragment,r),o=!1},d(r){r&&W(n),le(t,r),le(i,r)}}}function wh(e){let t,n;return t=new h1({props:{panOnDrag:e[17]===void 0?!0:e[17],selectionOnDrag:e[18],$$slots:{default:[ph]},$$scope:{ctx:e}}}),t.$on("paneclick",e[95]),t.$on("panecontextmenu",e[96]),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,o){const r={};o[0]&131072&&(r.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(r.selectionOnDrag=i[18]),o[0]&10485952|o[1]&8|o[3]&64&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function kh(e){let t,n,i,o,r,s,l,a,u,c,d,f;n=new eh({props:{selectionKey:e[1],deleteKey:e[5],panActivationKey:e[2],multiSelectionKey:e[3],zoomActivationKey:e[4]}}),o=new c1({props:{initialViewport:e[31],onMoveStart:e[8],onMove:e[9],onMoveEnd:e[10],panOnScrollMode:e[11]===void 0?ut.Free:e[11],preventScrolling:e[12]===void 0?!0:e[12],zoomOnScroll:e[13]===void 0?!0:e[13],zoomOnDoubleClick:e[14]===void 0?!0:e[14],zoomOnPinch:e[15]===void 0?!0:e[15],panOnScroll:e[16]===void 0?!1:e[16],panOnDrag:e[17]===void 0?!0:e[17],paneClickDistance:e[22]===void 0?0:e[22],$$slots:{default:[wh]},$$scope:{ctx:e}}}),s=new fh({props:{proOptions:e[20],position:e[19]}});const h=e[75].default,y=Ue(h,e,e[99],null);let _=[{style:e[24]},{class:a=Oe(["svelte-flow",e[25],e[30]])},{"data-testid":"svelte-flow__wrapper"},e[33],{role:"application"}],v={};for(let m=0;m<_.length;m+=1)v=Ee(v,_[m]);return{c(){t=x("div"),se(n.$$.fragment),i=ce(),se(o.$$.fragment),r=ce(),se(s.$$.fragment),l=ce(),y&&y.c(),Zn(t,v),Un(()=>e[98].call(t)),ae(t,"svelte-18e9ir1",!0)},m(m,b){F(m,t,b),re(n,t,null),K(t,i),re(o,t,null),K(t,r),re(s,t,null),K(t,l),y&&y.m(t,null),e[97](t),u=zs(t,e[98].bind(t)),c=!0,d||(f=[fe(t,"dragover",e[76]),fe(t,"drop",e[77])],d=!0)},p(m,b){const p={};b[0]&2&&(p.selectionKey=m[1]),b[0]&32&&(p.deleteKey=m[5]),b[0]&4&&(p.panActivationKey=m[2]),b[0]&8&&(p.multiSelectionKey=m[3]),b[0]&16&&(p.zoomActivationKey=m[4]),n.$set(p);const k={};b[0]&256&&(k.onMoveStart=m[8]),b[0]&512&&(k.onMove=m[9]),b[0]&1024&&(k.onMoveEnd=m[10]),b[0]&2048&&(k.panOnScrollMode=m[11]===void 0?ut.Free:m[11]),b[0]&4096&&(k.preventScrolling=m[12]===void 0?!0:m[12]),b[0]&8192&&(k.zoomOnScroll=m[13]===void 0?!0:m[13]),b[0]&16384&&(k.zoomOnDoubleClick=m[14]===void 0?!0:m[14]),b[0]&32768&&(k.zoomOnPinch=m[15]===void 0?!0:m[15]),b[0]&65536&&(k.panOnScroll=m[16]===void 0?!1:m[16]),b[0]&131072&&(k.panOnDrag=m[17]===void 0?!0:m[17]),b[0]&4194304&&(k.paneClickDistance=m[22]===void 0?0:m[22]),b[0]&10879168|b[1]&8|b[3]&64&&(k.$$scope={dirty:b,ctx:m}),o.$set(k);const E={};b[0]&1048576&&(E.proOptions=m[20]),b[0]&524288&&(E.position=m[19]),s.$set(E),y&&y.p&&(!c||b[3]&64)&&Je(y,h,m,m[99],c?Qe(h,m[99],b,null):xe(m[99]),null),Zn(t,v=Ji(_,[(!c||b[0]&16777216)&&{style:m[24]},(!c||b[0]&1107296256&&a!==(a=Oe(["svelte-flow",m[25],m[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},b[1]&4&&m[33],{role:"application"}])),ae(t,"svelte-18e9ir1",!0)},i(m){c||(j(n.$$.fragment,m),j(o.$$.fragment,m),j(s.$$.fragment,m),j(y,m),c=!0)},o(m){Q(n.$$.fragment,m),Q(o.$$.fragment,m),Q(s.$$.fragment,m),Q(y,m),c=!1},d(m){m&&W(t),le(n),le(o),le(s),y&&y.d(m),e[97](null),u(),d=!1,Ie(f)}}}function vh(e,t,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let r=De(t,o),s,l,a=we,u=()=>(a(),a=Tt(S,O=>n(100,l=O)),S),c,d=we,f=()=>(d(),d=Tt(i,O=>n(30,c=O)),i);e.$$.on_destroy.push(()=>a()),e.$$.on_destroy.push(()=>d());let{$$slots:h={},$$scope:y}=t;const _=Ps(h);let{id:v="1"}=t,{nodes:m}=t,{edges:b}=t,{fitView:p=void 0}=t,{fitViewOptions:k=void 0}=t,{minZoom:E=void 0}=t,{maxZoom:A=void 0}=t,{initialViewport:M=void 0}=t,{viewport:S=void 0}=t;u();let{nodeTypes:T=void 0}=t,{edgeTypes:P=void 0}=t,{selectionKey:H=void 0}=t,{selectionMode:B=void 0}=t,{panActivationKey:R=void 0}=t,{multiSelectionKey:w=void 0}=t,{zoomActivationKey:N=void 0}=t,{nodesDraggable:C=void 0}=t,{nodesConnectable:L=void 0}=t,{nodeDragThreshold:X=void 0}=t,{elementsSelectable:z=void 0}=t,{snapGrid:I=void 0}=t,{deleteKey:q=void 0}=t,{connectionRadius:U=void 0}=t,{connectionLineType:G=void 0}=t,{connectionMode:V=At.Strict}=t,{connectionLineStyle:ee=""}=t,{connectionLineContainerStyle:ne=""}=t,{onMoveStart:de=void 0}=t,{onMove:me=void 0}=t,{onMoveEnd:J=void 0}=t,{isValidConnection:ie=void 0}=t,{translateExtent:_e=void 0}=t,{nodeExtent:be=void 0}=t,{onlyRenderVisibleElements:ve=void 0}=t,{panOnScrollMode:Z=ut.Free}=t,{preventScrolling:Ne=!0}=t,{zoomOnScroll:Re=!0}=t,{zoomOnDoubleClick:qe=!0}=t,{zoomOnPinch:Ce=!0}=t,{panOnScroll:ot=!1}=t,{panOnDrag:Ct=!0}=t,{selectionOnDrag:St=void 0}=t,{autoPanOnConnect:yt=!0}=t,{autoPanOnNodeDrag:_t=!0}=t,{onerror:bt=void 0}=t,{ondelete:pt=void 0}=t,{onedgecreate:Nt=void 0}=t,{attributionPosition:$e=void 0}=t,{proOptions:rt=void 0}=t,{defaultEdgeOptions:D=void 0}=t,{width:je=void 0}=t,{height:Te=void 0}=t,{colorMode:Me="light"}=t,{onconnect:Lt=void 0}=t,{onconnectstart:Vt=void 0}=t,{onconnectend:Rt=void 0}=t,{onbeforedelete:Xt=void 0}=t,{oninit:wt=void 0}=t,{nodeOrigin:Et=void 0}=t,{paneClickDistance:On=0}=t,{nodeClickDistance:ho=0}=t,{defaultMarkerColor:ki="#b1b1b7"}=t,{style:go=void 0}=t,{class:mo=void 0}=t,Tn,Yt,Wt;const es=l||M,We=As(wi)?Ae():l1({nodes:Y(m),edges:Y(b),width:je,height:Te,fitView:p,nodeOrigin:Et,nodeExtent:be});Cn(()=>(We.width.set(Yt),We.height.set(Wt),We.domNode.set(Tn),We.syncNodeStores(m),We.syncEdgeStores(b),We.syncViewport(S),p!==void 0&&We.fitViewQueued.set(p),k&&We.fitViewOptions.set(k),pr(We,{nodeTypes:T,edgeTypes:P,minZoom:E,maxZoom:A,translateExtent:_e,paneClickDistance:On}),()=>{We.reset()}));const{initialized:yo}=We;$(e,yo,O=>n(74,s=O));let vi=!1;function ts(O){ke.call(this,e,O)}function ns(O){ke.call(this,e,O)}function is(O){ke.call(this,e,O)}function os(O){ke.call(this,e,O)}function rs(O){ke.call(this,e,O)}function ls(O){ke.call(this,e,O)}function ss(O){ke.call(this,e,O)}function as(O){ke.call(this,e,O)}function us(O){ke.call(this,e,O)}function cs(O){ke.call(this,e,O)}function fs(O){ke.call(this,e,O)}function ds(O){ke.call(this,e,O)}function hs(O){ke.call(this,e,O)}function gs(O){ke.call(this,e,O)}function ms(O){ke.call(this,e,O)}function ys(O){ke.call(this,e,O)}function _s(O){ke.call(this,e,O)}function bs(O){ke.call(this,e,O)}function ps(O){ke.call(this,e,O)}function ws(O){ke.call(this,e,O)}function ks(O){ke.call(this,e,O)}function vs(O){zt[O?"unshift":"push"](()=>{Tn=O,n(28,Tn)})}function Cs(){Yt=this.clientWidth,Wt=this.clientHeight,n(26,Yt),n(27,Wt)}return e.$$set=O=>{t=Ee(Ee({},t),ct(O)),n(33,r=De(t,o)),"id"in O&&n(35,v=O.id),"nodes"in O&&n(36,m=O.nodes),"edges"in O&&n(37,b=O.edges),"fitView"in O&&n(38,p=O.fitView),"fitViewOptions"in O&&n(39,k=O.fitViewOptions),"minZoom"in O&&n(40,E=O.minZoom),"maxZoom"in O&&n(41,A=O.maxZoom),"initialViewport"in O&&n(42,M=O.initialViewport),"viewport"in O&&u(n(0,S=O.viewport)),"nodeTypes"in O&&n(43,T=O.nodeTypes),"edgeTypes"in O&&n(44,P=O.edgeTypes),"selectionKey"in O&&n(1,H=O.selectionKey),"selectionMode"in O&&n(45,B=O.selectionMode),"panActivationKey"in O&&n(2,R=O.panActivationKey),"multiSelectionKey"in O&&n(3,w=O.multiSelectionKey),"zoomActivationKey"in O&&n(4,N=O.zoomActivationKey),"nodesDraggable"in O&&n(46,C=O.nodesDraggable),"nodesConnectable"in O&&n(47,L=O.nodesConnectable),"nodeDragThreshold"in O&&n(48,X=O.nodeDragThreshold),"elementsSelectable"in O&&n(49,z=O.elementsSelectable),"snapGrid"in O&&n(50,I=O.snapGrid),"deleteKey"in O&&n(5,q=O.deleteKey),"connectionRadius"in O&&n(51,U=O.connectionRadius),"connectionLineType"in O&&n(52,G=O.connectionLineType),"connectionMode"in O&&n(53,V=O.connectionMode),"connectionLineStyle"in O&&n(6,ee=O.connectionLineStyle),"connectionLineContainerStyle"in O&&n(7,ne=O.connectionLineContainerStyle),"onMoveStart"in O&&n(8,de=O.onMoveStart),"onMove"in O&&n(9,me=O.onMove),"onMoveEnd"in O&&n(10,J=O.onMoveEnd),"isValidConnection"in O&&n(54,ie=O.isValidConnection),"translateExtent"in O&&n(55,_e=O.translateExtent),"nodeExtent"in O&&n(56,be=O.nodeExtent),"onlyRenderVisibleElements"in O&&n(57,ve=O.onlyRenderVisibleElements),"panOnScrollMode"in O&&n(11,Z=O.panOnScrollMode),"preventScrolling"in O&&n(12,Ne=O.preventScrolling),"zoomOnScroll"in O&&n(13,Re=O.zoomOnScroll),"zoomOnDoubleClick"in O&&n(14,qe=O.zoomOnDoubleClick),"zoomOnPinch"in O&&n(15,Ce=O.zoomOnPinch),"panOnScroll"in O&&n(16,ot=O.panOnScroll),"panOnDrag"in O&&n(17,Ct=O.panOnDrag),"selectionOnDrag"in O&&n(18,St=O.selectionOnDrag),"autoPanOnConnect"in O&&n(58,yt=O.autoPanOnConnect),"autoPanOnNodeDrag"in O&&n(59,_t=O.autoPanOnNodeDrag),"onerror"in O&&n(60,bt=O.onerror),"ondelete"in O&&n(61,pt=O.ondelete),"onedgecreate"in O&&n(62,Nt=O.onedgecreate),"attributionPosition"in O&&n(19,$e=O.attributionPosition),"proOptions"in O&&n(20,rt=O.proOptions),"defaultEdgeOptions"in O&&n(21,D=O.defaultEdgeOptions),"width"in O&&n(63,je=O.width),"height"in O&&n(64,Te=O.height),"colorMode"in O&&n(65,Me=O.colorMode),"onconnect"in O&&n(66,Lt=O.onconnect),"onconnectstart"in O&&n(67,Vt=O.onconnectstart),"onconnectend"in O&&n(68,Rt=O.onconnectend),"onbeforedelete"in O&&n(69,Xt=O.onbeforedelete),"oninit"in O&&n(70,wt=O.oninit),"nodeOrigin"in O&&n(71,Et=O.nodeOrigin),"paneClickDistance"in O&&n(22,On=O.paneClickDistance),"nodeClickDistance"in O&&n(23,ho=O.nodeClickDistance),"defaultMarkerColor"in O&&n(72,ki=O.defaultMarkerColor),"style"in O&&n(24,go=O.style),"class"in O&&n(25,mo=O.class),"$$scope"in O&&n(99,y=O.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&201326592&&Yt!==void 0&&Wt!==void 0&&(We.width.set(Yt),We.height.set(Wt)),e.$$.dirty[2]&6400&&!vi&&s&&(wt==null||wt(),n(73,vi=!0)),e.$$.dirty[1]&2097135632|e.$$.dirty[2]&1777&&hh(We,{flowId:v,connectionLineType:G,connectionRadius:U,selectionMode:B,snapGrid:I,defaultMarkerColor:ki,nodesDraggable:C,nodesConnectable:L,elementsSelectable:z,onlyRenderVisibleElements:ve,isValidConnection:ie,autoPanOnConnect:yt,autoPanOnNodeDrag:_t,onerror:bt,ondelete:pt,onedgecreate:Nt,connectionMode:V,nodeDragThreshold:X,onconnect:Lt,onconnectstart:Vt,onconnectend:Rt,onbeforedelete:Xt,nodeOrigin:Et}),e.$$.dirty[0]&4194304|e.$$.dirty[1]&16791040&&pr(We,{nodeTypes:T,edgeTypes:P,minZoom:E,maxZoom:A,translateExtent:_e,paneClickDistance:On}),e.$$.dirty[2]&8&&f(n(29,i=mh(Me)))},[S,H,R,w,N,q,ee,ne,de,me,J,Z,Ne,Re,qe,Ce,ot,Ct,St,$e,rt,D,On,ho,go,mo,Yt,Wt,Tn,i,c,es,yo,r,_,v,m,b,p,k,E,A,M,T,P,B,C,L,X,z,I,U,G,V,ie,_e,be,ve,yt,_t,bt,pt,Nt,je,Te,Me,Lt,Vt,Rt,Xt,wt,Et,ki,vi,s,h,ts,ns,is,os,rs,ls,ss,as,us,cs,fs,ds,hs,gs,ms,ys,_s,bs,ps,ws,ks,vs,Cs,y]}class Ch extends ge{constructor(t){super(),he(this,t,vh,kh,ye,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}}function Sh(e){let t;const n=e[7].default,i=Ue(n,e,e[6],null);return{c(){i&&i.c()},m(o,r){i&&i.m(o,r),t=!0},p(o,[r]){i&&i.p&&(!t||r&64)&&Je(i,n,o,o[6],t?Qe(n,o[6],r,null):xe(o[6]),null)},i(o){t||(j(i,o),t=!0)},o(o){Q(i,o),t=!1},d(o){i&&i.d(o)}}}function Nh(e,t,n){let{$$slots:i={},$$scope:o}=t,{initialNodes:r=void 0}=t,{initialEdges:s=void 0}=t,{initialWidth:l=void 0}=t,{initialHeight:a=void 0}=t,{fitView:u=void 0}=t,{nodeOrigin:c=void 0}=t;const d=jl({nodes:r,edges:s,width:l,height:a,nodeOrigin:c,fitView:u});return $t(wi,{getStore:()=>d}),Gi(()=>{d.reset()}),e.$$set=f=>{"initialNodes"in f&&n(0,r=f.initialNodes),"initialEdges"in f&&n(1,s=f.initialEdges),"initialWidth"in f&&n(2,l=f.initialWidth),"initialHeight"in f&&n(3,a=f.initialHeight),"fitView"in f&&n(4,u=f.fitView),"nodeOrigin"in f&&n(5,c=f.nodeOrigin),"$$scope"in f&&n(6,o=f.$$scope)},[r,s,l,a,u,c,o,i]}class Eh extends ge{constructor(t){super(),he(this,t,Nh,Sh,ye,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}var vt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(vt||(vt={}));function Ph(e){let t,n;return{c(){t=oe("circle"),g(t,"cx",e[0]),g(t,"cy",e[0]),g(t,"r",e[0]),g(t,"class",n=Oe(["svelte-flow__background-pattern","dots",e[1]]))},m(i,o){F(i,t,o)},p(i,[o]){o&1&&g(t,"cx",i[0]),o&1&&g(t,"cy",i[0]),o&1&&g(t,"r",i[0]),o&2&&n!==(n=Oe(["svelte-flow__background-pattern","dots",i[1]]))&&g(t,"class",n)},i:we,o:we,d(i){i&&W(t)}}}function Mh(e,t,n){let{radius:i=5}=t,{class:o=""}=t;return e.$$set=r=>{"radius"in r&&n(0,i=r.radius),"class"in r&&n(1,o=r.class)},[i,o]}class Oh extends ge{constructor(t){super(),he(this,t,Mh,Ph,ye,{radius:0,class:1})}}function Th(e){let t,n,i;return{c(){t=oe("path"),g(t,"stroke-width",e[0]),g(t,"d",n=`M${e[1][0]/2} 0 V${e[1][1]} M0 ${e[1][1]/2} H${e[1][0]}`),g(t,"class",i=Oe(["svelte-flow__background-pattern",e[2],e[3]]))},m(o,r){F(o,t,r)},p(o,[r]){r&1&&g(t,"stroke-width",o[0]),r&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&g(t,"d",n),r&12&&i!==(i=Oe(["svelte-flow__background-pattern",o[2],o[3]]))&&g(t,"class",i)},i:we,o:we,d(o){o&&W(t)}}}function zh(e,t,n){let{lineWidth:i=1}=t,{dimensions:o}=t,{variant:r=void 0}=t,{class:s=""}=t;return e.$$set=l=>{"lineWidth"in l&&n(0,i=l.lineWidth),"dimensions"in l&&n(1,o=l.dimensions),"variant"in l&&n(2,r=l.variant),"class"in l&&n(3,s=l.class)},[i,o,r,s]}class Dh extends ge{constructor(t){super(),he(this,t,zh,Th,ye,{lineWidth:0,dimensions:1,variant:2,class:3})}}function Ah(e){let t,n;return t=new Dh({props:{dimensions:e[6],variant:e[0],lineWidth:e[1],class:e[4]}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,o){const r={};o&64&&(r.dimensions=i[6]),o&1&&(r.variant=i[0]),o&2&&(r.lineWidth=i[1]),o&16&&(r.class=i[4]),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function Ih(e){let t,n;return t=new Oh({props:{radius:e[7]/2,class:e[4]}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,o){const r={};o&128&&(r.radius=i[7]/2),o&16&&(r.class=i[4]),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function Hh(e){let t,n,i,o,r,s,l,a,u,c,d,f,h;const y=[Ih,Ah],_=[];function v(m,b){return m[14]?0:1}return i=v(e),o=_[i]=y[i](e),{c(){t=oe("svg"),n=oe("pattern"),o.c(),c=oe("rect"),g(n,"id",e[11]),g(n,"x",r=e[9].x%e[8][0]),g(n,"y",s=e[9].y%e[8][1]),g(n,"width",l=e[8][0]),g(n,"height",a=e[8][1]),g(n,"patternUnits","userSpaceOnUse"),g(n,"patternTransform",u=`translate(-${e[10][0]},-${e[10][1]})`),g(c,"x","0"),g(c,"y","0"),g(c,"width","100%"),g(c,"height","100%"),g(c,"fill",d=`url(#${e[11]})`),g(t,"class",f=Le(Oe(["svelte-flow__background",e[5]]))+" svelte-1r7pe8d"),g(t,"data-testid","svelte-flow__background"),pe(t,"--xy-background-color-props",e[2]),pe(t,"--xy-background-pattern-color-props",e[3])},m(m,b){F(m,t,b),K(t,n),_[i].m(n,null),K(t,c),h=!0},p(m,[b]){o.p(m,b),(!h||b&2048)&&g(n,"id",m[11]),(!h||b&768&&r!==(r=m[9].x%m[8][0]))&&g(n,"x",r),(!h||b&768&&s!==(s=m[9].y%m[8][1]))&&g(n,"y",s),(!h||b&256&&l!==(l=m[8][0]))&&g(n,"width",l),(!h||b&256&&a!==(a=m[8][1]))&&g(n,"height",a),(!h||b&1024&&u!==(u=`translate(-${m[10][0]},-${m[10][1]})`))&&g(n,"patternTransform",u),(!h||b&2048&&d!==(d=`url(#${m[11]})`))&&g(c,"fill",d),(!h||b&32&&f!==(f=Le(Oe(["svelte-flow__background",m[5]]))+" svelte-1r7pe8d"))&&g(t,"class",f),b&4&&pe(t,"--xy-background-color-props",m[2]),b&8&&pe(t,"--xy-background-pattern-color-props",m[3])},i(m){h||(j(o),h=!0)},o(m){Q(o),h=!1},d(m){m&&W(t),_[i].d()}}}const Lh={[vt.Dots]:1,[vt.Lines]:1,[vt.Cross]:6};function Vh(e,t,n){let i,o,r,s,l,a,u,{id:c=void 0}=t,{variant:d=vt.Dots}=t,{gap:f=20}=t,{size:h=1}=t,{lineWidth:y=1}=t,{bgColor:_=void 0}=t,{patternColor:v=void 0}=t,{patternClass:m=void 0}=t,{class:b=""}=t;const{viewport:p,flowId:k}=Ae();$(e,p,T=>n(9,a=T)),$(e,k,T=>n(18,u=T));const E=h||Lh[d],A=d===vt.Dots,M=d===vt.Cross,S=Array.isArray(f)?f:[f,f];return e.$$set=T=>{"id"in T&&n(15,c=T.id),"variant"in T&&n(0,d=T.variant),"gap"in T&&n(16,f=T.gap),"size"in T&&n(17,h=T.size),"lineWidth"in T&&n(1,y=T.lineWidth),"bgColor"in T&&n(2,_=T.bgColor),"patternColor"in T&&n(3,v=T.patternColor),"patternClass"in T&&n(4,m=T.patternClass),"class"in T&&n(5,b=T.class)},e.$$.update=()=>{e.$$.dirty&294912&&n(11,i=`background-pattern-${u}-${c||""}`),e.$$.dirty&512&&n(8,o=[S[0]*a.zoom||1,S[1]*a.zoom||1]),e.$$.dirty&512&&n(7,r=E*a.zoom),e.$$.dirty&384&&n(6,s=M?[r,r]:o),e.$$.dirty&192&&n(10,l=A?[r/2,r/2]:[s[0]/2,s[1]/2])},[d,y,_,v,m,b,s,r,o,a,l,i,p,k,A,c,f,h,u]}class Rh extends ge{constructor(t){super(),he(this,t,Vh,Hh,ye,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}const kr=e=>vf(e);function Xh(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:i,snapGrid:o,viewport:r,width:s,height:l,minZoom:a,maxZoom:u,panZoom:c,nodes:d,edges:f,domNode:h,nodeLookup:y,nodeOrigin:_,edgeLookup:v,connectionLookup:m}=Ae(),b=E=>{var P,H;const A=Y(y),M=kr(E)?E:A.get(E.id),S=M.parentId?zf(M.position,M.measured,M.parentId,A,Y(_)):M.position,T={...M,position:S,width:((P=M.measured)==null?void 0:P.width)??M.width,height:((H=M.measured)==null?void 0:H.height)??M.height};return rn(T)},p=(E,A,M={replace:!1})=>{var P;const S=(P=Y(y).get(E))==null?void 0:P.internals.userNode;if(!S)return;const T=typeof A=="function"?A(S):A;M.replace?d.update(H=>H.map(B=>B.id===E?kr(T)?T:{...B,...T}:B)):(Object.assign(S,T),d.update(H=>H))},k=E=>Y(y).get(E);return{zoomIn:e,zoomOut:t,getInternalNode:k,getNode:E=>{var A;return(A=k(E))==null?void 0:A.internals.userNode},getNodes:E=>E===void 0?Y(d):vr(Y(y),E),getEdge:E=>Y(v).get(E),getEdges:E=>E===void 0?Y(f):vr(Y(v),E),setZoom:(E,A)=>{const M=Y(c);return M?M.scaleTo(E,{duration:A==null?void 0:A.duration}):Promise.resolve(!1)},getZoom:()=>Y(r).zoom,setViewport:async(E,A)=>{const M=Y(r),S=Y(c);return S?(await S.setViewport({x:E.x??M.x,y:E.y??M.y,zoom:E.zoom??M.zoom},{duration:A==null?void 0:A.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Y(r),setCenter:async(E,A,M)=>{const S=typeof(M==null?void 0:M.zoom)<"u"?M.zoom:Y(u),T=Y(c);return T?(await T.setViewport({x:Y(s)/2-E*S,y:Y(l)/2-A*S,zoom:S},{duration:M==null?void 0:M.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(E,A)=>{const M=Y(c);if(!M)return Promise.resolve(!1);const S=lo(E,Y(s),Y(l),Y(a),Y(u),(A==null?void 0:A.padding)??.1);return await M.setViewport(S,{duration:A==null?void 0:A.duration}),Promise.resolve(!0)},getIntersectingNodes:(E,A=!0,M)=>{const S=Ko(E),T=S?E:b(E);return T?(M||Y(d)).filter(P=>{const H=Y(y).get(P.id);if(!H||!S&&P.id===E.id)return!1;const B=rn(H),R=kn(B,T);return A&&R>0||R>=T.width*T.height}):[]},isNodeIntersecting:(E,A,M=!0)=>{const T=Ko(E)?E:b(E);if(!T)return!1;const P=kn(T,A);return M&&P>0||P>=T.width*T.height},deleteElements:async({nodes:E=[],edges:A=[]})=>{const{nodes:M,edges:S}=await Sl({nodesToRemove:E,edgesToRemove:A,nodes:Y(d),edges:Y(f),onBeforeDelete:Y(i)});return M&&d.update(T=>T.filter(P=>!M.some(({id:H})=>H===P.id))),S&&f.update(T=>T.filter(P=>!S.some(({id:H})=>H===P.id))),{deletedNodes:M,deletedEdges:S}},screenToFlowPosition:(E,A={snapToGrid:!0})=>{const M=Y(h);if(!M)return E;const S=A.snapToGrid?Y(o):!1,{x:T,y:P,zoom:H}=Y(r),{x:B,y:R}=M.getBoundingClientRect(),w={x:E.x-B,y:E.y-R};return Mn(w,[T,P,H],S!==null,S||[1,1])},flowToScreenPosition:E=>{const A=Y(h);if(!A)return E;const{x:M,y:S,zoom:T}=Y(r),{x:P,y:H}=A.getBoundingClientRect(),B=li(E,[M,S,T]);return{x:B.x+P,y:B.y+H}},toObject:()=>({nodes:Y(d).map(E=>({...E,position:{...E.position},data:{...E.data}})),edges:Y(f).map(E=>({...E})),viewport:{...Y(r)}}),updateNode:p,updateNodeData:(E,A,M)=>{var P;const S=(P=Y(y).get(E))==null?void 0:P.internals.userNode;if(!S)return;const T=typeof A=="function"?A(S):A;S.data=M!=null&&M.replace?T:{...S.data,...T},d.update(H=>H)},getNodesBounds:E=>{const A=Y(y),M=Y(_);return Cf(E,{nodeLookup:A,nodeOrigin:M})},getHandleConnections:({type:E,id:A,nodeId:M})=>{var S;return Array.from(((S=Y(m).get(`${M}-${E}-${A??null}`))==null?void 0:S.values())??[])},viewport:r}}function vr(e,t){var i;const n=[];for(const o of t){const r=e.get(o);if(r){const s="internals"in r?(i=r.internals)==null?void 0:i.userNode:r;n.push(s)}}return n}function Yh(){const{edges:e}=Ae();return e}function Wh(e){let t,n,i,o,r,s,l,a,u=e[3]?"Running...":"Run",c,d,f,h,y,_,v,m,b;return{c(){t=x("nav"),n=x("div"),n.innerHTML='<div class="navbar-item"><img alt="Datamarkin logo" src="/logo.png" width="120" height="24"/></div>',i=ce(),o=x("div"),r=x("div"),s=x("div"),l=x("div"),a=x("button"),c=Pe(u),d=ce(),f=x("button"),f.textContent="Export",h=ce(),y=x("button"),y.textContent="Import",_=ce(),v=x("input"),g(n,"class","navbar-brand"),g(a,"class","button is-dark"),a.disabled=e[3],g(f,"class","button is-dark"),g(y,"class","button"),g(l,"class","buttons"),g(s,"class","navbar-item"),g(r,"class","navbar-end"),g(o,"class","navbar-menu"),g(v,"type","file"),g(v,"accept",".json"),g(v,"class","is-hidden"),g(t,"class","navbar is-fixed-top border-bottom"),g(t,"aria-label","main navigation")},m(p,k){F(p,t,k),K(t,n),K(t,i),K(t,o),K(o,r),K(r,s),K(s,l),K(l,a),K(a,c),K(l,d),K(l,f),K(l,h),K(l,y),K(t,_),K(t,v),e[6](v),m||(b=[fe(a,"click",function(){Se(e[0])&&e[0].apply(this,arguments)}),fe(f,"click",function(){Se(e[1])&&e[1].apply(this,arguments)}),fe(y,"click",e[5]),fe(v,"change",function(){Se(e[2])&&e[2].apply(this,arguments)})],m=!0)},p(p,[k]){e=p,k&8&&u!==(u=e[3]?"Running...":"Run")&&Ve(c,u),k&8&&(a.disabled=e[3])},i:we,o:we,d(p){p&&W(t),e[6](null),m=!1,Ie(b)}}}function Bh(e,t,n){let{executeWorkflow:i}=t,{exportWorkflow:o}=t,{importWorkflow:r}=t,{isExecuting:s}=t,l;function a(){l.click()}function u(c){zt[c?"unshift":"push"](()=>{l=c,n(4,l)})}return e.$$set=c=>{"executeWorkflow"in c&&n(0,i=c.executeWorkflow),"exportWorkflow"in c&&n(1,o=c.exportWorkflow),"importWorkflow"in c&&n(2,r=c.importWorkflow),"isExecuting"in c&&n(3,s=c.isExecuting)},[i,o,r,s,l,a,u]}class Kh extends ge{constructor(t){super(),he(this,t,Bh,Wh,ye,{executeWorkflow:0,exportWorkflow:1,importWorkflow:2,isExecuting:3})}}function Fh(e){let t,n,i,o;return{c(){t=oe("svg"),n=oe("circle"),i=oe("path"),g(n,"cx","12"),g(n,"cy","12"),g(n,"r","3"),g(n,"stroke","currentColor"),g(n,"stroke-width","2"),g(i,"d","M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z"),g(i,"stroke","currentColor"),g(i,"stroke-width","2"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(t,"class",o=Le(e[1])+" svelte-12k1hse"),g(t,"width",e[2]),g(t,"height",e[2]),g(t,"viewBox","0 0 24 24"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg")},m(r,s){F(r,t,s),K(t,n),K(t,i)},p(r,s){s&2&&o!==(o=Le(r[1])+" svelte-12k1hse")&&g(t,"class",o),s&4&&g(t,"width",r[2]),s&4&&g(t,"height",r[2])},d(r){r&&W(t)}}}function qh(e){let t,n,i,o,r;return{c(){t=oe("svg"),n=oe("path"),i=oe("path"),o=oe("path"),g(n,"d","M8 18L12 22L16 18"),g(n,"stroke","currentColor"),g(n,"stroke-width","2"),g(n,"stroke-linecap","round"),g(n,"stroke-linejoin","round"),g(i,"d","M12 2V22"),g(i,"stroke","currentColor"),g(i,"stroke-width","2"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(o,"d","M16 6L12 2L8 6"),g(o,"stroke","currentColor"),g(o,"stroke-width","2"),g(o,"stroke-linecap","round"),g(o,"stroke-linejoin","round"),g(t,"class",r=Le(e[1])+" svelte-12k1hse"),g(t,"width",e[2]),g(t,"height",e[2]),g(t,"viewBox","0 0 24 24"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg")},m(s,l){F(s,t,l),K(t,n),K(t,i),K(t,o)},p(s,l){l&2&&r!==(r=Le(s[1])+" svelte-12k1hse")&&g(t,"class",r),l&4&&g(t,"width",s[2]),l&4&&g(t,"height",s[2])},d(s){s&&W(t)}}}function Zh(e){let t,n,i,o;return{c(){t=oe("svg"),n=oe("path"),i=oe("circle"),g(n,"d","M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z"),g(n,"stroke","currentColor"),g(n,"stroke-width","2"),g(i,"cx","12"),g(i,"cy","12"),g(i,"r","3"),g(i,"stroke","currentColor"),g(i,"stroke-width","2"),g(t,"class",o=Le(e[1])+" svelte-12k1hse"),g(t,"width",e[2]),g(t,"height",e[2]),g(t,"viewBox","0 0 24 24"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg")},m(r,s){F(r,t,s),K(t,n),K(t,i)},p(r,s){s&2&&o!==(o=Le(r[1])+" svelte-12k1hse")&&g(t,"class",o),s&4&&g(t,"width",r[2]),s&4&&g(t,"height",r[2])},d(r){r&&W(t)}}}function jh(e){let t,n,i,o,r;return{c(){t=oe("svg"),n=oe("path"),i=oe("path"),o=oe("path"),g(n,"d","M3 3V21H21"),g(n,"stroke","currentColor"),g(n,"stroke-width","2"),g(n,"stroke-linecap","round"),g(n,"stroke-linejoin","round"),g(i,"d","M9 9L12 6L16 10L21 5"),g(i,"stroke","currentColor"),g(i,"stroke-width","2"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(o,"d","M21 9V5H17"),g(o,"stroke","currentColor"),g(o,"stroke-width","2"),g(o,"stroke-linecap","round"),g(o,"stroke-linejoin","round"),g(t,"class",r=Le(e[1])+" svelte-12k1hse"),g(t,"width",e[2]),g(t,"height",e[2]),g(t,"viewBox","0 0 24 24"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg")},m(s,l){F(s,t,l),K(t,n),K(t,i),K(t,o)},p(s,l){l&2&&r!==(r=Le(s[1])+" svelte-12k1hse")&&g(t,"class",r),l&4&&g(t,"width",s[2]),l&4&&g(t,"height",s[2])},d(s){s&&W(t)}}}function Gh(e){let t,n,i;return{c(){t=oe("svg"),n=oe("path"),g(n,"d","M22 3H2L10 12.46V19L14 21V12.46L22 3Z"),g(n,"stroke","currentColor"),g(n,"stroke-width","2"),g(n,"stroke-linejoin","round"),g(t,"class",i=Le(e[1])+" svelte-12k1hse"),g(t,"width",e[2]),g(t,"height",e[2]),g(t,"viewBox","0 0 24 24"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg")},m(o,r){F(o,t,r),K(t,n)},p(o,r){r&2&&i!==(i=Le(o[1])+" svelte-12k1hse")&&g(t,"class",i),r&4&&g(t,"width",o[2]),r&4&&g(t,"height",o[2])},d(o){o&&W(t)}}}function Uh(e){let t,n,i,o,r,s,l,a,u,c,d;return{c(){t=oe("svg"),n=oe("path"),i=oe("path"),o=oe("path"),r=oe("path"),s=oe("path"),l=oe("path"),a=oe("path"),u=oe("path"),c=oe("path"),g(n,"d","M4 21V14"),g(n,"stroke","currentColor"),g(n,"stroke-width","2"),g(n,"stroke-linecap","round"),g(n,"stroke-linejoin","round"),g(i,"d","M4 10V3"),g(i,"stroke","currentColor"),g(i,"stroke-width","2"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(o,"d","M12 21V12"),g(o,"stroke","currentColor"),g(o,"stroke-width","2"),g(o,"stroke-linecap","round"),g(o,"stroke-linejoin","round"),g(r,"d","M12 8V3"),g(r,"stroke","currentColor"),g(r,"stroke-width","2"),g(r,"stroke-linecap","round"),g(r,"stroke-linejoin","round"),g(s,"d","M20 21V16"),g(s,"stroke","currentColor"),g(s,"stroke-width","2"),g(s,"stroke-linecap","round"),g(s,"stroke-linejoin","round"),g(l,"d","M20 12V3"),g(l,"stroke","currentColor"),g(l,"stroke-width","2"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(a,"d","M1 14H7"),g(a,"stroke","currentColor"),g(a,"stroke-width","2"),g(a,"stroke-linecap","round"),g(a,"stroke-linejoin","round"),g(u,"d","M9 8H15"),g(u,"stroke","currentColor"),g(u,"stroke-width","2"),g(u,"stroke-linecap","round"),g(u,"stroke-linejoin","round"),g(c,"d","M17 16H23"),g(c,"stroke","currentColor"),g(c,"stroke-width","2"),g(c,"stroke-linecap","round"),g(c,"stroke-linejoin","round"),g(t,"class",d=Le(e[1])+" svelte-12k1hse"),g(t,"width",e[2]),g(t,"height",e[2]),g(t,"viewBox","0 0 24 24"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg")},m(f,h){F(f,t,h),K(t,n),K(t,i),K(t,o),K(t,r),K(t,s),K(t,l),K(t,a),K(t,u),K(t,c)},p(f,h){h&2&&d!==(d=Le(f[1])+" svelte-12k1hse")&&g(t,"class",d),h&4&&g(t,"width",f[2]),h&4&&g(t,"height",f[2])},d(f){f&&W(t)}}}function Qh(e){let t,n,i,o;return{c(){t=oe("svg"),n=oe("path"),i=oe("path"),g(n,"d","M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z"),g(n,"stroke","currentColor"),g(n,"stroke-width","2"),g(i,"d","M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z"),g(i,"stroke","currentColor"),g(i,"stroke-width","2"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(t,"class",o=Le(e[1])+" svelte-12k1hse"),g(t,"width",e[2]),g(t,"height",e[2]),g(t,"viewBox","0 0 24 24"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg")},m(r,s){F(r,t,s),K(t,n),K(t,i)},p(r,s){s&2&&o!==(o=Le(r[1])+" svelte-12k1hse")&&g(t,"class",o),s&4&&g(t,"width",r[2]),s&4&&g(t,"height",r[2])},d(r){r&&W(t)}}}function Jh(e){let t,n,i,o;return{c(){t=oe("svg"),n=oe("path"),i=oe("path"),g(n,"d","M3 7V17C3 18.1046 3.89543 19 5 19H19C20.1046 19 21 18.1046 21 17V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7Z"),g(n,"stroke","currentColor"),g(n,"stroke-width","2"),g(i,"d","M3 7L12 13L21 7"),g(i,"stroke","currentColor"),g(i,"stroke-width","2"),g(i,"stroke-linejoin","round"),g(t,"class",o=Le(e[1])+" svelte-12k1hse"),g(t,"width",e[2]),g(t,"height",e[2]),g(t,"viewBox","0 0 24 24"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg")},m(r,s){F(r,t,s),K(t,n),K(t,i)},p(r,s){s&2&&o!==(o=Le(r[1])+" svelte-12k1hse")&&g(t,"class",o),s&4&&g(t,"width",r[2]),s&4&&g(t,"height",r[2])},d(r){r&&W(t)}}}function xh(e){let t;function n(r,s){return r[0]==="Input/Output"?Jh:r[0]==="Transform"?Qh:r[0]==="Adjust"?Uh:r[0]==="Filter"?Gh:r[0]==="Analysis"?jh:r[0]==="Detection"?Zh:r[0]==="Combine"?qh:Fh}let i=n(e),o=i(e);return{c(){o.c(),t=Be()},m(r,s){o.m(r,s),F(r,t,s)},p(r,[s]){i===(i=n(r))&&o?o.p(r,s):(o.d(1),o=i(r),o&&(o.c(),o.m(t.parentNode,t)))},i:we,o:we,d(r){r&&W(t),o.d(r)}}}function $h(e,t,n){let i,{category:o=""}=t,{size:r=20}=t,{class_:s=""}=t;return e.$$set=l=>{"category"in l&&n(0,o=l.category),"size"in l&&n(3,r=l.size),"class_"in l&&n(1,s=l.class_)},e.$$.update=()=>{e.$$.dirty&8&&n(2,i=`${r}px`)},[o,s,i,r]}class Jl extends ge{constructor(t){super(),he(this,t,$h,xh,ye,{category:0,size:3,class_:1})}}const xl=te("closed"),co=te(!1);function e0(e){xl.set(e),co.set(!0)}function $l(){co.set(!1)}const fo=te(null),t0=te(!1);function ji(){fo.set(null),t0.set(!1),console.log("Pending connection cleared")}const{Boolean:Cr}=jr;function Sr(e,t,n){const i=e.slice();i[23]=t[n][0],i[24]=t[n][1],i[29]=n;const o=Object.keys(i[3]).length;i[25]=o;const r=i[25]===1?50:100/(i[25]+1)*(i[29]+1);i[26]=r;const s=i[1].includes(i[23]);return i[27]=s,i}function Nr(e,t,n){const i=e.slice();i[30]=t[n][0],i[31]=t[n][1],i[29]=n;const o=Object.keys(i[4]).length;i[32]=o;const r=i[32]===1?50:100/(i[32]+1)*(i[29]+1);i[26]=r;const s=i[2].includes(i[30]);return i[27]=s,i}function Er(e){let t,n;return t=new sn({props:{type:"target",position:ue.Top,id:e[30],class:"input-handle "+e[9](e[30])+" "+(e[27]?"handle-connected":""),style:"position: absolute; left: "+e[26]+"%; transform: translateX(-50%);"}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,o){const r={};o[0]&16&&(r.id=i[30]),o[0]&20&&(r.class="input-handle "+i[9](i[30])+" "+(i[27]?"handle-connected":"")),o[0]&16&&(r.style="position: absolute; left: "+i[26]+"%; transform: translateX(-50%);"),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function n0(e){let t=(e[5].description||"Process image data")+"",n;return{c(){n=Pe(t)},m(i,o){F(i,n,o)},p(i,o){o[0]&32&&t!==(t=(i[5].description||"Process image data")+"")&&Ve(n,t)},d(i){i&&W(n)}}}function i0(e){let t=Object.keys(e[0].parameters).length+"",n,i;return{c(){n=Pe(t),i=Pe(" parameters")},m(o,r){F(o,n,r),F(o,i,r)},p(o,r){r[0]&1&&t!==(t=Object.keys(o[0].parameters).length+"")&&Ve(n,t)},d(o){o&&(W(n),W(i))}}}function Pr(e){let t,n;return t=new sn({props:{type:"source",position:ue.Bottom,id:e[23],class:"output-handle "+e[10](e[23])+" "+(e[27]?"handle-connected":""),style:"position: absolute; left: "+e[26]+"%; transform: translateX(-50%);"}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,o){const r={};o[0]&8&&(r.id=i[23]),o[0]&10&&(r.class="output-handle "+i[10](i[23])+" "+(i[27]?"handle-connected":"")),o[0]&8&&(r.style="position: absolute; left: "+i[26]+"%; transform: translateX(-50%);"),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function o0(e){let t,n,i,o,r,s,l,a=(e[0].label||e[0].nodeType)+"",u,c,d,f,h,y,_,v,m=He(Object.entries(e[4])),b=[];for(let P=0;P<m.length;P+=1)b[P]=Er(Nr(e,m,P));const p=P=>Q(b[P],1,1,()=>{b[P]=null});o=new Jl({props:{category:e[5].category||"Other",size:16}});function k(P,H){return H[0]&1&&(f=null),f==null&&(f=!!(P[0].parameters&&Object.keys(P[0].parameters).length>0)),f?i0:n0}let E=k(e,[-1,-1]),A=E(e),M=He(Object.entries(e[3])),S=[];for(let P=0;P<M.length;P+=1)S[P]=Pr(Sr(e,M,P));const T=P=>Q(S[P],1,1,()=>{S[P]=null});return{c(){for(let P=0;P<b.length;P+=1)b[P].c();t=ce(),n=x("div"),i=x("span"),se(o.$$.fragment),r=ce(),s=x("div"),l=x("p"),u=Pe(a),c=ce(),d=x("p"),A.c(),y=ce();for(let P=0;P<S.length;P+=1)S[P].c();_=Be(),g(i,"class","panel-icon"),g(l,"class","is-size-8 has-text-weight-bold"),g(d,"class","is-size-7 has-text-grey"),g(n,"class",h="panel-block has-text-left "+e[6]),g(n,"draggable","true")},m(P,H){for(let B=0;B<b.length;B+=1)b[B]&&b[B].m(P,H);F(P,t,H),F(P,n,H),K(n,i),re(o,i,null),K(n,r),K(n,s),K(s,l),K(l,u),K(s,c),K(s,d),A.m(d,null),F(P,y,H);for(let B=0;B<S.length;B+=1)S[B]&&S[B].m(P,H);F(P,_,H),v=!0},p(P,H){if(H[0]&532){m=He(Object.entries(P[4]));let R;for(R=0;R<m.length;R+=1){const w=Nr(P,m,R);b[R]?(b[R].p(w,H),j(b[R],1)):(b[R]=Er(w),b[R].c(),j(b[R],1),b[R].m(t.parentNode,t))}for(Xe(),R=m.length;R<b.length;R+=1)p(R);Ye()}const B={};if(H[0]&32&&(B.category=P[5].category||"Other"),o.$set(B),(!v||H[0]&1)&&a!==(a=(P[0].label||P[0].nodeType)+"")&&Ve(u,a),E===(E=k(P,H))&&A?A.p(P,H):(A.d(1),A=E(P),A&&(A.c(),A.m(d,null))),(!v||H[0]&64&&h!==(h="panel-block has-text-left "+P[6]))&&g(n,"class",h),H[0]&1034){M=He(Object.entries(P[3]));let R;for(R=0;R<M.length;R+=1){const w=Sr(P,M,R);S[R]?(S[R].p(w,H),j(S[R],1)):(S[R]=Pr(w),S[R].c(),j(S[R],1),S[R].m(_.parentNode,_))}for(Xe(),R=M.length;R<S.length;R+=1)T(R);Ye()}},i(P){if(!v){for(let H=0;H<m.length;H+=1)j(b[H]);j(o.$$.fragment,P);for(let H=0;H<M.length;H+=1)j(S[H]);v=!0}},o(P){b=b.filter(Cr);for(let H=0;H<b.length;H+=1)Q(b[H]);Q(o.$$.fragment,P),S=S.filter(Cr);for(let H=0;H<S.length;H+=1)Q(S[H]);v=!1},d(P){P&&(W(t),W(n),W(y),W(_)),xt(b,P),le(o),A.d(),xt(S,P)}}}function r0(e,t,n){let i,o,r,s,l,a,u,c,d,f,h,y,_;$(e,fo,S=>n(18,h=S));let{data:v}=t,{id:m}=t;const b=Yh();$(e,b,S=>n(14,y=S));const p=mn("availableNodes")||{};$(e,p,S=>n(15,_=S));function k(S){return o.includes(S)}function E(S){return r.includes(S)}function A(S){let T="";k(S)?T="handle-required":E(S)&&(T="handle-optional");const P=h;return P&&P.nodeId===m&&P.handleId===S&&P.handleType==="target"&&(T+=" handle-pending"),T}function M(S){let T="handle-output";const P=h;return P&&P.nodeId===m&&P.handleId===S&&P.handleType==="source"&&(T+=" handle-pending"),T}return e.$$set=S=>{"data"in S&&n(0,v=S.data),"id"in S&&n(11,m=S.id)},e.$$.update=()=>{var S,T;e.$$.dirty[0]&32769&&n(5,i=_[v.nodeType]||{}),e.$$.dirty[0]&32&&(o=i.required_inputs||[]),e.$$.dirty[0]&32&&(r=i.optional_inputs||[]),e.$$.dirty[0]&32&&n(4,s=((S=i.ports)==null?void 0:S.inputs)||{}),e.$$.dirty[0]&32&&n(3,l=((T=i.ports)==null?void 0:T.outputs)||{}),e.$$.dirty[0]&18432&&n(2,a=y.filter(P=>P.target===m).map(P=>P.targetHandle)),e.$$.dirty[0]&18432&&n(1,u=y.filter(P=>P.source===m).map(P=>P.sourceHandle)),e.$$.dirty[0]&20&&n(13,c=Object.keys(s).length>0&&Object.keys(s).every(P=>a.includes(P))),e.$$.dirty[0]&10&&n(12,d=Object.keys(l).length>0&&Object.keys(l).every(P=>u.includes(P))),e.$$.dirty[0]&12288&&n(6,f=[c&&"inputs-connected",d&&"outputs-connected"].filter(Boolean).join(" "))},[v,u,a,l,s,i,f,b,p,A,M,m,d,c,y,_]}class l0 extends ge{constructor(t){super(),he(this,t,r0,o0,ye,{data:0,id:11},null,[-1,-1])}}function s0(e){let t,n,i,o;const r=e[3].default,s=Ue(r,e,e[2],null);return{c(){t=x("div"),s&&s.c(),g(t,"class","flow-drop-zone svelte-7359zx"),g(t,"role","region"),g(t,"aria-label","Canvas drop zone")},m(l,a){F(l,t,a),s&&s.m(t,null),n=!0,i||(o=[fe(t,"drop",e[0]),fe(t,"dragover",a0)],i=!0)},p(l,[a]){s&&s.p&&(!n||a&4)&&Je(s,r,l,l[2],n?Qe(r,l[2],a,null):xe(l[2]),null)},i(l){n||(j(s,l),n=!0)},o(l){Q(s,l),n=!1},d(l){l&&W(t),s&&s.d(l),i=!1,Ie(o)}}}function a0(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}function u0(e,t,n){let{$$slots:i={},$$scope:o}=t,{onNodeDrop:r}=t;const{screenToFlowPosition:s}=Xh(),l=Sn();function a(u){u.preventDefault();const c=u.dataTransfer.getData("application/reactflow");if(!c)return;const d=s({x:u.clientX,y:u.clientY});l("nodedrop",{nodeType:c,position:d}),r&&r({nodeType:c,position:d})}return e.$$set=u=>{"onNodeDrop"in u&&n(1,r=u.onNodeDrop),"$$scope"in u&&n(2,o=u.$$scope)},[a,r,o,i]}class c0 extends ge{constructor(t){super(),he(this,t,u0,s0,ye,{onNodeDrop:1})}}function ui(e){return e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function f0(e){return typeof e=="boolean"?"boolean":typeof e=="number"?"number":typeof e=="string"?e.startsWith("#")?"color":e.includes(".jpg")||e.includes(".png")||e.includes(".jpeg")?"file":"text":"text"}function d0(e,t){return parseFloat(e)||0}function Mr(e){return e?e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}function h0(e,t){const n=`node-${Mr(e)}`,i=`node-${Mr(t)}`;return`${n} ${i}`}function Or(e,t,n){const i=e.slice();return i[16]=t[n][0],i[17]=t[n][1],i}function Ai(e){const t=e.slice(),n=t[2].results[t[0].id];return t[15]=n,t}function Tr(e,t,n){const i=e.slice();i[20]=t[n][0],i[21]=t[n][1],i[23]=t,i[24]=n;const o=f0(i[21]);return i[22]=o,i}function zr(e,t,n){const i=e.slice();return i[26]=t[n],i}function g0(e){const t=e.slice(),n=t[7](t[0].data.nodeType,t[20]);return t[25]=n,t}function Dr(e){let t;return{c(){t=x("div"),t.innerHTML="<strong>Node properties</strong>",g(t,"class","block mb-1")},m(n,i){F(n,t,i)},d(n){n&&W(t)}}}function m0(e){let t;return{c(){t=x("div"),t.innerHTML='<p class="has-text-grey">Select a node to edit its properties</p>',g(t,"class","panel-block")},m(n,i){F(n,t,i)},p:we,d(n){n&&W(t)}}}function y0(e){var b,p;let t,n,i,o=e[0].data.nodeType+"",r,s,l,a=(((p=(b=e[1])==null?void 0:b[e[0].data.nodeType])==null?void 0:p.description)||"Process image data")+"",u,c,d,f,h,y=e[0].data.nodeType==="MediaInput"&&Ar(e);function _(k,E){return E&16&&(f=null),f==null&&(f=Object.keys(k[4]).length>0),f?b0:_0}let v=_(e,-1),m=v(e);return{c(){t=x("div"),n=x("div"),i=x("p"),r=Pe(o),s=ce(),l=x("p"),u=Pe(a),c=ce(),y&&y.c(),d=ce(),m.c(),h=Be(),g(i,"class","is-size-8 has-text-weight-bold"),g(l,"class","is-size-7 has-text-grey"),g(t,"class","panel-block")},m(k,E){F(k,t,E),K(t,n),K(n,i),K(i,r),K(n,s),K(n,l),K(l,u),F(k,c,E),y&&y.m(k,E),F(k,d,E),m.m(k,E),F(k,h,E)},p(k,E){var A,M;E&1&&o!==(o=k[0].data.nodeType+"")&&Ve(r,o),E&3&&a!==(a=(((M=(A=k[1])==null?void 0:A[k[0].data.nodeType])==null?void 0:M.description)||"Process image data")+"")&&Ve(u,a),k[0].data.nodeType==="MediaInput"?y?y.p(k,E):(y=Ar(k),y.c(),y.m(d.parentNode,d)):y&&(y.d(1),y=null),v===(v=_(k,E))&&m?m.p(k,E):(m.d(1),m=v(k),m&&(m.c(),m.m(h.parentNode,h)))},d(k){k&&(W(t),W(c),W(d),W(h)),y&&y.d(k),m.d(k)}}}function Ar(e){let t,n,i,o,r,s,l,a;return{c(){t=x("div"),n=x("div"),i=x("label"),i.textContent="Upload Image",o=ce(),r=x("div"),s=x("input"),g(i,"class","label is-small"),g(i,"for","file-upload"),g(s,"id","file-upload"),g(s,"class","input is-small"),g(s,"type","file"),g(s,"accept","image/*"),g(r,"class","control"),g(n,"class","field"),pe(n,"width","100%"),g(t,"class","panel-block")},m(u,c){F(u,t,c),K(t,n),K(n,i),K(n,o),K(n,r),K(r,s),l||(a=fe(s,"change",e[6]),l=!0)},p:we,d(u){u&&W(t),l=!1,a()}}}function _0(e){let t;return{c(){t=x("div"),t.innerHTML='<p class="has-text-grey is-italic">No parameters available for this node.</p>',g(t,"class","panel-block")},m(n,i){F(n,t,i)},p:we,d(n){n&&W(t)}}}function b0(e){let t,n=He(Object.entries(e[4])),i=[];for(let o=0;o<n.length;o+=1)i[o]=Lr(Tr(e,n,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=Be()},m(o,r){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(o,r);F(o,t,r)},p(o,r){if(r&177){n=He(Object.entries(o[4]));let s;for(s=0;s<n.length;s+=1){const l=Tr(o,n,s);i[s]?i[s].p(l,r):(i[s]=Lr(l),i[s].c(),i[s].m(t.parentNode,t))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(o){o&&W(t),xt(i,o)}}}function p0(e){let t,n,i,o,r,s;function l(...a){return e[14](e[20],...a)}return{c(){t=x("input"),g(t,"id",n=e[20]),g(t,"class","input is-small"),g(t,"type","text"),t.value=i=e[4][e[20]],g(t,"placeholder",o=e[20].includes("path")?"Enter file path...":"")},m(a,u){F(a,t,u),r||(s=fe(t,"input",l),r=!0)},p(a,u){e=a,u&145&&n!==(n=e[20])&&g(t,"id",n),u&145&&i!==(i=e[4][e[20]])&&t.value!==i&&(t.value=i),u&145&&o!==(o=e[20].includes("path")?"Enter file path...":"")&&g(t,"placeholder",o)},d(a){a&&W(t),r=!1,s()}}}function Ir(e){let t,n,i,o,r,s,l=He(e[25].options),a=[];for(let c=0;c<l.length;c+=1)a[c]=Hr(zr(e,l,c));function u(...c){return e[13](e[20],...c)}return{c(){t=x("div"),n=x("select");for(let c=0;c<a.length;c+=1)a[c].c();g(n,"id",i=e[20]),g(t,"class","select is-small")},m(c,d){F(c,t,d),K(t,n);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(n,null);po(n,e[4][e[20]]),r||(s=fe(n,"change",u),r=!0)},p(c,d){if(e=c,d&145){l=He(e[25].options);let f;for(f=0;f<l.length;f+=1){const h=zr(e,l,f);a[f]?a[f].p(h,d):(a[f]=Hr(h),a[f].c(),a[f].m(n,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=l.length}d&145&&i!==(i=e[20])&&g(n,"id",i),d&145&&o!==(o=e[4][e[20]])&&po(n,e[4][e[20]])},d(c){c&&W(t),xt(a,c),r=!1,s()}}}function w0(e){let t,n,i,o,r;function s(...l){return e[12](e[20],...l)}return{c(){t=x("input"),g(t,"id",n=e[20]),g(t,"type","color"),t.value=i=e[4][e[20]],pe(t,"width","40px"),pe(t,"height","32px"),pe(t,"padding","1px"),pe(t,"border-radius","4px")},m(l,a){F(l,t,a),o||(r=fe(t,"input",s),o=!0)},p(l,a){e=l,a&145&&n!==(n=e[20])&&g(t,"id",n),a&145&&i!==(i=e[4][e[20]])&&(t.value=i)},d(l){l&&W(t),o=!1,r()}}}function k0(e){let t,n,i,o,r,s;function l(...a){return e[11](e[20],...a)}return{c(){t=x("input"),g(t,"id",n=e[20]),g(t,"class","input is-small"),g(t,"type","number"),g(t,"step",i=e[20].includes("threshold")||e[20].includes("factor")?"0.1":"1"),t.value=o=e[4][e[20]]},m(a,u){F(a,t,u),r||(s=fe(t,"input",l),r=!0)},p(a,u){e=a,u&145&&n!==(n=e[20])&&g(t,"id",n),u&145&&i!==(i=e[20].includes("threshold")||e[20].includes("factor")?"0.1":"1")&&g(t,"step",i),u&145&&o!==(o=e[4][e[20]])&&t.value!==o&&(t.value=o)},d(a){a&&W(t),r=!1,s()}}}function v0(e){let t,n,i,o,r=ui(e[20])+"",s,l,a;function u(){e[9].call(n,e[20])}function c(...d){return e[10](e[20],...d)}return{c(){t=x("label"),n=x("input"),o=ce(),s=Pe(r),g(n,"id",i=e[20]),g(n,"type","checkbox"),g(t,"class","checkbox")},m(d,f){F(d,t,f),K(t,n),n.checked=e[4][e[20]],K(t,o),K(t,s),l||(a=[fe(n,"change",u),fe(n,"change",c)],l=!0)},p(d,f){e=d,f&145&&i!==(i=e[20])&&g(n,"id",i),f&145&&(n.checked=e[4][e[20]]),f&16&&r!==(r=ui(e[20])+"")&&Ve(s,r)},d(d){d&&W(t),l=!1,Ie(a)}}}function Hr(e){let t,n=e[26].label+"",i,o;return{c(){t=x("option"),i=Pe(n),t.__value=o=e[26].value,jn(t,t.__value)},m(r,s){F(r,t,s),K(t,i)},p(r,s){s&17&&n!==(n=r[26].label+"")&&Ve(i,n),s&145&&o!==(o=r[26].value)&&(t.__value=o,jn(t,t.__value))},d(r){r&&W(t)}}}function Lr(e){let t,n,i,o=ui(e[20])+"",r,s,l,a,u,c;function d(_,v){return v&17&&(u=null),_[22]==="boolean"?v0:_[22]==="number"?k0:_[22]==="color"?w0:(u==null&&(u=!!_[7](_[0].data.nodeType,_[20])),u?Ir:p0)}function f(_,v){return v===Ir?g0(_):_}let h=d(e,-1),y=h(f(e,h));return{c(){t=x("div"),n=x("div"),i=x("label"),r=Pe(o),l=ce(),a=x("div"),y.c(),c=ce(),g(i,"class","label is-small"),g(i,"for",s=e[20]),g(a,"class","control"),g(n,"class","field"),pe(n,"width","100%"),g(t,"class","panel-block")},m(_,v){F(_,t,v),K(t,n),K(n,i),K(i,r),K(n,l),K(n,a),y.m(a,null),K(t,c)},p(_,v){v&16&&o!==(o=ui(_[20])+"")&&Ve(r,o),v&145&&s!==(s=_[20])&&g(i,"for",s),h===(h=d(_,v))&&y?y.p(f(_,h),v):(y.d(1),y=h(f(_,h)),y&&(y.c(),y.m(a,null)))},d(_){_&&W(t),y.d()}}}function Vr(e){let t=e[15].outputs&&Object.keys(e[15].outputs).length>0,n,i=t&&Rr(e);return{c(){i&&i.c(),n=Be()},m(o,r){i&&i.m(o,r),F(o,n,r)},p(o,r){r&5&&(t=o[15].outputs&&Object.keys(o[15].outputs).length>0),t?i?i.p(o,r):(i=Rr(o),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(o){o&&W(n),i&&i.d(o)}}}function Rr(e){let t,n,i,o,r=He(Object.entries(e[15].outputs)),s=[];for(let l=0;l<r.length;l+=1)s[l]=Xr(Or(e,r,l));return{c(){t=x("div"),n=x("div"),i=x("div"),i.textContent="📊 Outputs",o=ce();for(let l=0;l<s.length;l+=1)s[l].c();g(i,"class","label is-small"),g(n,"class","output-section"),g(t,"class","panel-block")},m(l,a){F(l,t,a),K(t,n),K(n,i),K(n,o);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(n,null)},p(l,a){if(a&5){r=He(Object.entries(l[15].outputs));let u;for(u=0;u<r.length;u+=1){const c=Or(l,r,u);s[u]?s[u].p(c,a):(s[u]=Xr(c),s[u].c(),s[u].m(n,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}},d(l){l&&W(t),xt(s,l)}}}function C0(e){let t,n=e[17]+"",i;return{c(){t=x("div"),i=Pe(n),g(t,"class","output-text")},m(o,r){F(o,t,r),K(t,i)},p(o,r){r&5&&n!==(n=o[17]+"")&&Ve(i,n)},d(o){o&&W(t)}}}function S0(e){let t,n=JSON.stringify(e[17],null,2)+"",i;return{c(){t=x("pre"),i=Pe(n),g(t,"class","output-data")},m(o,r){F(o,t,r),K(t,i)},p(o,r){r&5&&n!==(n=JSON.stringify(o[17],null,2)+"")&&Ve(i,n)},d(o){o&&W(t)}}}function N0(e){let t,n,i;return{c(){t=x("img"),bo(t.src,n=e[17])||g(t,"src",n),g(t,"alt",i="Output "+e[16]),g(t,"class","output-image")},m(o,r){F(o,t,r)},p(o,r){r&5&&!bo(t.src,n=o[17])&&g(t,"src",n),r&5&&i!==(i="Output "+o[16])&&g(t,"alt",i)},d(o){o&&W(t)}}}function Xr(e){let t,n,i=e[16]+"",o,r,s,l,a;function u(f,h){return h&5&&(l=null),l==null&&(l=!!(typeof f[17]=="string"&&f[17].startsWith("data:image"))),l?N0:typeof f[17]=="object"?S0:C0}let c=u(e,-1),d=c(e);return{c(){t=x("div"),n=x("span"),o=Pe(i),r=Pe(":"),s=ce(),d.c(),a=ce(),g(n,"class","output-name"),g(t,"class","output-item")},m(f,h){F(f,t,h),K(t,n),K(n,o),K(n,r),K(t,s),d.m(t,null),K(t,a)},p(f,h){h&5&&i!==(i=f[16]+"")&&Ve(o,i),c===(c=u(f,h))&&d?d.p(f,h):(d.d(1),d=c(f),d&&(d.c(),d.m(t,a)))},d(f){f&&W(t),d.d()}}}function E0(e){var u,c,d;let t,n,i,o=!e[3]&&Dr();function r(f,h){return f[0]?y0:m0}let s=r(e),l=s(e),a=e[0]&&((u=e[2])==null?void 0:u.success)&&((d=(c=e[2])==null?void 0:c.results)==null?void 0:d[e[0].id])&&Vr(Ai(e));return{c(){o&&o.c(),t=ce(),n=x("nav"),l.c(),i=ce(),a&&a.c(),g(n,"class","panel")},m(f,h){o&&o.m(f,h),F(f,t,h),F(f,n,h),l.m(n,null),K(n,i),a&&a.m(n,null)},p(f,[h]){var y,_,v;f[3]?o&&(o.d(1),o=null):o||(o=Dr(),o.c(),o.m(t.parentNode,t)),s===(s=r(f))&&l?l.p(f,h):(l.d(1),l=s(f),l&&(l.c(),l.m(n,i))),f[0]&&((y=f[2])!=null&&y.success)&&((v=(_=f[2])==null?void 0:_.results)!=null&&v[f[0].id])?a?a.p(Ai(f),h):(a=Vr(Ai(f)),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i:we,o:we,d(f){f&&(W(t),W(n)),o&&o.d(f),l.d(),a&&a.d()}}}function P0(e,t,n){let{selectedNode:i}=t,{updateNodeParameters:o}=t,{availableNodes:r}=t,{executionResults:s}=t,{hideTitle:l=!1}=t,a={};function u(b,p){n(4,a[b]=p,a),o(i.id,a)}async function c(b){const p=b.target.files[0];if(!p)return;const k=new FormData;k.append("file",p);try{const A=await(await fetch("/api/upload/image",{method:"POST",body:k})).json();u("data",A.data)}catch(E){console.error("Upload failed:",E)}}function d(b,p){var E;const k=r==null?void 0:r[b];return(E=k==null?void 0:k.parameter_options)==null?void 0:E[p]}function f(b){a[b]=this.checked,n(4,a),n(0,i),n(1,r),n(7,d),n(0,i)}const h=(b,p)=>u(b,p.target.checked),y=(b,p)=>u(b,d0(p.target.value)),_=(b,p)=>u(b,p.target.value),v=(b,p)=>u(b,p.target.value),m=(b,p)=>u(b,p.target.value);return e.$$set=b=>{"selectedNode"in b&&n(0,i=b.selectedNode),"updateNodeParameters"in b&&n(8,o=b.updateNodeParameters),"availableNodes"in b&&n(1,r=b.availableNodes),"executionResults"in b&&n(2,s=b.executionResults),"hideTitle"in b&&n(3,l=b.hideTitle)},e.$$.update=()=>{var b;if(e.$$.dirty&3&&i){const p=((b=r==null?void 0:r[i.data.nodeType])==null?void 0:b.parameters)||{},k=i.data.parameters||{};n(4,a={...p,...k})}},[i,r,s,l,a,u,c,d,o,f,h,y,_,v,m]}class M0 extends ge{constructor(t){super(),he(this,t,P0,E0,ye,{selectedNode:0,updateNodeParameters:8,availableNodes:1,executionResults:2,hideTitle:3})}}function Yr(e){let t,n;return t=new M0({props:{selectedNode:e[1],updateNodeParameters:e[2],availableNodes:e[6],executionResults:e[3],hideTitle:!0}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,o){const r={};o&2&&(r.selectedNode=i[1]),o&4&&(r.updateNodeParameters=i[2]),o&64&&(r.availableNodes=i[6]),o&8&&(r.executionResults=i[3]),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function O0(e){let t,n,i,o,r,s,l=e[5]==="properties"&&Yr(e);return{c(){t=x("div"),n=x("div"),l&&l.c(),g(n,"class","drawer-content"),g(t,"class",i="drawer-sidebar "+(e[4]?"is-open":"")),g(t,"role","dialog"),g(t,"aria-label","Properties panel"),g(t,"tabindex","-1")},m(a,u){F(a,t,u),K(t,n),l&&l.m(n,null),o=!0,r||(s=[fe(window,"keydown",e[7]),fe(t,"click",T0),fe(t,"keydown",e[7])],r=!0)},p(a,[u]){a[5]==="properties"?l?(l.p(a,u),u&32&&j(l,1)):(l=Yr(a),l.c(),j(l,1),l.m(n,null)):l&&(Xe(),Q(l,1,1,()=>{l=null}),Ye()),(!o||u&16&&i!==(i="drawer-sidebar "+(a[4]?"is-open":"")))&&g(t,"class",i)},i(a){o||(j(l),o=!0)},o(a){Q(l),o=!1},d(a){a&&W(t),l&&l.d(),r=!1,Ie(s)}}}function T0(e){e.stopPropagation()}function z0(e,t,n){let i,o,r,s=we,l=()=>(s(),s=Tt(a,h=>n(6,r=h)),a);$(e,co,h=>n(4,i=h)),$(e,xl,h=>n(5,o=h)),e.$$.on_destroy.push(()=>s());let{availableNodes:a}=t;l();let{selectedNode:u}=t,{updateNodeParameters:c}=t,{executionResults:d}=t;function f(h){h.key==="Escape"&&i&&($l(),ji())}return e.$$set=h=>{"availableNodes"in h&&l(n(0,a=h.availableNodes)),"selectedNode"in h&&n(1,u=h.selectedNode),"updateNodeParameters"in h&&n(2,c=h.updateNodeParameters),"executionResults"in h&&n(3,d=h.executionResults)},[a,u,c,d,i,o,r,f]}class D0 extends ge{constructor(t){super(),he(this,t,z0,O0,ye,{availableNodes:0,selectedNode:1,updateNodeParameters:2,executionResults:3})}}function Wr(e,t,n){const i=e.slice();return i[10]=t[n][0],i[11]=t[n][1],i}function Br(e){let t;return{c(){t=x("div"),t.innerHTML="<strong>What&#39;s next?</strong>",g(t,"class","block mb-1")},m(n,i){F(n,t,i)},d(n){n&&W(t)}}}function Kr(e){let t,n,i,o,r,s,l=(e[11].name||e[10])+"",a,u,c,d=e[3](e[10])+"",f,h,y,_,v;i=new Jl({props:{category:e[11].category||"Other",size:16}});function m(...b){return e[7](e[10],...b)}return{c(){t=x("div"),n=x("span"),se(i.$$.fragment),o=ce(),r=x("div"),s=x("p"),a=Pe(l),u=ce(),c=x("p"),f=Pe(d),h=ce(),g(n,"class","panel-icon"),g(s,"class","is-size-8 has-text-weight-bold"),g(c,"class","is-size-7 has-text-grey"),g(t,"class","panel-block node-panel-block"),g(t,"role","button"),g(t,"tabindex","0"),g(t,"draggable","true")},m(b,p){F(b,t,p),K(t,n),re(i,n,null),K(t,o),K(t,r),K(r,s),K(s,a),K(r,u),K(r,c),K(c,f),K(t,h),y=!0,_||(v=fe(t,"dragstart",m),_=!0)},p(b,p){e=b;const k={};p&4&&(k.category=e[11].category||"Other"),i.$set(k),(!y||p&4)&&l!==(l=(e[11].name||e[10])+"")&&Ve(a,l),(!y||p&4)&&d!==(d=e[3](e[10])+"")&&Ve(f,d)},i(b){y||(j(i.$$.fragment,b),y=!0)},o(b){Q(i.$$.fragment,b),y=!1},d(b){b&&W(t),le(i),_=!1,v()}}}function A0(e){let t,n,i,o=!e[1]&&Br(),r=He(e[2]),s=[];for(let a=0;a<r.length;a+=1)s[a]=Kr(Wr(e,r,a));const l=a=>Q(s[a],1,1,()=>{s[a]=null});return{c(){o&&o.c(),t=ce(),n=x("nav");for(let a=0;a<s.length;a+=1)s[a].c();g(n,"class","panel")},m(a,u){o&&o.m(a,u),F(a,t,u),F(a,n,u);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(n,null);i=!0},p(a,[u]){if(a[1]?o&&(o.d(1),o=null):o||(o=Br(),o.c(),o.m(t.parentNode,t)),u&12){r=He(a[2]);let c;for(c=0;c<r.length;c+=1){const d=Wr(a,r,c);s[c]?(s[c].p(d,u),j(s[c],1)):(s[c]=Kr(d),s[c].c(),j(s[c],1),s[c].m(n,null))}for(Xe(),c=r.length;c<s.length;c+=1)l(c);Ye()}},i(a){if(!i){for(let u=0;u<r.length;u+=1)j(s[u]);i=!0}},o(a){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)Q(s[u]);i=!1},d(a){a&&(W(t),W(n)),o&&o.d(a),xt(s,a)}}}function I0(e,t){e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.effectAllowed="move"}function H0(e,t,n){let i,o,r=we,s=()=>(r(),r=Tt(l,y=>n(6,o=y)),l);e.$$.on_destroy.push(()=>r());let{availableNodes:l}=t;s();let{hideTitle:a=!1}=t,{searchQuery:u=""}=t;function c(){const y=o||{},_={};for(const[v,m]of Object.entries(y)){const b=m.category||"Other";_[b]||(_[b]={nodes:[]}),_[b].nodes.push(v)}return _}function d(y){const _=o==null?void 0:o[y];return(_==null?void 0:_.description)||"Process image data"}let f={};const h=(y,_)=>I0(_,y);return e.$$set=y=>{"availableNodes"in y&&s(n(0,l=y.availableNodes)),"hideTitle"in y&&n(1,a=y.hideTitle),"searchQuery"in y&&n(4,u=y.searchQuery)},e.$$.update=()=>{if(e.$$.dirty&80&&n(2,i=Object.entries(o||{}).filter(([y,_])=>{if(!u||u.trim()==="")return!0;const v=u.toLowerCase(),m=(_.name||y).toLowerCase(),b=(_.description||"").toLowerCase(),p=y.toLowerCase(),k=(_.category||"").toLowerCase();return m.includes(v)||b.includes(v)||p.includes(v)||k.includes(v)})),e.$$.dirty&96&&o){const y=c();for(const _ of Object.keys(y))_ in f||n(5,f[_]=!0,f)}},[l,a,i,d,u,f,o,h]}class L0 extends ge{constructor(t){super(),he(this,t,H0,A0,ye,{availableNodes:0,hideTitle:1,searchQuery:4})}}function V0(e){let t,n,i,o,r,s,l,a,u,c,d,f;return u=new L0({props:{availableNodes:e[0],searchQuery:e[1],hideTitle:!0}}),{c(){t=x("div"),n=x("div"),i=x("p"),o=x("input"),r=ce(),s=x("span"),s.innerHTML='<svg style="max-width: 1rem;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"></path></svg>',l=ce(),a=x("div"),se(u.$$.fragment),g(o,"class","input is-small"),g(o,"type","text"),g(o,"placeholder","Search blocks"),g(s,"class","icon is-left"),g(i,"class","control has-icons-left"),g(n,"class","node-palette-header svelte-1512iut"),g(a,"class","node-palette-content"),g(t,"class","node-palette-panel")},m(h,y){F(h,t,y),K(t,n),K(n,i),K(i,o),jn(o,e[1]),K(i,r),K(i,s),K(t,l),K(t,a),re(u,a,null),c=!0,d||(f=fe(o,"input",e[2]),d=!0)},p(h,[y]){y&2&&o.value!==h[1]&&jn(o,h[1]);const _={};y&1&&(_.availableNodes=h[0]),y&2&&(_.searchQuery=h[1]),u.$set(_)},i(h){c||(j(u.$$.fragment,h),c=!0)},o(h){Q(u.$$.fragment,h),c=!1},d(h){h&&W(t),le(u),d=!1,f()}}}function R0(e,t,n){let{availableNodes:i}=t,o="";function r(){o=this.value,n(1,o)}return e.$$set=s=>{"availableNodes"in s&&n(0,i=s.availableNodes)},[i,o,r]}class X0 extends ge{constructor(t){super(),he(this,t,R0,V0,ye,{availableNodes:0})}}function Y0(e){let t,n;return t=new Rh({props:{variant:"dots"}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p:we,i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function W0(e){let t,n,i={nodes:e[4],edges:e[5],nodeTypes:e[10],proOptions:{hideAttribution:!0},maxZoom:1,fitView:!0,fitViewOptions:{maxZoom:1,padding:.2},$$slots:{default:[Y0]},$$scope:{ctx:e}};return t=new Ch({props:i}),e[20](t),t.$on("nodeclick",e[12]),t.$on("paneclick",e[13]),t.$on("connect",e[14]),{c(){se(t.$$.fragment)},m(o,r){re(t,o,r),n=!0},p(o,r){const s={};r[1]&2&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){n||(j(t.$$.fragment,o),n=!0)},o(o){Q(t.$$.fragment,o),n=!1},d(o){e[20](null),le(t,o)}}}function B0(e){let t,n,i,o,r,s,l,a,u,c;return t=new Kh({props:{executeWorkflow:e[16],exportWorkflow:e[17],importWorkflow:e[18],clearWorkflow:e[19],isExecuting:e[1]}}),i=new X0({props:{availableNodes:e[7]}}),l=new c0({props:{$$slots:{default:[W0]},$$scope:{ctx:e}}}),l.$on("nodedrop",e[11]),u=new D0({props:{availableNodes:e[7],selectedNode:e[2],updateNodeParameters:e[15],executionResults:e[3]}}),{c(){se(t.$$.fragment),n=ce(),se(i.$$.fragment),o=ce(),r=x("div"),s=x("div"),se(l.$$.fragment),a=ce(),se(u.$$.fragment),g(s,"id","studio"),g(r,"class","main-content")},m(d,f){re(t,d,f),F(d,n,f),re(i,d,f),F(d,o,f),F(d,r,f),K(r,s),re(l,s,null),F(d,a,f),re(u,d,f),c=!0},p(d,f){const h={};f[0]&2&&(h.isExecuting=d[1]),t.$set(h);const y={};f[0]&1|f[1]&2&&(y.$$scope={dirty:f,ctx:d}),l.$set(y);const _={};f[0]&4&&(_.selectedNode=d[2]),f[0]&8&&(_.executionResults=d[3]),u.$set(_)},i(d){c||(j(t.$$.fragment,d),j(i.$$.fragment,d),j(l.$$.fragment,d),j(u.$$.fragment,d),c=!0)},o(d){Q(t.$$.fragment,d),Q(i.$$.fragment,d),Q(l.$$.fragment,d),Q(u.$$.fragment,d),c=!1},d(d){d&&(W(n),W(o),W(r),W(a)),le(t,d),le(i,d),le(l),le(u,d)}}}function K0(e){let t,n;return t=new Eh({props:{$$slots:{default:[B0]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},m(i,o){re(t,i,o),n=!0},p(i,o){const r={};o[0]&15|o[1]&2&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Q(t.$$.fragment,i),n=!1},d(i){le(t,i)}}}function F0(e,t,n){let i,o,r,s,l,a,u;$(e,fo,z=>n(24,s=z));let c=te([{id:"MediaInput-initial",type:"default",position:{x:100,y:100},data:{label:"Media Input",nodeType:"MediaInput",parameters:{}},class:"node-category-input"}]);$(e,c,z=>n(22,o=z));let d=te([]);$(e,d,z=>n(21,i=z));let f=te(null);$(e,f,z=>n(2,a=z));let h=te([]);$(e,h,z=>n(23,r=z));let y=te(null);$(e,y,z=>n(3,u=z));let _=te(!1);$(e,_,z=>n(1,l=z));let v;$t("availableNodes",h);const m={default:l0};Cn(async()=>{console.log("App onMount started");try{const I=await(await fetch("/api/nodes")).json();console.log("Node types fetched:",I),h.set(I),console.log("App initialized successfully")}catch(z){console.error("Failed to fetch node types:",z)}});function b(){console.log("initializeCanvas called");const z={id:"MediaInput-initial",type:"default",position:{x:100,y:100},data:{label:"Media Input",nodeType:"MediaInput",parameters:{}},class:"node-category-input"};c.set([z]),d.set([]),console.log("Canvas initialized with MediaInput node")}function p(z){const{nodeType:I,position:q}=z.detail,U=E(I),G={id:`${I}-${Date.now()}`,type:"default",position:q,data:{label:I,nodeType:I,parameters:k(I)},class:h0(I,U),origin:[.5,0]};c.update(ee=>[...ee,G]);const V=s;V&&(S(V,G),ji())}function k(z){var q;return((q=(r||{})[z])==null?void 0:q.parameters)||{}}function E(z){var q;return((q=(r||{})[z])==null?void 0:q.category)||"Other"}function A(z){console.log("Node clicked:",z.detail.node.id);const I=z.detail.node;f.set(I),e0("properties")}function M(){$l(),ji()}function S(z,I){var me,J,ie,_e;const{nodeId:q,handleId:U,handleType:G}=z;let V,ee,ne,de;if(G==="source"?(V=q,ee=I.id,ne=U,de=B(I.data.nodeType)):(V=I.id,ee=q,ne=H(I.data.nodeType),de=U),ne&&de){const be=G==="source"?(J=(me=o.find(Z=>Z.id===q))==null?void 0:me.data)==null?void 0:J.nodeType:I.data.nodeType,ve=G==="target"?(_e=(ie=o.find(Z=>Z.id===q))==null?void 0:ie.data)==null?void 0:_e.nodeType:I.data.nodeType;if(P(be,ne,ve,de)){const Z={id:`edge-${Date.now()}`,source:V,target:ee,sourceHandle:ne,targetHandle:de};d.update(Ne=>[...Ne,Z]),console.log("Auto-connection created:",Z)}else console.warn("Auto-connection validation failed")}else console.warn("Could not determine handles for auto-connection")}function T(z){var me,J;const I=z.detail.connection,q=o.find(ie=>ie.id===I.source),U=o.find(ie=>ie.id===I.target);if(!q||!U){console.warn("Could not find source or target node");return}const G=(me=q.data)==null?void 0:me.nodeType,V=(J=U.data)==null?void 0:J.nodeType,ee=H(G),ne=B(V);if(!P(G,ee,V,ne)){console.warn(`Invalid connection: ${G}.${ee} -> ${V}.${ne}`),alert(`Cannot connect ${G} output to ${V} input: incompatible types`);return}const de={id:`edge-${Date.now()}`,source:I.source,target:I.target,sourceHandle:ee,targetHandle:ne};d.update(ie=>[...ie,de])}function P(z,I,q,U){var de,me;const G=r==null?void 0:r[z],V=r==null?void 0:r[q];if(!G||!V||!I||!U)return!1;const ee=(de=G.outputs)==null?void 0:de[I],ne=(me=V.inputs)==null?void 0:me[U];return!ee||!ne?!1:ee===ne}function H(z){const I=r==null?void 0:r[z];return I!=null&&I.outputs&&Object.keys(I.outputs)[0]||"image"}function B(z){const I=r==null?void 0:r[z];return I!=null&&I.inputs&&Object.keys(I.inputs)[0]||null}function R(z,I){c.update(q=>q.map(U=>U.id===z?{...U,data:{...U.data,parameters:I}}:U))}async function w(){_.set(!0),y.set(null);try{const q=await(await fetch("/api/workflow/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workflow:{nodes:o,edges:i}})})).json();y.set(q),q.success&&q.results&&c.update(U=>U.map(G=>{const V=q.results[G.id],ee=G.class.replace(/\s*node-has-output/g,"");return{...G,class:V?`${ee} node-has-output`:ee}}))}catch(z){y.set({success:!1,error:z.message})}finally{_.set(!1)}}function N(){const I=JSON.stringify({nodes:o,edges:i},null,2),q=new Blob([I],{type:"application/json"}),U=URL.createObjectURL(q),G=document.createElement("a");G.href=U,G.download="workflow.json",G.click(),URL.revokeObjectURL(U)}function C(z){const I=z.target.files[0];if(!I)return;const q=new FileReader;q.onload=U=>{try{const G=JSON.parse(U.target.result);c.set(G.nodes||[]),d.set(G.edges||[])}catch{alert("Invalid workflow file")}},q.readAsText(I)}function L(){b(),f.set(null),y.set(null)}function X(z){zt[z?"unshift":"push"](()=>{v=z,n(0,v)})}return[v,l,a,u,c,d,f,h,y,_,m,p,A,M,T,R,w,N,C,L,X]}class q0 extends ge{constructor(t){super(),he(this,t,F0,K0,ye,{},null,[-1,-1])}}new q0({target:document.getElementById("app")});
